var Kg=d=>{throw TypeError(d)};var Vu=(d,t,i)=>t.has(d)||Kg("Cannot "+i);var $t=(d,t,i)=>(Vu(d,t,"read from private field"),i?i.call(d):t.get(d)),Mi=(d,t,i)=>t.has(d)?Kg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,i),Ue=(d,t,i,s)=>(Vu(d,t,"write to private field"),s?s.call(d,i):t.set(d,i),i),Ri=(d,t,i)=>(Vu(d,t,"access private method"),i);var Wg=(d,t,i,s)=>({set _(r){Ue(d,t,r,i)},get _(){return $t(d,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var Xu={exports:{}},or={};var Qg;function u0(){if(Qg)return or;Qg=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:d,type:s,key:c,ref:r!==void 0?r:null,props:o}}return or.Fragment=t,or.jsx=i,or.jsxs=i,or}var Zg;function h0(){return Zg||(Zg=1,Xu.exports=u0()),Xu.exports}var z=h0(),Yu={exports:{}},ft={};var Jg;function d0(){if(Jg)return ft;Jg=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function w(R,j,W){this.props=R,this.context=j,this.refs=C,this.updater=W||_}w.prototype.isReactComponent={},w.prototype.setState=function(R,j){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,j,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=w.prototype;function x(R,j,W){this.props=R,this.context=j,this.refs=C,this.updater=W||_}var O=x.prototype=new T;O.constructor=x,S(O,w.prototype),O.isPureReactComponent=!0;var L=Array.isArray;function N(){}var P={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function K(R,j,W){var tt=W.ref;return{$$typeof:d,type:R,key:j,ref:tt!==void 0?tt:null,props:W}}function J(R,j){return K(R.type,j,R.props)}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===d}function ht(R){var j={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(W){return j[W]})}var Rt=/\/+/g;function dt(R,j){return typeof R=="object"&&R!==null&&R.key!=null?ht(""+R.key):j.toString(36)}function Dt(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(N,N):(R.status="pending",R.then(function(j){R.status==="pending"&&(R.status="fulfilled",R.value=j)},function(j){R.status==="pending"&&(R.status="rejected",R.reason=j)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function k(R,j,W,tt,ot){var ut=typeof R;(ut==="undefined"||ut==="boolean")&&(R=null);var lt=!1;if(R===null)lt=!0;else switch(ut){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(R.$$typeof){case d:case t:lt=!0;break;case g:return lt=R._init,k(lt(R._payload),j,W,tt,ot)}}if(lt)return ot=ot(R),lt=tt===""?"."+dt(R,0):tt,L(ot)?(W="",lt!=null&&(W=lt.replace(Rt,"$&/")+"/"),k(ot,j,W,"",function(In){return In})):ot!=null&&(Q(ot)&&(ot=J(ot,W+(ot.key==null||R&&R.key===ot.key?"":(""+ot.key).replace(Rt,"$&/")+"/")+lt)),j.push(ot)),1;lt=0;var ie=tt===""?".":tt+":";if(L(R))for(var jt=0;jt<R.length;jt++)tt=R[jt],ut=ie+dt(tt,jt),lt+=k(tt,j,W,ut,ot);else if(jt=A(R),typeof jt=="function")for(R=jt.call(R),jt=0;!(tt=R.next()).done;)tt=tt.value,ut=ie+dt(tt,jt++),lt+=k(tt,j,W,ut,ot);else if(ut==="object"){if(typeof R.then=="function")return k(Dt(R),j,W,tt,ot);throw j=String(R),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return lt}function q(R,j,W){if(R==null)return R;var tt=[],ot=0;return k(R,tt,"","",function(ut){return j.call(W,ut,ot++)}),tt}function Z(R){if(R._status===-1){var j=R._result;j=j(),j.then(function(W){(R._status===0||R._status===-1)&&(R._status=1,R._result=W)},function(W){(R._status===0||R._status===-1)&&(R._status=2,R._result=W)}),R._status===-1&&(R._status=0,R._result=j)}if(R._status===1)return R._result.default;throw R._result}var yt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},St={map:q,forEach:function(R,j,W){q(R,function(){j.apply(this,arguments)},W)},count:function(R){var j=0;return q(R,function(){j++}),j},toArray:function(R){return q(R,function(j){return j})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ft.Activity=y,ft.Children=St,ft.Component=w,ft.Fragment=i,ft.Profiler=r,ft.PureComponent=x,ft.StrictMode=s,ft.Suspense=h,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ft.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},ft.cache=function(R){return function(){return R.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(R,j,W){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var tt=S({},R.props),ot=R.key;if(j!=null)for(ut in j.key!==void 0&&(ot=""+j.key),j)!$.call(j,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&j.ref===void 0||(tt[ut]=j[ut]);var ut=arguments.length-2;if(ut===1)tt.children=W;else if(1<ut){for(var lt=Array(ut),ie=0;ie<ut;ie++)lt[ie]=arguments[ie+2];tt.children=lt}return K(R.type,ot,tt)},ft.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},ft.createElement=function(R,j,W){var tt,ot={},ut=null;if(j!=null)for(tt in j.key!==void 0&&(ut=""+j.key),j)$.call(j,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ot[tt]=j[tt]);var lt=arguments.length-2;if(lt===1)ot.children=W;else if(1<lt){for(var ie=Array(lt),jt=0;jt<lt;jt++)ie[jt]=arguments[jt+2];ot.children=ie}if(R&&R.defaultProps)for(tt in lt=R.defaultProps,lt)ot[tt]===void 0&&(ot[tt]=lt[tt]);return K(R,ut,ot)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(R){return{$$typeof:u,render:R}},ft.isValidElement=Q,ft.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:Z}},ft.memo=function(R,j){return{$$typeof:f,type:R,compare:j===void 0?null:j}},ft.startTransition=function(R){var j=P.T,W={};P.T=W;try{var tt=R(),ot=P.S;ot!==null&&ot(W,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(N,yt)}catch(ut){yt(ut)}finally{j!==null&&W.types!==null&&(j.types=W.types),P.T=j}},ft.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ft.use=function(R){return P.H.use(R)},ft.useActionState=function(R,j,W){return P.H.useActionState(R,j,W)},ft.useCallback=function(R,j){return P.H.useCallback(R,j)},ft.useContext=function(R){return P.H.useContext(R)},ft.useDebugValue=function(){},ft.useDeferredValue=function(R,j){return P.H.useDeferredValue(R,j)},ft.useEffect=function(R,j){return P.H.useEffect(R,j)},ft.useEffectEvent=function(R){return P.H.useEffectEvent(R)},ft.useId=function(){return P.H.useId()},ft.useImperativeHandle=function(R,j,W){return P.H.useImperativeHandle(R,j,W)},ft.useInsertionEffect=function(R,j){return P.H.useInsertionEffect(R,j)},ft.useLayoutEffect=function(R,j){return P.H.useLayoutEffect(R,j)},ft.useMemo=function(R,j){return P.H.useMemo(R,j)},ft.useOptimistic=function(R,j){return P.H.useOptimistic(R,j)},ft.useReducer=function(R,j,W){return P.H.useReducer(R,j,W)},ft.useRef=function(R){return P.H.useRef(R)},ft.useState=function(R){return P.H.useState(R)},ft.useSyncExternalStore=function(R,j,W){return P.H.useSyncExternalStore(R,j,W)},ft.useTransition=function(){return P.H.useTransition()},ft.version="19.2.0",ft}var tm;function xh(){return tm||(tm=1,Yu.exports=d0()),Yu.exports}var G=xh(),$u={exports:{}},lr={},Ku={exports:{}},Wu={};var em;function f0(){return em||(em=1,(function(d){function t(k,q){var Z=k.length;k.push(q);t:for(;0<Z;){var yt=Z-1>>>1,St=k[yt];if(0<r(St,q))k[yt]=q,k[Z]=St,Z=yt;else break t}}function i(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var q=k[0],Z=k.pop();if(Z!==q){k[0]=Z;t:for(var yt=0,St=k.length,R=St>>>1;yt<R;){var j=2*(yt+1)-1,W=k[j],tt=j+1,ot=k[tt];if(0>r(W,Z))tt<St&&0>r(ot,W)?(k[yt]=ot,k[tt]=Z,yt=tt):(k[yt]=W,k[j]=Z,yt=j);else if(tt<St&&0>r(ot,Z))k[yt]=ot,k[tt]=Z,yt=tt;else break t}}return q}function r(k,q){var Z=k.sortIndex-q.sortIndex;return Z!==0?Z:k.id-q.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();d.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,b=3,A=!1,_=!1,S=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var q=i(f);q!==null;){if(q.callback===null)s(f);else if(q.startTime<=k)s(f),q.sortIndex=q.expirationTime,t(h,q);else break;q=i(f)}}function L(k){if(S=!1,O(k),!_)if(i(h)!==null)_=!0,N||(N=!0,ht());else{var q=i(f);q!==null&&Dt(L,q.startTime-k)}}var N=!1,P=-1,$=5,K=-1;function J(){return C?!0:!(d.unstable_now()-K<$)}function Q(){if(C=!1,N){var k=d.unstable_now();K=k;var q=!0;try{t:{_=!1,S&&(S=!1,T(P),P=-1),A=!0;var Z=b;try{e:{for(O(k),y=i(h);y!==null&&!(y.expirationTime>k&&J());){var yt=y.callback;if(typeof yt=="function"){y.callback=null,b=y.priorityLevel;var St=yt(y.expirationTime<=k);if(k=d.unstable_now(),typeof St=="function"){y.callback=St,O(k),q=!0;break e}y===i(h)&&s(h),O(k)}else s(h);y=i(h)}if(y!==null)q=!0;else{var R=i(f);R!==null&&Dt(L,R.startTime-k),q=!1}}break t}finally{y=null,b=Z,A=!1}q=void 0}}finally{q?ht():N=!1}}}var ht;if(typeof x=="function")ht=function(){x(Q)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,dt=Rt.port2;Rt.port1.onmessage=Q,ht=function(){dt.postMessage(null)}}else ht=function(){w(Q,0)};function Dt(k,q){P=w(function(){k(d.unstable_now())},q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(k){k.callback=null},d.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},d.unstable_getCurrentPriorityLevel=function(){return b},d.unstable_next=function(k){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var Z=b;b=q;try{return k()}finally{b=Z}},d.unstable_requestPaint=function(){C=!0},d.unstable_runWithPriority=function(k,q){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return q()}finally{b=Z}},d.unstable_scheduleCallback=function(k,q,Z){var yt=d.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?yt+Z:yt):Z=yt,k){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=Z+St,k={id:g++,callback:q,priorityLevel:k,startTime:Z,expirationTime:St,sortIndex:-1},Z>yt?(k.sortIndex=Z,t(f,k),i(h)===null&&k===i(f)&&(S?(T(P),P=-1):S=!0,Dt(L,Z-yt))):(k.sortIndex=St,t(h,k),_||A||(_=!0,N||(N=!0,ht()))),k},d.unstable_shouldYield=J,d.unstable_wrapCallback=function(k){var q=b;return function(){var Z=b;b=q;try{return k.apply(this,arguments)}finally{b=Z}}}})(Wu)),Wu}var im;function p0(){return im||(im=1,Ku.exports=f0()),Ku.exports}var Qu={exports:{}},xe={};var nm;function g0(){if(nm)return xe;nm=1;var d=xh();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xe.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(h,f,null,g)},xe.flushSync=function(h){var f=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=f,s.p=g,s.d.f()}},xe.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},xe.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},xe.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xe.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},xe.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xe.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},xe.requestFormReset=function(h){s.d.r(h)},xe.unstable_batchedUpdates=function(h,f){return h(f)},xe.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},xe.useFormStatus=function(){return c.H.useHostTransitionStatus()},xe.version="19.2.0",xe}var sm;function m0(){if(sm)return Qu.exports;sm=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Qu.exports=g0(),Qu.exports}var am;function y0(){if(am)return lr;am=1;var d=p0(),t=xh(),i=m0();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var p=a.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){a=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===a)return h(p),e;if(m===l)return h(p),n;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=p,l=m;else{for(var v=!1,E=p.child;E;){if(E===a){v=!0,a=p,l=m;break}if(E===l){v=!0,l=p,a=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===a){v=!0,a=m,l=p;break}if(E===l){v=!0,l=m,a=p;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ht(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var Rt=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Rt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case N:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case x:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case O:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return n=e.displayName||null,n!==null?n:dt(e.type)||"Memo";case $:n=e._payload,e=e._init;try{return dt(e(n))}catch{}}return null}var Dt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},yt=[],St=-1;function R(e){return{current:e}}function j(e){0>St||(e.current=yt[St],yt[St]=null,St--)}function W(e,n){St++,yt[St]=e.current,e.current=n}var tt=R(null),ot=R(null),ut=R(null),lt=R(null);function ie(e,n){switch(W(ut,n),W(ot,e),W(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?bg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=bg(n),e=vg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(tt),W(tt,e)}function jt(){j(tt),j(ot),j(ut)}function In(e){e.memoizedState!==null&&W(lt,e);var n=tt.current,a=vg(n,e.type);n!==a&&(W(ot,e),W(tt,a))}function ln(e){ot.current===e&&(j(tt),j(ot)),lt.current===e&&(j(lt),nr._currentValue=Z)}var Un,pa;function Bi(e){if(Un===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Un=n&&n[1]||"",pa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Un+e+pa}var Ml=!1;function Rl(e,n){if(!e||Ml)return"";Ml=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(H){var U=H}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(H){U=H}e.call(Y.prototype)}}else{try{throw Error()}catch(H){U=H}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(H){if(H&&U&&typeof H.stack=="string")return[H.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var M=v.split(`
`),I=E.split(`
`);for(p=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;p<I.length&&!I[p].includes("DetermineComponentFrameRoot");)p++;if(l===M.length||p===I.length)for(l=M.length-1,p=I.length-1;1<=l&&0<=p&&M[l]!==I[p];)p--;for(;1<=l&&0<=p;l--,p--)if(M[l]!==I[p]){if(l!==1||p!==1)do if(l--,p--,0>p||M[l]!==I[p]){var V=`
`+M[l].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=l&&0<=p);break}}}finally{Ml=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Bi(a):""}function Hy(e,n){switch(e.tag){case 26:case 27:case 5:return Bi(e.type);case 16:return Bi("Lazy");case 13:return e.child!==n&&n!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Rl(e.type,!1);case 11:return Rl(e.type.render,!1);case 1:return Rl(e.type,!0);case 31:return Bi("Activity");default:return""}}function $h(e){try{var n="",a=null;do n+=Hy(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Dl=Object.prototype.hasOwnProperty,Ll=d.unstable_scheduleCallback,Ol=d.unstable_cancelCallback,jy=d.unstable_shouldYield,Gy=d.unstable_requestPaint,Ge=d.unstable_now,qy=d.unstable_getCurrentPriorityLevel,Kh=d.unstable_ImmediatePriority,Wh=d.unstable_UserBlockingPriority,Br=d.unstable_NormalPriority,Vy=d.unstable_LowPriority,Qh=d.unstable_IdlePriority,Xy=d.log,Yy=d.unstable_setDisableYieldValue,ga=null,qe=null;function cn(e){if(typeof Xy=="function"&&Yy(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(ga,e)}catch{}}var Ve=Math.clz32?Math.clz32:Wy,$y=Math.log,Ky=Math.LN2;function Wy(e){return e>>>=0,e===0?32:31-($y(e)/Ky|0)|0}var Pr=256,zr=262144,Fr=4194304;function Hn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ir(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?p=Hn(l):(v&=E,v!==0?p=Hn(v):a||(a=E&~e,a!==0&&(p=Hn(a))))):(E=l&~m,E!==0?p=Hn(E):v!==0?p=Hn(v):a||(a=l&~e,a!==0&&(p=Hn(a)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:p}function ma(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Qy(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zh(){var e=Fr;return Fr<<=1,(Fr&62914560)===0&&(Fr=4194304),e}function Nl(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ya(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Zy(e,n,a,l,p,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,M=e.expirationTimes,I=e.hiddenUpdates;for(a=v&~a;0<a;){var V=31-Ve(a),Y=1<<V;E[V]=0,M[V]=-1;var U=I[V];if(U!==null)for(I[V]=null,V=0;V<U.length;V++){var H=U[V];H!==null&&(H.lane&=-536870913)}a&=~Y}l!==0&&Jh(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function Jh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Ve(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function td(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-Ve(a),p=1<<l;p&n|e[l]&n&&(e[l]|=n),a&=~p}}function ed(e,n){var a=n&-n;return a=(a&42)!==0?1:kl(a),(a&(e.suspendedLanes|n))!==0?0:a}function kl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function id(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:jg(e.type))}function nd(e,n){var a=q.p;try{return q.p=e,n()}finally{q.p=a}}var un=Math.random().toString(36).slice(2),ve="__reactFiber$"+un,Ne="__reactProps$"+un,ms="__reactContainer$"+un,Pl="__reactEvents$"+un,Jy="__reactListeners$"+un,tb="__reactHandles$"+un,sd="__reactResources$"+un,ba="__reactMarker$"+un;function zl(e){delete e[ve],delete e[Ne],delete e[Pl],delete e[Jy],delete e[tb]}function ys(e){var n=e[ve];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ms]||a[ve]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Tg(e);e!==null;){if(a=e[ve])return a;e=Tg(e)}return n}e=a,a=e.parentNode}return null}function bs(e){if(e=e[ve]||e[ms]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function va(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function vs(e){var n=e[sd];return n||(n=e[sd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ge(e){e[ba]=!0}var ad=new Set,rd={};function jn(e,n){As(e,n),As(e+"Capture",n)}function As(e,n){for(rd[e]=n,e=0;e<n.length;e++)ad.add(n[e])}var eb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),od={},ld={};function ib(e){return Dl.call(ld,e)?!0:Dl.call(od,e)?!1:eb.test(e)?ld[e]=!0:(od[e]=!0,!1)}function Ur(e,n,a){if(ib(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Hr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Pi(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function ii(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cd(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function nb(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Fl(e){if(!e._valueTracker){var n=cd(e)?"checked":"value";e._valueTracker=nb(e,n,""+e[n])}}function ud(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=cd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function jr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var sb=/[\n"\\]/g;function ni(e){return e.replace(sb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Il(e,n,a,l,p,m,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ii(n)):e.value!==""+ii(n)&&(e.value=""+ii(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Ul(e,v,ii(n)):a!=null?Ul(e,v,ii(a)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ii(E):e.removeAttribute("name")}function hd(e,n,a,l,p,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Fl(e);return}a=a!=null?""+ii(a):"",n=n!=null?""+ii(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Fl(e)}function Ul(e,n,a){n==="number"&&jr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ss(e,n,a,l){if(e=e.options,n){n={};for(var p=0;p<a.length;p++)n["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=n.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&l&&(e[a].defaultSelected=!0)}else{for(a=""+ii(a),n=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function dd(e,n,a){if(n!=null&&(n=""+ii(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ii(a):""}function fd(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(Dt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=ii(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Fl(e)}function _s(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var ab=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pd(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||ab.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function gd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in n)l=n[p],n.hasOwnProperty(p)&&a[p]!==l&&pd(e,p,l)}else for(var m in n)n.hasOwnProperty(m)&&pd(e,m,n[m])}function Hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ob=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(e){return ob.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function zi(){}var jl=null;function Gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ws=null,Es=null;function md(e){var n=bs(e);if(n&&(e=n.stateNode)){var a=e[Ne]||null;t:switch(e=n.stateNode,n.type){case"input":if(Il(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ni(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var p=l[Ne]||null;if(!p)throw Error(s(90));Il(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&ud(l)}break t;case"textarea":dd(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ss(e,!!a.multiple,n,!1)}}}var ql=!1;function yd(e,n,a){if(ql)return e(n,a);ql=!0;try{var l=e(n);return l}finally{if(ql=!1,(ws!==null||Es!==null)&&(Lo(),ws&&(n=ws,e=Es,Es=ws=null,md(n),e)))for(n=0;n<e.length;n++)md(e[n])}}function Aa(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Ne]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=!1;if(Fi)try{var Sa={};Object.defineProperty(Sa,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Sa,Sa),window.removeEventListener("test",Sa,Sa)}catch{Vl=!1}var hn=null,Xl=null,qr=null;function bd(){if(qr)return qr;var e,n=Xl,a=n.length,l,p="value"in hn?hn.value:hn.textContent,m=p.length;for(e=0;e<a&&n[e]===p[e];e++);var v=a-e;for(l=1;l<=v&&n[a-l]===p[m-l];l++);return qr=p.slice(e,1<l?1-l:void 0)}function Vr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Xr(){return!0}function vd(){return!1}function ke(e){function n(a,l,p,m,v){this._reactName=a,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xr:vd,this.isPropagationStopped=vd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),n}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=ke(Gn),_a=y({},Gn,{view:0,detail:0}),lb=ke(_a),Yl,$l,wa,$r=y({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(Yl=e.screenX-wa.screenX,$l=e.screenY-wa.screenY):$l=Yl=0,wa=e),Yl)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),Ad=ke($r),cb=y({},$r,{dataTransfer:0}),ub=ke(cb),hb=y({},_a,{relatedTarget:0}),Kl=ke(hb),db=y({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),fb=ke(db),pb=y({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gb=ke(pb),mb=y({},Gn,{data:0}),Sd=ke(mb),yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ab(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=vb[e])?!!n[e]:!1}function Wl(){return Ab}var Sb=y({},_a,{key:function(e){if(e.key){var n=yb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Vr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(e){return e.type==="keypress"?Vr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_b=ke(Sb),wb=y({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=ke(wb),Eb=y({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),Cb=ke(Eb),Tb=y({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xb=ke(Tb),Mb=y({},$r,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=ke(Mb),Db=y({},Gn,{newState:0,oldState:0}),Lb=ke(Db),Ob=[9,13,27,32],Ql=Fi&&"CompositionEvent"in window,Ea=null;Fi&&"documentMode"in document&&(Ea=document.documentMode);var Nb=Fi&&"TextEvent"in window&&!Ea,wd=Fi&&(!Ql||Ea&&8<Ea&&11>=Ea),Ed=" ",Cd=!1;function Td(e,n){switch(e){case"keyup":return Ob.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function kb(e,n){switch(e){case"compositionend":return xd(n);case"keypress":return n.which!==32?null:(Cd=!0,Ed);case"textInput":return e=n.data,e===Ed&&Cd?null:e;default:return null}}function Bb(e,n){if(Cs)return e==="compositionend"||!Ql&&Td(e,n)?(e=bd(),qr=Xl=hn=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return wd&&n.locale!=="ko"?null:n.data;default:return null}}var Pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Pb[e.type]:n==="textarea"}function Rd(e,n,a,l){ws?Es?Es.push(l):Es=[l]:ws=l,n=Fo(n,"onChange"),0<n.length&&(a=new Yr("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Ca=null,Ta=null;function zb(e){dg(e,0)}function Kr(e){var n=va(e);if(ud(n))return e}function Dd(e,n){if(e==="change")return n}var Ld=!1;if(Fi){var Zl;if(Fi){var Jl="oninput"in document;if(!Jl){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),Jl=typeof Od.oninput=="function"}Zl=Jl}else Zl=!1;Ld=Zl&&(!document.documentMode||9<document.documentMode)}function Nd(){Ca&&(Ca.detachEvent("onpropertychange",kd),Ta=Ca=null)}function kd(e){if(e.propertyName==="value"&&Kr(Ta)){var n=[];Rd(n,Ta,e,Gl(e)),yd(zb,n)}}function Fb(e,n,a){e==="focusin"?(Nd(),Ca=n,Ta=a,Ca.attachEvent("onpropertychange",kd)):e==="focusout"&&Nd()}function Ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kr(Ta)}function Ub(e,n){if(e==="click")return Kr(n)}function Hb(e,n){if(e==="input"||e==="change")return Kr(n)}function jb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Xe=typeof Object.is=="function"?Object.is:jb;function xa(e,n){if(Xe(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var p=a[l];if(!Dl.call(n,p)||!Xe(e[p],n[p]))return!1}return!0}function Bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pd(e,n){var a=Bd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Bd(a)}}function zd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?zd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Fd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=jr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=jr(e.document)}return n}function tc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Gb=Fi&&"documentMode"in document&&11>=document.documentMode,Ts=null,ec=null,Ma=null,ic=!1;function Id(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ic||Ts==null||Ts!==jr(l)||(l=Ts,"selectionStart"in l&&tc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ma&&xa(Ma,l)||(Ma=l,l=Fo(ec,"onSelect"),0<l.length&&(n=new Yr("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Ts)))}function qn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var xs={animationend:qn("Animation","AnimationEnd"),animationiteration:qn("Animation","AnimationIteration"),animationstart:qn("Animation","AnimationStart"),transitionrun:qn("Transition","TransitionRun"),transitionstart:qn("Transition","TransitionStart"),transitioncancel:qn("Transition","TransitionCancel"),transitionend:qn("Transition","TransitionEnd")},nc={},Ud={};Fi&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Vn(e){if(nc[e])return nc[e];if(!xs[e])return e;var n=xs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Ud)return nc[e]=n[a];return e}var Hd=Vn("animationend"),jd=Vn("animationiteration"),Gd=Vn("animationstart"),qb=Vn("transitionrun"),Vb=Vn("transitionstart"),Xb=Vn("transitioncancel"),qd=Vn("transitionend"),Vd=new Map,sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sc.push("scrollEnd");function Ai(e,n){Vd.set(e,n),jn(n,[e])}var Wr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},si=[],Ms=0,ac=0;function Qr(){for(var e=Ms,n=ac=Ms=0;n<e;){var a=si[n];si[n++]=null;var l=si[n];si[n++]=null;var p=si[n];si[n++]=null;var m=si[n];if(si[n++]=null,l!==null&&p!==null){var v=l.pending;v===null?p.next=p:(p.next=v.next,v.next=p),l.pending=p}m!==0&&Xd(a,p,m)}}function Zr(e,n,a,l){si[Ms++]=e,si[Ms++]=n,si[Ms++]=a,si[Ms++]=l,ac|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function rc(e,n,a,l){return Zr(e,n,a,l),Jr(e)}function Xn(e,n){return Zr(e,null,null,n),Jr(e)}function Xd(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var p=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-Ve(a),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[n]:l.push(n),n.lane=a|536870912),m):null}function Jr(e){if(50<Wa)throw Wa=0,gu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Rs={};function Yb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,n,a,l){return new Yb(e,n,a,l)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,n){var a=e.alternate;return a===null?(a=Ye(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Yd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function to(e,n,a,l,p,m){var v=0;if(l=e,typeof e=="function")oc(e)&&(v=1);else if(typeof e=="string")v=Zv(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=Ye(31,a,n,p),e.elementType=K,e.lanes=m,e;case S:return Yn(a.children,p,m,n);case C:v=8,p|=24;break;case w:return e=Ye(12,a,n,p|2),e.elementType=w,e.lanes=m,e;case L:return e=Ye(13,a,n,p),e.elementType=L,e.lanes=m,e;case N:return e=Ye(19,a,n,p),e.elementType=N,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x:v=10;break t;case T:v=9;break t;case O:v=11;break t;case P:v=14;break t;case $:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=Ye(v,a,n,p),n.elementType=e,n.type=l,n.lanes=m,n}function Yn(e,n,a,l){return e=Ye(7,e,l,n),e.lanes=a,e}function lc(e,n,a){return e=Ye(6,e,null,n),e.lanes=a,e}function $d(e){var n=Ye(18,null,null,0);return n.stateNode=e,n}function cc(e,n,a){return n=Ye(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Kd=new WeakMap;function ai(e,n){if(typeof e=="object"&&e!==null){var a=Kd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:$h(n)},Kd.set(e,n),n)}return{value:e,source:n,stack:$h(n)}}var Ds=[],Ls=0,eo=null,Ra=0,ri=[],oi=0,dn=null,Ei=1,Ci="";function Ui(e,n){Ds[Ls++]=Ra,Ds[Ls++]=eo,eo=e,Ra=n}function Wd(e,n,a){ri[oi++]=Ei,ri[oi++]=Ci,ri[oi++]=dn,dn=e;var l=Ei;e=Ci;var p=32-Ve(l)-1;l&=~(1<<p),a+=1;var m=32-Ve(n)+p;if(30<m){var v=p-p%5;m=(l&(1<<v)-1).toString(32),l>>=v,p-=v,Ei=1<<32-Ve(n)+p|a<<p|l,Ci=m+e}else Ei=1<<m|a<<p|l,Ci=e}function uc(e){e.return!==null&&(Ui(e,1),Wd(e,1,0))}function hc(e){for(;e===eo;)eo=Ds[--Ls],Ds[Ls]=null,Ra=Ds[--Ls],Ds[Ls]=null;for(;e===dn;)dn=ri[--oi],ri[oi]=null,Ci=ri[--oi],ri[oi]=null,Ei=ri[--oi],ri[oi]=null}function Qd(e,n){ri[oi++]=Ei,ri[oi++]=Ci,ri[oi++]=dn,Ei=n.id,Ci=n.overflow,dn=e}var Ae=null,Vt=null,Tt=!1,fn=null,li=!1,dc=Error(s(519));function pn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Da(ai(n,e)),dc}function Zd(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[ve]=e,n[Ne]=l,a){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(a=0;a<Za.length;a++)wt(Za[a],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),hd(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),fd(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||mg(n.textContent,a)?(l.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),l.onScroll!=null&&wt("scroll",n),l.onScrollEnd!=null&&wt("scrollend",n),l.onClick!=null&&(n.onclick=zi),n=!0):n=!1,n||pn(e,!0)}function Jd(e){for(Ae=e.return;Ae;)switch(Ae.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:Ae=Ae.return}}function Os(e){if(e!==Ae)return!1;if(!Tt)return Jd(e),Tt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Du(e.type,e.memoizedProps)),a=!a),a&&Vt&&pn(e),Jd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Vt=Cg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Vt=Cg(e)}else n===27?(n=Vt,Mn(e.type)?(e=Bu,Bu=null,Vt=e):Vt=n):Vt=Ae?ui(e.stateNode.nextSibling):null;return!0}function $n(){Vt=Ae=null,Tt=!1}function fc(){var e=fn;return e!==null&&(Fe===null?Fe=e:Fe.push.apply(Fe,e),fn=null),e}function Da(e){fn===null?fn=[e]:fn.push(e)}var pc=R(null),Kn=null,Hi=null;function gn(e,n,a){W(pc,n._currentValue),n._currentValue=a}function ji(e){e._currentValue=pc.current,j(pc)}function gc(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function mc(e,n,a,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=p;for(var M=0;M<n.length;M++)if(E.context===n[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),gc(m.return,a,e),l||(v=null);break t}m=E.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),gc(v,a,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function Ns(e,n,a,l){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=p.type;Xe(p.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(p===lt.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(nr):e=[nr])}p=p.return}e!==null&&mc(n,e,a,l),n.flags|=262144}function io(e){for(e=e.firstContext;e!==null;){if(!Xe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wn(e){Kn=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return tf(Kn,e)}function no(e,n){return Kn===null&&Wn(e),tf(e,n)}function tf(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Hi===null){if(e===null)throw Error(s(308));Hi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Hi=Hi.next=n;return a}var $b=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Kb=d.unstable_scheduleCallback,Wb=d.unstable_NormalPriority,re={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new $b,data:new Map,refCount:0}}function La(e){e.refCount--,e.refCount===0&&Kb(Wb,function(){e.controller.abort()})}var Oa=null,bc=0,ks=0,Bs=null;function Qb(e,n){if(Oa===null){var a=Oa=[];bc=0,ks=Su(),Bs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bc++,n.then(ef,ef),n}function ef(){if(--bc===0&&Oa!==null){Bs!==null&&(Bs.status="fulfilled");var e=Oa;Oa=null,ks=0,Bs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Zb(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var p=0;p<a.length;p++)(0,a[p])(n)},function(p){for(l.status="rejected",l.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),l}var nf=k.S;k.S=function(e,n){Up=Ge(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Qb(e,n),nf!==null&&nf(e,n)};var Qn=R(null);function vc(){var e=Qn.current;return e!==null?e:Gt.pooledCache}function so(e,n){n===null?W(Qn,Qn.current):W(Qn,n.pool)}function sf(){var e=vc();return e===null?null:{parent:re._currentValue,pool:e}}var Ps=Error(s(460)),Ac=Error(s(474)),ao=Error(s(542)),ro={then:function(){}};function af(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rf(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(zi,zi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,lf(e),e;default:if(typeof n.status=="string")n.then(zi,zi);else{if(e=Gt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=l}},function(l){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,lf(e),e}throw Jn=n,Ps}}function Zn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Jn=a,Ps):a}}var Jn=null;function of(){if(Jn===null)throw Error(s(459));var e=Jn;return Jn=null,e}function lf(e){if(e===Ps||e===ao)throw Error(s(483))}var zs=null,Na=0;function oo(e){var n=Na;return Na+=1,zs===null&&(zs=[]),rf(zs,e,n)}function ka(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function lo(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function cf(e){function n(B,D){if(e){var F=B.deletions;F===null?(B.deletions=[D],B.flags|=16):F.push(D)}}function a(B,D){if(!e)return null;for(;D!==null;)n(B,D),D=D.sibling;return null}function l(B){for(var D=new Map;B!==null;)B.key!==null?D.set(B.key,B):D.set(B.index,B),B=B.sibling;return D}function p(B,D){return B=Ii(B,D),B.index=0,B.sibling=null,B}function m(B,D,F){return B.index=F,e?(F=B.alternate,F!==null?(F=F.index,F<D?(B.flags|=67108866,D):F):(B.flags|=67108866,D)):(B.flags|=1048576,D)}function v(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function E(B,D,F,X){return D===null||D.tag!==6?(D=lc(F,B.mode,X),D.return=B,D):(D=p(D,F),D.return=B,D)}function M(B,D,F,X){var at=F.type;return at===S?V(B,D,F.props.children,X,F.key):D!==null&&(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Zn(at)===D.type)?(D=p(D,F.props),ka(D,F),D.return=B,D):(D=to(F.type,F.key,F.props,null,B.mode,X),ka(D,F),D.return=B,D)}function I(B,D,F,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=cc(F,B.mode,X),D.return=B,D):(D=p(D,F.children||[]),D.return=B,D)}function V(B,D,F,X,at){return D===null||D.tag!==7?(D=Yn(F,B.mode,X,at),D.return=B,D):(D=p(D,F),D.return=B,D)}function Y(B,D,F){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=lc(""+D,B.mode,F),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return F=to(D.type,D.key,D.props,null,B.mode,F),ka(F,D),F.return=B,F;case _:return D=cc(D,B.mode,F),D.return=B,D;case $:return D=Zn(D),Y(B,D,F)}if(Dt(D)||ht(D))return D=Yn(D,B.mode,F,null),D.return=B,D;if(typeof D.then=="function")return Y(B,oo(D),F);if(D.$$typeof===x)return Y(B,no(B,D),F);lo(B,D)}return null}function U(B,D,F,X){var at=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return at!==null?null:E(B,D,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===at?M(B,D,F,X):null;case _:return F.key===at?I(B,D,F,X):null;case $:return F=Zn(F),U(B,D,F,X)}if(Dt(F)||ht(F))return at!==null?null:V(B,D,F,X,null);if(typeof F.then=="function")return U(B,D,oo(F),X);if(F.$$typeof===x)return U(B,D,no(B,F),X);lo(B,F)}return null}function H(B,D,F,X,at){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return B=B.get(F)||null,E(D,B,""+X,at);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return B=B.get(X.key===null?F:X.key)||null,M(D,B,X,at);case _:return B=B.get(X.key===null?F:X.key)||null,I(D,B,X,at);case $:return X=Zn(X),H(B,D,F,X,at)}if(Dt(X)||ht(X))return B=B.get(F)||null,V(D,B,X,at,null);if(typeof X.then=="function")return H(B,D,F,oo(X),at);if(X.$$typeof===x)return H(B,D,F,no(D,X),at);lo(D,X)}return null}function nt(B,D,F,X){for(var at=null,Lt=null,st=D,vt=D=0,Ct=null;st!==null&&vt<F.length;vt++){st.index>vt?(Ct=st,st=null):Ct=st.sibling;var Ot=U(B,st,F[vt],X);if(Ot===null){st===null&&(st=Ct);break}e&&st&&Ot.alternate===null&&n(B,st),D=m(Ot,D,vt),Lt===null?at=Ot:Lt.sibling=Ot,Lt=Ot,st=Ct}if(vt===F.length)return a(B,st),Tt&&Ui(B,vt),at;if(st===null){for(;vt<F.length;vt++)st=Y(B,F[vt],X),st!==null&&(D=m(st,D,vt),Lt===null?at=st:Lt.sibling=st,Lt=st);return Tt&&Ui(B,vt),at}for(st=l(st);vt<F.length;vt++)Ct=H(st,B,vt,F[vt],X),Ct!==null&&(e&&Ct.alternate!==null&&st.delete(Ct.key===null?vt:Ct.key),D=m(Ct,D,vt),Lt===null?at=Ct:Lt.sibling=Ct,Lt=Ct);return e&&st.forEach(function(Nn){return n(B,Nn)}),Tt&&Ui(B,vt),at}function ct(B,D,F,X){if(F==null)throw Error(s(151));for(var at=null,Lt=null,st=D,vt=D=0,Ct=null,Ot=F.next();st!==null&&!Ot.done;vt++,Ot=F.next()){st.index>vt?(Ct=st,st=null):Ct=st.sibling;var Nn=U(B,st,Ot.value,X);if(Nn===null){st===null&&(st=Ct);break}e&&st&&Nn.alternate===null&&n(B,st),D=m(Nn,D,vt),Lt===null?at=Nn:Lt.sibling=Nn,Lt=Nn,st=Ct}if(Ot.done)return a(B,st),Tt&&Ui(B,vt),at;if(st===null){for(;!Ot.done;vt++,Ot=F.next())Ot=Y(B,Ot.value,X),Ot!==null&&(D=m(Ot,D,vt),Lt===null?at=Ot:Lt.sibling=Ot,Lt=Ot);return Tt&&Ui(B,vt),at}for(st=l(st);!Ot.done;vt++,Ot=F.next())Ot=H(st,B,vt,Ot.value,X),Ot!==null&&(e&&Ot.alternate!==null&&st.delete(Ot.key===null?vt:Ot.key),D=m(Ot,D,vt),Lt===null?at=Ot:Lt.sibling=Ot,Lt=Ot);return e&&st.forEach(function(c0){return n(B,c0)}),Tt&&Ui(B,vt),at}function Ut(B,D,F,X){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var at=F.key;D!==null;){if(D.key===at){if(at=F.type,at===S){if(D.tag===7){a(B,D.sibling),X=p(D,F.props.children),X.return=B,B=X;break t}}else if(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Zn(at)===D.type){a(B,D.sibling),X=p(D,F.props),ka(X,F),X.return=B,B=X;break t}a(B,D);break}else n(B,D);D=D.sibling}F.type===S?(X=Yn(F.props.children,B.mode,X,F.key),X.return=B,B=X):(X=to(F.type,F.key,F.props,null,B.mode,X),ka(X,F),X.return=B,B=X)}return v(B);case _:t:{for(at=F.key;D!==null;){if(D.key===at)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){a(B,D.sibling),X=p(D,F.children||[]),X.return=B,B=X;break t}else{a(B,D);break}else n(B,D);D=D.sibling}X=cc(F,B.mode,X),X.return=B,B=X}return v(B);case $:return F=Zn(F),Ut(B,D,F,X)}if(Dt(F))return nt(B,D,F,X);if(ht(F)){if(at=ht(F),typeof at!="function")throw Error(s(150));return F=at.call(F),ct(B,D,F,X)}if(typeof F.then=="function")return Ut(B,D,oo(F),X);if(F.$$typeof===x)return Ut(B,D,no(B,F),X);lo(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,D!==null&&D.tag===6?(a(B,D.sibling),X=p(D,F),X.return=B,B=X):(a(B,D),X=lc(F,B.mode,X),X.return=B,B=X),v(B)):a(B,D)}return function(B,D,F,X){try{Na=0;var at=Ut(B,D,F,X);return zs=null,at}catch(st){if(st===Ps||st===ao)throw st;var Lt=Ye(29,st,null,B.mode);return Lt.lanes=X,Lt.return=B,Lt}finally{}}}var ts=cf(!0),uf=cf(!1),mn=!1;function Sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _c(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bn(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var p=l.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),l.pending=n,n=Jr(e),Xd(e,null,a),n}return Zr(e,l,n,a),Jr(e)}function Ba(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,td(e,a)}}function wc(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var p=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?p=m=n:m=m.next=n}else p=m=n;a={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Ec=!1;function Pa(){if(Ec){var e=Bs;if(e!==null)throw e}}function za(e,n,a,l){Ec=!1;var p=e.updateQueue;mn=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var M=E,I=M.next;M.next=null,v===null?m=I:v.next=I,v=M;var V=e.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==v&&(E===null?V.firstBaseUpdate=I:E.next=I,V.lastBaseUpdate=M))}if(m!==null){var Y=p.baseState;v=0,V=I=M=null,E=m;do{var U=E.lane&-536870913,H=U!==E.lane;if(H?(Et&U)===U:(l&U)===U){U!==0&&U===ks&&(Ec=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var nt=e,ct=E;U=n;var Ut=a;switch(ct.tag){case 1:if(nt=ct.payload,typeof nt=="function"){Y=nt.call(Ut,Y,U);break t}Y=nt;break t;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ct.payload,U=typeof nt=="function"?nt.call(Ut,Y,U):nt,U==null)break t;Y=y({},Y,U);break t;case 2:mn=!0}}U=E.callback,U!==null&&(e.flags|=64,H&&(e.flags|=8192),H=p.callbacks,H===null?p.callbacks=[U]:H.push(U))}else H={lane:U,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(I=V=H,M=Y):V=V.next=H,v|=U;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;H=E,E=H.next,H.next=null,p.lastBaseUpdate=H,p.shared.pending=null}}while(!0);V===null&&(M=Y),p.baseState=M,p.firstBaseUpdate=I,p.lastBaseUpdate=V,m===null&&(p.shared.lanes=0),wn|=v,e.lanes=v,e.memoizedState=Y}}function hf(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function df(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hf(a[e],n)}var Fs=R(null),co=R(0);function ff(e,n){e=Qi,W(co,e),W(Fs,n),Qi=e|n.baseLanes}function Cc(){W(co,Qi),W(Fs,Fs.current)}function Tc(){Qi=co.current,j(Fs),j(co)}var $e=R(null),ci=null;function vn(e){var n=e.alternate;W(ne,ne.current&1),W($e,e),ci===null&&(n===null||Fs.current!==null||n.memoizedState!==null)&&(ci=e)}function xc(e){W(ne,ne.current),W($e,e),ci===null&&(ci=e)}function pf(e){e.tag===22?(W(ne,ne.current),W($e,e),ci===null&&(ci=e)):An()}function An(){W(ne,ne.current),W($e,$e.current)}function Ke(e){j($e),ci===e&&(ci=null),j(ne)}var ne=R(0);function uo(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Nu(a)||ku(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Gi=0,bt=null,Ft=null,oe=null,ho=!1,Is=!1,es=!1,fo=0,Fa=0,Us=null,Jb=0;function Jt(){throw Error(s(321))}function Mc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Xe(e[a],n[a]))return!1;return!0}function Rc(e,n,a,l,p,m){return Gi=m,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Qf:qc,es=!1,m=a(l,p),es=!1,Is&&(m=mf(n,a,l,p)),gf(e),m}function gf(e){k.H=Ha;var n=Ft!==null&&Ft.next!==null;if(Gi=0,oe=Ft=bt=null,ho=!1,Fa=0,Us=null,n)throw Error(s(300));e===null||le||(e=e.dependencies,e!==null&&io(e)&&(le=!0))}function mf(e,n,a,l){bt=e;var p=0;do{if(Is&&(Us=null),Fa=0,Is=!1,25<=p)throw Error(s(301));if(p+=1,oe=Ft=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=Zf,m=n(a,l)}while(Is);return m}function tv(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?Ia(n):n,e=e.useState()[0],(Ft!==null?Ft.memoizedState:null)!==e&&(bt.flags|=1024),n}function Dc(){var e=fo!==0;return fo=0,e}function Lc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Oc(e){if(ho){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ho=!1}Gi=0,oe=Ft=bt=null,Is=!1,Fa=fo=0,Us=null}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?bt.memoizedState=oe=e:oe=oe.next=e,oe}function se(){if(Ft===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var n=oe===null?bt.memoizedState:oe.next;if(n!==null)oe=n,Ft=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},oe===null?bt.memoizedState=oe=e:oe=oe.next=e}return oe}function po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ia(e){var n=Fa;return Fa+=1,Us===null&&(Us=[]),e=rf(Us,e,n),n=bt,(oe===null?n.memoizedState:oe.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Qf:qc),e}function go(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ia(e);if(e.$$typeof===x)return Se(e)}throw Error(s(438,String(e)))}function Nc(e){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=bt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=po(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=J;return n.index++,a}function qi(e,n){return typeof n=="function"?n(e):n}function mo(e){var n=se();return kc(n,Ft,e)}function kc(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}n.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var E=v=null,M=null,I=n,V=!1;do{var Y=I.lane&-536870913;if(Y!==I.lane?(Et&Y)===Y:(Gi&Y)===Y){var U=I.revertLane;if(U===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),Y===ks&&(V=!0);else if((Gi&U)===U){I=I.next,U===ks&&(V=!0);continue}else Y={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(E=M=Y,v=m):M=M.next=Y,bt.lanes|=U,wn|=U;Y=I.action,es&&a(m,Y),m=I.hasEagerState?I.eagerState:a(m,Y)}else U={lane:Y,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(E=M=U,v=m):M=M.next=U,bt.lanes|=Y,wn|=Y;I=I.next}while(I!==null&&I!==n);if(M===null?v=m:M.next=E,!Xe(m,e.memoizedState)&&(le=!0,V&&(a=Bs,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=M,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Bc(e){var n=se(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,p=a.pending,m=n.memoizedState;if(p!==null){a.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);Xe(m,n.memoizedState)||(le=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function yf(e,n,a){var l=bt,p=se(),m=Tt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Xe((Ft||p).memoizedState,a);if(v&&(p.memoizedState=a,le=!0),p=p.queue,Fc(Af.bind(null,l,p,e),[e]),p.getSnapshot!==n||v||oe!==null&&oe.memoizedState.tag&1){if(l.flags|=2048,Hs(9,{destroy:void 0},vf.bind(null,l,p,a,n),null),Gt===null)throw Error(s(349));m||(Gi&127)!==0||bf(l,n,a)}return a}function bf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=po(),bt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function vf(e,n,a,l){n.value=a,n.getSnapshot=l,Sf(n)&&_f(e)}function Af(e,n,a){return a(function(){Sf(n)&&_f(e)})}function Sf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Xe(e,a)}catch{return!0}}function _f(e){var n=Xn(e,2);n!==null&&Ie(n,e,2)}function Pc(e){var n=Me();if(typeof e=="function"){var a=e;if(e=a(),es){cn(!0);try{a()}finally{cn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},n}function wf(e,n,a,l){return e.baseState=a,kc(e,Ft,typeof l=="function"?l:qi)}function ev(e,n,a,l,p){if(vo(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};k.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Ef(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Ef(e,n){var a=n.action,l=n.payload,p=e.state;if(n.isTransition){var m=k.T,v={};k.T=v;try{var E=a(p,l),M=k.S;M!==null&&M(v,E),Cf(e,n,E)}catch(I){zc(e,n,I)}finally{m!==null&&v.types!==null&&(m.types=v.types),k.T=m}}else try{m=a(p,l),Cf(e,n,m)}catch(I){zc(e,n,I)}}function Cf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Tf(e,n,l)},function(l){return zc(e,n,l)}):Tf(e,n,a)}function Tf(e,n,a){n.status="fulfilled",n.value=a,xf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Ef(e,a)))}function zc(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,xf(n),n=n.next;while(n!==l)}e.action=null}function xf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Mf(e,n){return n}function Rf(e,n){if(Tt){var a=Gt.formState;if(a!==null){t:{var l=bt;if(Tt){if(Vt){e:{for(var p=Vt,m=li;p.nodeType!==8;){if(!m){p=null;break e}if(p=ui(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Vt=ui(p.nextSibling),l=p.data==="F!";break t}}pn(l)}l=!1}l&&(n=a[0])}}return a=Me(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:n},a.queue=l,a=$f.bind(null,bt,l),l.dispatch=a,l=Pc(!1),m=Gc.bind(null,bt,!1,l.queue),l=Me(),p={state:n,dispatch:null,action:e,pending:null},l.queue=p,a=ev.bind(null,bt,p,m,a),p.dispatch=a,l.memoizedState=e,[n,a,!1]}function Df(e){var n=se();return Lf(n,Ft,e)}function Lf(e,n,a){if(n=kc(e,n,Mf)[0],e=mo(qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Ia(n)}catch(v){throw v===Ps?ao:v}else l=n;n=se();var p=n.queue,m=p.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,Hs(9,{destroy:void 0},iv.bind(null,p,a),null)),[l,m,e]}function iv(e,n){e.action=n}function Of(e){var n=se(),a=Ft;if(a!==null)return Lf(n,a,e);se(),n=n.memoizedState,a=se();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Hs(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=bt.updateQueue,n===null&&(n=po(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Nf(){return se().memoizedState}function yo(e,n,a,l){var p=Me();bt.flags|=e,p.memoizedState=Hs(1|n,{destroy:void 0},a,l===void 0?null:l)}function bo(e,n,a,l){var p=se();l=l===void 0?null:l;var m=p.memoizedState.inst;Ft!==null&&l!==null&&Mc(l,Ft.memoizedState.deps)?p.memoizedState=Hs(n,m,a,l):(bt.flags|=e,p.memoizedState=Hs(1|n,m,a,l))}function kf(e,n){yo(8390656,8,e,n)}function Fc(e,n){bo(2048,8,e,n)}function nv(e){bt.flags|=4;var n=bt.updateQueue;if(n===null)n=po(),bt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Bf(e){var n=se().memoizedState;return nv({ref:n,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Pf(e,n){return bo(4,2,e,n)}function zf(e,n){return bo(4,4,e,n)}function Ff(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function If(e,n,a){a=a!=null?a.concat([e]):null,bo(4,4,Ff.bind(null,n,e),a)}function Ic(){}function Uf(e,n){var a=se();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Mc(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Hf(e,n){var a=se();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Mc(n,l[1]))return l[0];if(l=e(),es){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[l,n],l}function Uc(e,n,a){return a===void 0||(Gi&1073741824)!==0&&(Et&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=jp(),bt.lanes|=e,wn|=e,a)}function jf(e,n,a,l){return Xe(a,n)?a:Fs.current!==null?(e=Uc(e,a,l),Xe(e,n)||(le=!0),e):(Gi&42)===0||(Gi&1073741824)!==0&&(Et&261930)===0?(le=!0,e.memoizedState=a):(e=jp(),bt.lanes|=e,wn|=e,n)}function Gf(e,n,a,l,p){var m=q.p;q.p=m!==0&&8>m?m:8;var v=k.T,E={};k.T=E,Gc(e,!1,n,a);try{var M=p(),I=k.S;if(I!==null&&I(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var V=Zb(M,l);Ua(e,n,V,Ze(e))}else Ua(e,n,l,Ze(e))}catch(Y){Ua(e,n,{then:function(){},status:"rejected",reason:Y},Ze())}finally{q.p=m,v!==null&&E.types!==null&&(v.types=E.types),k.T=v}}function sv(){}function Hc(e,n,a,l){if(e.tag!==5)throw Error(s(476));var p=qf(e).queue;Gf(e,p,n,Z,a===null?sv:function(){return Vf(e),a(l)})}function qf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:Z},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Vf(e){var n=qf(e);n.next===null&&(n=e.alternate.memoizedState),Ua(e,n.next.queue,{},Ze())}function jc(){return Se(nr)}function Xf(){return se().memoizedState}function Yf(){return se().memoizedState}function av(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ze();e=yn(a);var l=bn(n,e,a);l!==null&&(Ie(l,n,a),Ba(l,n,a)),n={cache:yc()},e.payload=n;return}n=n.return}}function rv(e,n,a){var l=Ze();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vo(e)?Kf(n,a):(a=rc(e,n,a,l),a!==null&&(Ie(a,e,l),Wf(a,n,l)))}function $f(e,n,a){var l=Ze();Ua(e,n,a,l)}function Ua(e,n,a,l){var p={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vo(e))Kf(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,E=m(v,a);if(p.hasEagerState=!0,p.eagerState=E,Xe(E,v))return Zr(e,n,p,0),Gt===null&&Qr(),!1}catch{}finally{}if(a=rc(e,n,p,l),a!==null)return Ie(a,e,l),Wf(a,n,l),!0}return!1}function Gc(e,n,a,l){if(l={lane:2,revertLane:Su(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vo(e)){if(n)throw Error(s(479))}else n=rc(e,a,l,2),n!==null&&Ie(n,e,2)}function vo(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function Kf(e,n){Is=ho=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Wf(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,td(e,a)}}var Ha={readContext:Se,use:go,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};Ha.useEffectEvent=Jt;var Qf={readContext:Se,use:go,useCallback:function(e,n){return Me().memoizedState=[e,n===void 0?null:n],e},useContext:Se,useEffect:kf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,yo(4194308,4,Ff.bind(null,n,e),a)},useLayoutEffect:function(e,n){return yo(4194308,4,e,n)},useInsertionEffect:function(e,n){yo(4,2,e,n)},useMemo:function(e,n){var a=Me();n=n===void 0?null:n;var l=e();if(es){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Me();if(a!==void 0){var p=a(n);if(es){cn(!0);try{a(n)}finally{cn(!1)}}}else p=n;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=rv.bind(null,bt,e),[l.memoizedState,e]},useRef:function(e){var n=Me();return e={current:e},n.memoizedState=e},useState:function(e){e=Pc(e);var n=e.queue,a=$f.bind(null,bt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Ic,useDeferredValue:function(e,n){var a=Me();return Uc(a,e,n)},useTransition:function(){var e=Pc(!1);return e=Gf.bind(null,bt,e.queue,!0,!1),Me().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=bt,p=Me();if(Tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Gt===null)throw Error(s(349));(Et&127)!==0||bf(l,n,a)}p.memoizedState=a;var m={value:a,getSnapshot:n};return p.queue=m,kf(Af.bind(null,l,m,e),[e]),l.flags|=2048,Hs(9,{destroy:void 0},vf.bind(null,l,m,a,n),null),a},useId:function(){var e=Me(),n=Gt.identifierPrefix;if(Tt){var a=Ci,l=Ei;a=(l&~(1<<32-Ve(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=fo++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Jb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:jc,useFormState:Rf,useActionState:Rf,useOptimistic:function(e){var n=Me();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gc.bind(null,bt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Nc,useCacheRefresh:function(){return Me().memoizedState=av.bind(null,bt)},useEffectEvent:function(e){var n=Me(),a={impl:e};return n.memoizedState=a,function(){if((Nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},qc={readContext:Se,use:go,useCallback:Uf,useContext:Se,useEffect:Fc,useImperativeHandle:If,useInsertionEffect:Pf,useLayoutEffect:zf,useMemo:Hf,useReducer:mo,useRef:Nf,useState:function(){return mo(qi)},useDebugValue:Ic,useDeferredValue:function(e,n){var a=se();return jf(a,Ft.memoizedState,e,n)},useTransition:function(){var e=mo(qi)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Ia(e),n]},useSyncExternalStore:yf,useId:Xf,useHostTransitionStatus:jc,useFormState:Df,useActionState:Df,useOptimistic:function(e,n){var a=se();return wf(a,Ft,e,n)},useMemoCache:Nc,useCacheRefresh:Yf};qc.useEffectEvent=Bf;var Zf={readContext:Se,use:go,useCallback:Uf,useContext:Se,useEffect:Fc,useImperativeHandle:If,useInsertionEffect:Pf,useLayoutEffect:zf,useMemo:Hf,useReducer:Bc,useRef:Nf,useState:function(){return Bc(qi)},useDebugValue:Ic,useDeferredValue:function(e,n){var a=se();return Ft===null?Uc(a,e,n):jf(a,Ft.memoizedState,e,n)},useTransition:function(){var e=Bc(qi)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Ia(e),n]},useSyncExternalStore:yf,useId:Xf,useHostTransitionStatus:jc,useFormState:Of,useActionState:Of,useOptimistic:function(e,n){var a=se();return Ft!==null?wf(a,Ft,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Nc,useCacheRefresh:Yf};Zf.useEffectEvent=Bf;function Vc(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xc={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Ze(),p=yn(l);p.payload=n,a!=null&&(p.callback=a),n=bn(e,p,l),n!==null&&(Ie(n,e,l),Ba(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Ze(),p=yn(l);p.tag=1,p.payload=n,a!=null&&(p.callback=a),n=bn(e,p,l),n!==null&&(Ie(n,e,l),Ba(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Ze(),l=yn(a);l.tag=2,n!=null&&(l.callback=n),n=bn(e,l,a),n!==null&&(Ie(n,e,a),Ba(n,e,a))}};function Jf(e,n,a,l,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!xa(a,l)||!xa(p,m):!0}function tp(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Xc.enqueueReplaceState(n,n.state,null)}function is(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function ep(e){Wr(e)}function ip(e){console.error(e)}function np(e){Wr(e)}function Ao(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function sp(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Yc(e,n,a){return a=yn(a),a.tag=3,a.payload={element:null},a.callback=function(){Ao(e,n)},a}function ap(e){return e=yn(e),e.tag=3,e}function rp(e,n,a,l){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){sp(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){sp(n,a,l),typeof p!="function"&&(En===null?En=new Set([this]):En.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function ov(e,n,a,l,p){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ns(n,a,p,!0),a=$e.current,a!==null){switch(a.tag){case 31:case 13:return ci===null?Oo():a.alternate===null&&te===0&&(te=3),a.flags&=-257,a.flags|=65536,a.lanes=p,l===ro?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),bu(e,l,p)),!1;case 22:return a.flags|=65536,l===ro?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),bu(e,l,p)),!1}throw Error(s(435,a.tag))}return bu(e,l,p),Oo(),!1}if(Tt)return n=$e.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,l!==dc&&(e=Error(s(422),{cause:l}),Da(ai(e,a)))):(l!==dc&&(n=Error(s(423),{cause:l}),Da(ai(n,a))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=ai(l,a),p=Yc(e.stateNode,l,p),wc(e,p),te!==4&&(te=2)),!1;var m=Error(s(520),{cause:l});if(m=ai(m,a),Ka===null?Ka=[m]:Ka.push(m),te!==4&&(te=2),n===null)return!0;l=ai(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Yc(a.stateNode,l,e),wc(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(En===null||!En.has(m))))return a.flags|=65536,p&=-p,a.lanes|=p,p=ap(p),rp(p,e,a,l),wc(a,p),!1}a=a.return}while(a!==null);return!1}var $c=Error(s(461)),le=!1;function _e(e,n,a,l){n.child=e===null?uf(n,null,a,l):ts(n,e.child,a,l)}function op(e,n,a,l,p){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Wn(n),l=Rc(e,n,a,v,m,p),E=Dc(),e!==null&&!le?(Lc(e,n,p),Vi(e,n,p)):(Tt&&E&&uc(n),n.flags|=1,_e(e,n,l,p),n.child)}function lp(e,n,a,l,p){if(e===null){var m=a.type;return typeof m=="function"&&!oc(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,cp(e,n,m,l,p)):(e=to(a.type,null,l,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!iu(e,p)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(v,l)&&e.ref===n.ref)return Vi(e,n,p)}return n.flags|=1,e=Ii(m,l),e.ref=n.ref,e.return=n,n.child=e}function cp(e,n,a,l,p){if(e!==null){var m=e.memoizedProps;if(xa(m,l)&&e.ref===n.ref)if(le=!1,n.pendingProps=l=m,iu(e,p))(e.flags&131072)!==0&&(le=!0);else return n.lanes=e.lanes,Vi(e,n,p)}return Kc(e,n,a,l,p)}function up(e,n,a,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(l=n.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,n.child=null;return hp(e,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&so(n,m!==null?m.cachePool:null),m!==null?ff(n,m):Cc(),pf(n);else return l=n.lanes=536870912,hp(e,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(so(n,m.cachePool),ff(n,m),An(),n.memoizedState=null):(e!==null&&so(n,null),Cc(),An());return _e(e,n,p,a),n.child}function ja(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function hp(e,n,a,l,p){var m=vc();return m=m===null?null:{parent:re._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&so(n,null),Cc(),pf(n),e!==null&&Ns(e,n,l,!0),n.childLanes=p,null}function So(e,n){return n=wo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function dp(e,n,a){return ts(n,e.child,null,a),e=So(n,n.pendingProps),e.flags|=2,Ke(n),n.memoizedState=null,e}function lv(e,n,a){var l=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Tt){if(l.mode==="hidden")return e=So(n,l),n.lanes=536870912,ja(null,e);if(xc(n),(e=Vt)?(e=Eg(e,li),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:dn!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=$d(e),a.return=n,n.child=a,Ae=n,Vt=null)):e=null,e===null)throw pn(n);return n.lanes=536870912,null}return So(n,l)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(xc(n),p)if(n.flags&256)n.flags&=-257,n=dp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(le||Ns(e,n,a,!1),p=(a&e.childLanes)!==0,le||p){if(l=Gt,l!==null&&(v=ed(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,Xn(e,v),Ie(l,e,v),$c;Oo(),n=dp(e,n,a)}else e=m.treeContext,Vt=ui(v.nextSibling),Ae=n,Tt=!0,fn=null,li=!1,e!==null&&Qd(n,e),n=So(n,l),n.flags|=4096;return n}return e=Ii(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function _o(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Kc(e,n,a,l,p){return Wn(n),a=Rc(e,n,a,l,void 0,p),l=Dc(),e!==null&&!le?(Lc(e,n,p),Vi(e,n,p)):(Tt&&l&&uc(n),n.flags|=1,_e(e,n,a,p),n.child)}function fp(e,n,a,l,p,m){return Wn(n),n.updateQueue=null,a=mf(n,l,a,p),gf(e),l=Dc(),e!==null&&!le?(Lc(e,n,m),Vi(e,n,m)):(Tt&&l&&uc(n),n.flags|=1,_e(e,n,a,m),n.child)}function pp(e,n,a,l,p){if(Wn(n),n.stateNode===null){var m=Rs,v=a.contextType;typeof v=="object"&&v!==null&&(m=Se(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Sc(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?Se(v):Rs,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Vc(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Xc.enqueueReplaceState(m,m.state,null),za(n,l,m,p),Pa(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var E=n.memoizedProps,M=is(a,E);m.props=M;var I=m.context,V=a.contextType;v=Rs,typeof V=="object"&&V!==null&&(v=Se(V));var Y=a.getDerivedStateFromProps;V=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,V||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||I!==v)&&tp(n,m,l,v),mn=!1;var U=n.memoizedState;m.state=U,za(n,l,m,p),Pa(),I=n.memoizedState,E||U!==I||mn?(typeof Y=="function"&&(Vc(n,a,Y,l),I=n.memoizedState),(M=mn||Jf(n,a,M,l,U,I,v))?(V||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=I),m.props=l,m.state=I,m.context=v,l=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,_c(e,n),v=n.memoizedProps,V=is(a,v),m.props=V,Y=n.pendingProps,U=m.context,I=a.contextType,M=Rs,typeof I=="object"&&I!==null&&(M=Se(I)),E=a.getDerivedStateFromProps,(I=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==Y||U!==M)&&tp(n,m,l,M),mn=!1,U=n.memoizedState,m.state=U,za(n,l,m,p),Pa();var H=n.memoizedState;v!==Y||U!==H||mn||e!==null&&e.dependencies!==null&&io(e.dependencies)?(typeof E=="function"&&(Vc(n,a,E,l),H=n.memoizedState),(V=mn||Jf(n,a,V,l,U,H,M)||e!==null&&e.dependencies!==null&&io(e.dependencies))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,H,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,H,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=H),m.props=l,m.state=H,m.context=M,l=V):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,_o(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=ts(n,e.child,null,p),n.child=ts(n,null,a,p)):_e(e,n,a,p),n.memoizedState=m.state,e=n.child):e=Vi(e,n,p),e}function gp(e,n,a,l){return $n(),n.flags|=256,_e(e,n,a,l),n.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qc(e){return{baseLanes:e,cachePool:sf()}}function Zc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Qe),e}function mp(e,n,a){var l=n.pendingProps,p=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(ne.current&2)!==0),v&&(p=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Tt){if(p?vn(n):An(),(e=Vt)?(e=Eg(e,li),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:dn!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=$d(e),a.return=n,n.child=a,Ae=n,Vt=null)):e=null,e===null)throw pn(n);return ku(e)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,p?(An(),p=n.mode,E=wo({mode:"hidden",children:E},p),l=Yn(l,p,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Qc(a),l.childLanes=Zc(e,v,a),n.memoizedState=Wc,ja(null,l)):(vn(n),Jc(n,E))}var M=e.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)n.flags&256?(vn(n),n.flags&=-257,n=tu(e,n,a)):n.memoizedState!==null?(An(),n.child=e.child,n.flags|=128,n=null):(An(),E=l.fallback,p=n.mode,l=wo({mode:"visible",children:l.children},p),E=Yn(E,p,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,ts(n,e.child,null,a),l=n.child,l.memoizedState=Qc(a),l.childLanes=Zc(e,v,a),n.memoizedState=Wc,n=ja(null,l));else if(vn(n),ku(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var I=v.dgst;v=I,l=Error(s(419)),l.stack="",l.digest=v,Da({value:l,source:null,stack:null}),n=tu(e,n,a)}else if(le||Ns(e,n,a,!1),v=(a&e.childLanes)!==0,le||v){if(v=Gt,v!==null&&(l=ed(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Xn(e,l),Ie(v,e,l),$c;Nu(E)||Oo(),n=tu(e,n,a)}else Nu(E)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Vt=ui(E.nextSibling),Ae=n,Tt=!0,fn=null,li=!1,e!==null&&Qd(n,e),n=Jc(n,l.children),n.flags|=4096);return n}return p?(An(),E=l.fallback,p=n.mode,M=e.child,I=M.sibling,l=Ii(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,I!==null?E=Ii(I,E):(E=Yn(E,p,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,ja(null,l),l=n.child,E=e.child.memoizedState,E===null?E=Qc(a):(p=E.cachePool,p!==null?(M=re._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=sf(),E={baseLanes:E.baseLanes|a,cachePool:p}),l.memoizedState=E,l.childLanes=Zc(e,v,a),n.memoizedState=Wc,ja(e.child,l)):(vn(n),a=e.child,e=a.sibling,a=Ii(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Jc(e,n){return n=wo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function wo(e,n){return e=Ye(22,e,null,n),e.lanes=0,e}function tu(e,n,a){return ts(n,e.child,null,a),e=Jc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function yp(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),gc(e.return,n,a)}function eu(e,n,a,l,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:p,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=p,v.treeForkCount=m)}function bp(e,n,a){var l=n.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var v=ne.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,W(ne,v),_e(e,n,l,a),l=Tt?Ra:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yp(e,a,n);else if(e.tag===19)yp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(a=n.child,p=null;a!==null;)e=a.alternate,e!==null&&uo(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=n.child,n.child=null):(p=a.sibling,a.sibling=null),eu(n,!1,p,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&uo(e)===null){n.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}eu(n,!0,a,null,m,l);break;case"together":eu(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Vi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),wn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ns(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ii(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ii(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function iu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&io(e)))}function cv(e,n,a){switch(n.tag){case 3:ie(n,n.stateNode.containerInfo),gn(n,re,e.memoizedState.cache),$n();break;case 27:case 5:In(n);break;case 4:ie(n,n.stateNode.containerInfo);break;case 10:gn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,xc(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(vn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?mp(e,n,a):(vn(n),e=Vi(e,n,a),e!==null?e.sibling:null);vn(n);break;case 19:var p=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ns(e,n,a,!1),l=(a&n.childLanes)!==0),p){if(l)return bp(e,n,a);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(ne,ne.current),l)break;return null;case 22:return n.lanes=0,up(e,n,a,n.pendingProps);case 24:gn(n,re,e.memoizedState.cache)}return Vi(e,n,a)}function vp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)le=!0;else{if(!iu(e,a)&&(n.flags&128)===0)return le=!1,cv(e,n,a);le=(e.flags&131072)!==0}else le=!1,Tt&&(n.flags&1048576)!==0&&Wd(n,Ra,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Zn(n.elementType),n.type=e,typeof e=="function")oc(e)?(l=is(e,l),n.tag=1,n=pp(null,n,e,l,a)):(n.tag=0,n=Kc(null,n,e,l,a));else{if(e!=null){var p=e.$$typeof;if(p===O){n.tag=11,n=op(null,n,e,l,a);break t}else if(p===P){n.tag=14,n=lp(null,n,e,l,a);break t}}throw n=dt(e)||e,Error(s(306,n,""))}}return n;case 0:return Kc(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,p=is(l,n.pendingProps),pp(e,n,l,p,a);case 3:t:{if(ie(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var m=n.memoizedState;p=m.element,_c(e,n),za(n,l,null,a);var v=n.memoizedState;if(l=v.cache,gn(n,re,l),l!==m.cache&&mc(n,[re],a,!0),Pa(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=gp(e,n,l,a);break t}else if(l!==p){p=ai(Error(s(424)),n),Da(p),n=gp(e,n,l,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Vt=ui(e.firstChild),Ae=n,Tt=!0,fn=null,li=!0,a=uf(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($n(),l===p){n=Vi(e,n,a);break t}_e(e,n,l,a)}n=n.child}return n;case 26:return _o(e,n),e===null?(a=Dg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Tt||(a=n.type,e=n.pendingProps,l=Io(ut.current).createElement(a),l[ve]=n,l[Ne]=e,we(l,a,e),ge(l),n.stateNode=l):n.memoizedState=Dg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return In(n),e===null&&Tt&&(l=n.stateNode=xg(n.type,n.pendingProps,ut.current),Ae=n,li=!0,p=Vt,Mn(n.type)?(Bu=p,Vt=ui(l.firstChild)):Vt=p),_e(e,n,n.pendingProps.children,a),_o(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Tt&&((p=l=Vt)&&(l=Iv(l,n.type,n.pendingProps,li),l!==null?(n.stateNode=l,Ae=n,Vt=ui(l.firstChild),li=!1,p=!0):p=!1),p||pn(n)),In(n),p=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,l=m.children,Du(p,m)?l=null:v!==null&&Du(p,v)&&(n.flags|=32),n.memoizedState!==null&&(p=Rc(e,n,tv,null,null,a),nr._currentValue=p),_o(e,n),_e(e,n,l,a),n.child;case 6:return e===null&&Tt&&((e=a=Vt)&&(a=Uv(a,n.pendingProps,li),a!==null?(n.stateNode=a,Ae=n,Vt=null,e=!0):e=!1),e||pn(n)),null;case 13:return mp(e,n,a);case 4:return ie(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=ts(n,null,l,a):_e(e,n,l,a),n.child;case 11:return op(e,n,n.type,n.pendingProps,a);case 7:return _e(e,n,n.pendingProps,a),n.child;case 8:return _e(e,n,n.pendingProps.children,a),n.child;case 12:return _e(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,gn(n,n.type,l.value),_e(e,n,l.children,a),n.child;case 9:return p=n.type._context,l=n.pendingProps.children,Wn(n),p=Se(p),l=l(p),n.flags|=1,_e(e,n,l,a),n.child;case 14:return lp(e,n,n.type,n.pendingProps,a);case 15:return cp(e,n,n.type,n.pendingProps,a);case 19:return bp(e,n,a);case 31:return lv(e,n,a);case 22:return up(e,n,a,n.pendingProps);case 24:return Wn(n),l=Se(re),e===null?(p=vc(),p===null&&(p=Gt,m=yc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=a),p=m),n.memoizedState={parent:l,cache:p},Sc(n),gn(n,re,p)):((e.lanes&a)!==0&&(_c(e,n),za(n,null,null,a),Pa()),p=e.memoizedState,m=n.memoizedState,p.parent!==l?(p={parent:l,cache:l},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),gn(n,re,l)):(l=m.cache,gn(n,re,l),l!==p.cache&&mc(n,[re],a,!0))),_e(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Xi(e){e.flags|=4}function nu(e,n,a,l,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(Xp())e.flags|=8192;else throw Jn=ro,Ac}else e.flags&=-16777217}function Ap(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bg(n))if(Xp())e.flags|=8192;else throw Jn=ro,Ac}function Eo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Zh():536870912,e.lanes|=n,Vs|=n)}function Ga(e,n){if(!Tt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var p=e.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function uv(e,n,a){var l=n.pendingProps;switch(hc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(n),null;case 1:return Xt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ji(re),jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Os(n)?Xi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fc())),Xt(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(Xi(n),m!==null?(Xt(n),Ap(n,m)):(Xt(n),nu(n,p,null,l,a))):m?m!==e.memoizedState?(Xi(n),Xt(n),Ap(n,m)):(Xt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Xi(n),Xt(n),nu(n,p,e,l,a)),null;case 27:if(ln(n),a=ut.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Xi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Xt(n),null}e=tt.current,Os(n)?Zd(n):(e=xg(p,l,a),n.stateNode=e,Xi(n))}return Xt(n),null;case 5:if(ln(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Xi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Xt(n),null}if(m=tt.current,Os(n))Zd(n);else{var v=Io(ut.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(p,{is:l.is}):v.createElement(p)}}m[ve]=n,m[Ne]=l;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(we(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Xi(n)}}return Xt(n),nu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Xi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ut.current,Os(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,p=Ae,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[ve]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||mg(e.nodeValue,a)),e||pn(n,!0)}else e=Io(e).createTextNode(l),e[ve]=n,n.stateNode=e}return Xt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Os(n),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ve]=n}else $n(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),e=!1}else a=fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ke(n),n):(Ke(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Xt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Os(n),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ve]=n}else $n(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),p=!1}else p=fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Ke(n),n):(Ke(n),null)}return Ke(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Eo(n,n.updateQueue),Xt(n),null);case 4:return jt(),e===null&&Cu(n.stateNode.containerInfo),Xt(n),null;case 10:return ji(n.type),Xt(n),null;case 19:if(j(ne),l=n.memoizedState,l===null)return Xt(n),null;if(p=(n.flags&128)!==0,m=l.rendering,m===null)if(p)Ga(l,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=uo(e),m!==null){for(n.flags|=128,Ga(l,!1),e=m.updateQueue,n.updateQueue=e,Eo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Yd(a,e),a=a.sibling;return W(ne,ne.current&1|2),Tt&&Ui(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Ge()>Ro&&(n.flags|=128,p=!0,Ga(l,!1),n.lanes=4194304)}else{if(!p)if(e=uo(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,Eo(n,e),Ga(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Tt)return Xt(n),null}else 2*Ge()-l.renderingStartTime>Ro&&a!==536870912&&(n.flags|=128,p=!0,Ga(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(e=l.last,e!==null?e.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ge(),e.sibling=null,a=ne.current,W(ne,p?a&1|2:a&1),Tt&&Ui(n,l.treeForkCount),e):(Xt(n),null);case 22:case 23:return Ke(n),Tc(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Xt(n),n.subtreeFlags&6&&(n.flags|=8192)):Xt(n),a=n.updateQueue,a!==null&&Eo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&j(Qn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ji(re),Xt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function hv(e,n){switch(hc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ji(re),jt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ln(n),null;case 31:if(n.memoizedState!==null){if(Ke(n),n.alternate===null)throw Error(s(340));$n()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ke(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));$n()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return j(ne),null;case 4:return jt(),null;case 10:return ji(n.type),null;case 22:case 23:return Ke(n),Tc(),e!==null&&j(Qn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ji(re),null;case 25:return null;default:return null}}function Sp(e,n){switch(hc(n),n.tag){case 3:ji(re),jt();break;case 26:case 27:case 5:ln(n);break;case 4:jt();break;case 31:n.memoizedState!==null&&Ke(n);break;case 13:Ke(n);break;case 19:j(ne);break;case 10:ji(n.type);break;case 22:case 23:Ke(n),Tc(),e!==null&&j(Qn);break;case 24:ji(re)}}function qa(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var p=l.next;a=p;do{if((a.tag&e)===e){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==p)}}catch(E){zt(n,n.return,E)}}function Sn(e,n,a){try{var l=n.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,p=n;var M=a,I=E;try{I()}catch(V){zt(p,M,V)}}}l=l.next}while(l!==m)}}catch(V){zt(n,n.return,V)}}function _p(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{df(n,a)}catch(l){zt(e,e.return,l)}}}function wp(e,n,a){a.props=is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){zt(e,n,l)}}function Va(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(p){zt(e,n,p)}}function Ti(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(p){zt(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){zt(e,n,p)}else a.current=null}function Ep(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(p){zt(e,e.return,p)}}function su(e,n,a){try{var l=e.stateNode;Nv(l,e.type,a,n),l[Ne]=n}catch(p){zt(e,e.return,p)}}function Cp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mn(e.type)||e.tag===4}function au(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=zi));else if(l!==4&&(l===27&&Mn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ru(e,n,a),e=e.sibling;e!==null;)ru(e,n,a),e=e.sibling}function Co(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&Mn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Co(e,n,a),e=e.sibling;e!==null;)Co(e,n,a),e=e.sibling}function Tp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);we(n,l,a),n[ve]=e,n[Ne]=a}catch(m){zt(e,e.return,m)}}var Yi=!1,ce=!1,ou=!1,xp=typeof WeakSet=="function"?WeakSet:Set,me=null;function dv(e,n){if(e=e.containerInfo,Mu=Xo,e=Fd(e),tc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,E=-1,M=-1,I=0,V=0,Y=e,U=null;e:for(;;){for(var H;Y!==a||p!==0&&Y.nodeType!==3||(E=v+p),Y!==m||l!==0&&Y.nodeType!==3||(M=v+l),Y.nodeType===3&&(v+=Y.nodeValue.length),(H=Y.firstChild)!==null;)U=Y,Y=H;for(;;){if(Y===e)break e;if(U===a&&++I===p&&(E=v),U===m&&++V===l&&(M=v),(H=Y.nextSibling)!==null)break;Y=U,U=Y.parentNode}Y=H}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:e,selectionRange:a},Xo=!1,me=n;me!==null;)if(n=me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,me=e;else for(;me!==null;){switch(n=me,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)p=e[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,p=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var nt=is(a.type,p);e=l.getSnapshotBeforeUpdate(nt,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(ct){zt(a,a.return,ct)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ou(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,me=e;break}me=n.return}}function Mp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(e,a),l&4&&qa(5,a);break;case 1:if(Ki(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){zt(a,a.return,v)}else{var p=is(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){zt(a,a.return,v)}}l&64&&_p(a),l&512&&Va(a,a.return);break;case 3:if(Ki(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{df(e,n)}catch(v){zt(a,a.return,v)}}break;case 27:n===null&&l&4&&Tp(a);case 26:case 5:Ki(e,a),n===null&&l&4&&Ep(a),l&512&&Va(a,a.return);break;case 12:Ki(e,a);break;case 31:Ki(e,a),l&4&&Lp(e,a);break;case 13:Ki(e,a),l&4&&Op(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Sv.bind(null,a),Hv(e,a))));break;case 22:if(l=a.memoizedState!==null||Yi,!l){n=n!==null&&n.memoizedState!==null||ce,p=Yi;var m=ce;Yi=l,(ce=n)&&!m?Wi(e,a,(a.subtreeFlags&8772)!==0):Ki(e,a),Yi=p,ce=m}break;case 30:break;default:Ki(e,a)}}function Rp(e){var n=e.alternate;n!==null&&(e.alternate=null,Rp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&zl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Yt=null,Be=!1;function $i(e,n,a){for(a=a.child;a!==null;)Dp(e,n,a),a=a.sibling}function Dp(e,n,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(ga,a)}catch{}switch(a.tag){case 26:ce||Ti(a,n),$i(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ce||Ti(a,n);var l=Yt,p=Be;Mn(a.type)&&(Yt=a.stateNode,Be=!1),$i(e,n,a),tr(a.stateNode),Yt=l,Be=p;break;case 5:ce||Ti(a,n);case 6:if(l=Yt,p=Be,Yt=null,$i(e,n,a),Yt=l,Be=p,Yt!==null)if(Be)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(a.stateNode)}catch(m){zt(a,n,m)}else try{Yt.removeChild(a.stateNode)}catch(m){zt(a,n,m)}break;case 18:Yt!==null&&(Be?(e=Yt,_g(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Js(e)):_g(Yt,a.stateNode));break;case 4:l=Yt,p=Be,Yt=a.stateNode.containerInfo,Be=!0,$i(e,n,a),Yt=l,Be=p;break;case 0:case 11:case 14:case 15:Sn(2,a,n),ce||Sn(4,a,n),$i(e,n,a);break;case 1:ce||(Ti(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&wp(a,n,l)),$i(e,n,a);break;case 21:$i(e,n,a);break;case 22:ce=(l=ce)||a.memoizedState!==null,$i(e,n,a),ce=l;break;default:$i(e,n,a)}}function Lp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Js(e)}catch(a){zt(n,n.return,a)}}}function Op(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Js(e)}catch(a){zt(n,n.return,a)}}function fv(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new xp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new xp),n;default:throw Error(s(435,e.tag))}}function To(e,n){var a=fv(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var p=_v.bind(null,e,l);l.then(p,p)}})}function Pe(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var p=a[l],m=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Mn(E.type)){Yt=E.stateNode,Be=!1;break t}break;case 5:Yt=E.stateNode,Be=!1;break t;case 3:case 4:Yt=E.stateNode.containerInfo,Be=!0;break t}E=E.return}if(Yt===null)throw Error(s(160));Dp(m,v,p),Yt=null,Be=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Np(n,e),n=n.sibling}var Si=null;function Np(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pe(n,e),ze(e),l&4&&(Sn(3,e,e.return),qa(3,e),Sn(5,e,e.return));break;case 1:Pe(n,e),ze(e),l&512&&(ce||a===null||Ti(a,a.return)),l&64&&Yi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var p=Si;if(Pe(n,e),ze(e),l&512&&(ce||a===null||Ti(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,p=p.ownerDocument||p;e:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[ba]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),we(m,l,a),m[ve]=e,ge(m),l=m;break t;case"link":var v=Ng("link","href",p).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}m=p.createElement(l),we(m,l,a),p.head.appendChild(m);break;case"meta":if(v=Ng("meta","content",p).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}m=p.createElement(l),we(m,l,a),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[ve]=e,ge(m),l=m}e.stateNode=l}else kg(p,e.type,e.stateNode);else e.stateNode=Og(p,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?kg(p,e.type,e.stateNode):Og(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&su(e,e.memoizedProps,a.memoizedProps)}break;case 27:Pe(n,e),ze(e),l&512&&(ce||a===null||Ti(a,a.return)),a!==null&&l&4&&su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Pe(n,e),ze(e),l&512&&(ce||a===null||Ti(a,a.return)),e.flags&32){p=e.stateNode;try{_s(p,"")}catch(nt){zt(e,e.return,nt)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,su(e,p,a!==null?a.memoizedProps:p)),l&1024&&(ou=!0);break;case 6:if(Pe(n,e),ze(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(nt){zt(e,e.return,nt)}}break;case 3:if(jo=null,p=Si,Si=Uo(n.containerInfo),Pe(n,e),Si=p,ze(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Js(n.containerInfo)}catch(nt){zt(e,e.return,nt)}ou&&(ou=!1,kp(e));break;case 4:l=Si,Si=Uo(e.stateNode.containerInfo),Pe(n,e),ze(e),Si=l;break;case 12:Pe(n,e),ze(e);break;case 31:Pe(n,e),ze(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,To(e,l)));break;case 13:Pe(n,e),ze(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Mo=Ge()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,To(e,l)));break;case 22:p=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,I=Yi,V=ce;if(Yi=I||p,ce=V||M,Pe(n,e),ce=V,Yi=I,ze(e),l&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(a===null||M||Yi||ce||ns(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(m=M.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=M.stateNode;var Y=M.memoizedProps.style,U=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(nt){zt(M,M.return,nt)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(nt){zt(M,M.return,nt)}}}else if(n.tag===18){if(a===null){M=n;try{var H=M.stateNode;p?wg(H,!0):wg(M.stateNode,!1)}catch(nt){zt(M,M.return,nt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,To(e,a))));break;case 19:Pe(n,e),ze(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,To(e,l)));break;case 30:break;case 21:break;default:Pe(n,e),ze(e)}}function ze(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Cp(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,m=au(e);Co(e,m,p);break;case 5:var v=a.stateNode;a.flags&32&&(_s(v,""),a.flags&=-33);var E=au(e);Co(e,E,v);break;case 3:case 4:var M=a.stateNode.containerInfo,I=au(e);ru(e,I,M);break;default:throw Error(s(161))}}catch(V){zt(e,e.return,V)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function kp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;kp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ki(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Mp(e,n.alternate,n),n=n.sibling}function ns(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Sn(4,n,n.return),ns(n);break;case 1:Ti(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&wp(n,n.return,a),ns(n);break;case 27:tr(n.stateNode);case 26:case 5:Ti(n,n.return),ns(n);break;case 22:n.memoizedState===null&&ns(n);break;case 30:ns(n);break;default:ns(n)}e=e.sibling}}function Wi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,p=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Wi(p,m,a),qa(4,m);break;case 1:if(Wi(p,m,a),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(I){zt(l,l.return,I)}if(l=m,p=l.updateQueue,p!==null){var E=l.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)hf(M[p],E)}catch(I){zt(l,l.return,I)}}a&&v&64&&_p(m),Va(m,m.return);break;case 27:Tp(m);case 26:case 5:Wi(p,m,a),a&&l===null&&v&4&&Ep(m),Va(m,m.return);break;case 12:Wi(p,m,a);break;case 31:Wi(p,m,a),a&&v&4&&Lp(p,m);break;case 13:Wi(p,m,a),a&&v&4&&Op(p,m);break;case 22:m.memoizedState===null&&Wi(p,m,a),Va(m,m.return);break;case 30:break;default:Wi(p,m,a)}n=n.sibling}}function lu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&La(a))}function cu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&La(e))}function _i(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Bp(e,n,a,l),n=n.sibling}function Bp(e,n,a,l){var p=n.flags;switch(n.tag){case 0:case 11:case 15:_i(e,n,a,l),p&2048&&qa(9,n);break;case 1:_i(e,n,a,l);break;case 3:_i(e,n,a,l),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&La(e)));break;case 12:if(p&2048){_i(e,n,a,l),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){zt(n,n.return,M)}}else _i(e,n,a,l);break;case 31:_i(e,n,a,l);break;case 13:_i(e,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?_i(e,n,a,l):Xa(e,n):m._visibility&2?_i(e,n,a,l):(m._visibility|=2,js(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),p&2048&&lu(v,n);break;case 24:_i(e,n,a,l),p&2048&&cu(n.alternate,n);break;default:_i(e,n,a,l)}}function js(e,n,a,l,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,E=a,M=l,I=v.flags;switch(v.tag){case 0:case 11:case 15:js(m,v,E,M,p),qa(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?js(m,v,E,M,p):Xa(m,v):(V._visibility|=2,js(m,v,E,M,p)),p&&I&2048&&lu(v.alternate,v);break;case 24:js(m,v,E,M,p),p&&I&2048&&cu(v.alternate,v);break;default:js(m,v,E,M,p)}n=n.sibling}}function Xa(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,p=l.flags;switch(l.tag){case 22:Xa(a,l),p&2048&&lu(l.alternate,l);break;case 24:Xa(a,l),p&2048&&cu(l.alternate,l);break;default:Xa(a,l)}n=n.sibling}}var Ya=8192;function Gs(e,n,a){if(e.subtreeFlags&Ya)for(e=e.child;e!==null;)Pp(e,n,a),e=e.sibling}function Pp(e,n,a){switch(e.tag){case 26:Gs(e,n,a),e.flags&Ya&&e.memoizedState!==null&&Jv(a,Si,e.memoizedState,e.memoizedProps);break;case 5:Gs(e,n,a);break;case 3:case 4:var l=Si;Si=Uo(e.stateNode.containerInfo),Gs(e,n,a),Si=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ya,Ya=16777216,Gs(e,n,a),Ya=l):Gs(e,n,a));break;default:Gs(e,n,a)}}function zp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function $a(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];me=l,Ip(l,e)}zp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fp(e),e=e.sibling}function Fp(e){switch(e.tag){case 0:case 11:case 15:$a(e),e.flags&2048&&Sn(9,e,e.return);break;case 3:$a(e);break;case 12:$a(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,xo(e)):$a(e);break;default:$a(e)}}function xo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];me=l,Ip(l,e)}zp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Sn(8,n,n.return),xo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,xo(n));break;default:xo(n)}e=e.sibling}}function Ip(e,n){for(;me!==null;){var a=me;switch(a.tag){case 0:case 11:case 15:Sn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:La(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,me=l;else t:for(a=e;me!==null;){l=me;var p=l.sibling,m=l.return;if(Rp(l),l===a){me=null;break t}if(p!==null){p.return=m,me=p;break t}me=m}}}var pv={getCacheForType:function(e){var n=Se(re),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Se(re).controller.signal}},gv=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Gt=null,_t=null,Et=0,Pt=0,We=null,_n=!1,qs=!1,uu=!1,Qi=0,te=0,wn=0,ss=0,hu=0,Qe=0,Vs=0,Ka=null,Fe=null,du=!1,Mo=0,Up=0,Ro=1/0,Do=null,En=null,de=0,Cn=null,Xs=null,Zi=0,fu=0,pu=null,Hp=null,Wa=0,gu=null;function Ze(){return(Nt&2)!==0&&Et!==0?Et&-Et:k.T!==null?Su():id()}function jp(){if(Qe===0)if((Et&536870912)===0||Tt){var e=zr;zr<<=1,(zr&3932160)===0&&(zr=262144),Qe=e}else Qe=536870912;return e=$e.current,e!==null&&(e.flags|=32),Qe}function Ie(e,n,a){(e===Gt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),Tn(e,Et,Qe,!1)),ya(e,a),((Nt&2)===0||e!==Gt)&&(e===Gt&&((Nt&2)===0&&(ss|=a),te===4&&Tn(e,Et,Qe,!1)),xi(e))}function Gp(e,n,a){if((Nt&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ma(e,n),p=l?bv(e,n):yu(e,n,!0),m=l;do{if(p===0){qs&&!l&&Tn(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!mv(a)){p=yu(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;p=Ka;var M=E.current.memoizedState.isDehydrated;if(M&&(Ys(E,v).flags|=256),v=yu(E,v,!1),v!==2){if(uu&&!M){E.errorRecoveryDisabledLanes|=m,ss|=m,p=4;break t}m=Fe,Fe=p,m!==null&&(Fe===null?Fe=m:Fe.push.apply(Fe,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){Ys(e,0),Tn(e,n,0,!0);break}t:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Tn(l,n,Qe,!_n);break t;case 2:Fe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=Mo+300-Ge(),10<p)){if(Tn(l,n,Qe,!_n),Ir(l,0,!0)!==0)break t;Zi=n,l.timeoutHandle=Ag(qp.bind(null,l,a,Fe,Do,du,n,Qe,ss,Vs,_n,m,"Throttled",-0,0),p);break t}qp(l,a,Fe,Do,du,n,Qe,ss,Vs,_n,m,null,-0,0)}}break}while(!0);xi(e)}function qp(e,n,a,l,p,m,v,E,M,I,V,Y,U,H){if(e.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zi},Pp(n,m,Y);var nt=(m&62914560)===m?Mo-Ge():(m&4194048)===m?Up-Ge():0;if(nt=t0(Y,nt),nt!==null){Zi=m,e.cancelPendingCommit=nt(Zp.bind(null,e,n,m,a,l,p,v,E,M,V,Y,null,U,H)),Tn(e,m,v,!I);return}}Zp(e,n,m,a,l,p,v,E,M)}function mv(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var p=a[l],m=p.getSnapshot;p=p.value;try{if(!Xe(m(),p))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Tn(e,n,a,l){n&=~hu,n&=~ss,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var p=n;0<p;){var m=31-Ve(p),v=1<<m;l[m]=-1,p&=~v}a!==0&&Jh(e,a,n)}function Lo(){return(Nt&6)===0?(Qa(0),!1):!0}function mu(){if(_t!==null){if(Pt===0)var e=_t.return;else e=_t,Hi=Kn=null,Oc(e),zs=null,Na=0,e=_t;for(;e!==null;)Sp(e.alternate,e),e=e.return;_t=null}}function Ys(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Pv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Zi=0,mu(),Gt=e,_t=a=Ii(e.current,null),Et=n,Pt=0,We=null,_n=!1,qs=ma(e,n),uu=!1,Vs=Qe=hu=ss=wn=te=0,Fe=Ka=null,du=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var p=31-Ve(l),m=1<<p;n|=e[p],l&=~m}return Qi=n,Qr(),a}function Vp(e,n){bt=null,k.H=Ha,n===Ps||n===ao?(n=of(),Pt=3):n===Ac?(n=of(),Pt=4):Pt=n===$c?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,We=n,_t===null&&(te=1,Ao(e,ai(n,e.current)))}function Xp(){var e=$e.current;return e===null?!0:(Et&4194048)===Et?ci===null:(Et&62914560)===Et||(Et&536870912)!==0?e===ci:!1}function Yp(){var e=k.H;return k.H=Ha,e===null?Ha:e}function $p(){var e=k.A;return k.A=pv,e}function Oo(){te=4,_n||(Et&4194048)!==Et&&$e.current!==null||(qs=!0),(wn&134217727)===0&&(ss&134217727)===0||Gt===null||Tn(Gt,Et,Qe,!1)}function yu(e,n,a){var l=Nt;Nt|=2;var p=Yp(),m=$p();(Gt!==e||Et!==n)&&(Do=null,Ys(e,n)),n=!1;var v=te;t:do try{if(Pt!==0&&_t!==null){var E=_t,M=We;switch(Pt){case 8:mu(),v=6;break t;case 3:case 2:case 9:case 6:$e.current===null&&(n=!0);var I=Pt;if(Pt=0,We=null,$s(e,E,M,I),a&&qs){v=0;break t}break;default:I=Pt,Pt=0,We=null,$s(e,E,M,I)}}yv(),v=te;break}catch(V){Vp(e,V)}while(!0);return n&&e.shellSuspendCounter++,Hi=Kn=null,Nt=l,k.H=p,k.A=m,_t===null&&(Gt=null,Et=0,Qr()),v}function yv(){for(;_t!==null;)Kp(_t)}function bv(e,n){var a=Nt;Nt|=2;var l=Yp(),p=$p();Gt!==e||Et!==n?(Do=null,Ro=Ge()+500,Ys(e,n)):qs=ma(e,n);t:do try{if(Pt!==0&&_t!==null){n=_t;var m=We;e:switch(Pt){case 1:Pt=0,We=null,$s(e,n,m,1);break;case 2:case 9:if(af(m)){Pt=0,We=null,Wp(n);break}n=function(){Pt!==2&&Pt!==9||Gt!==e||(Pt=7),xi(e)},m.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:af(m)?(Pt=0,We=null,Wp(n)):(Pt=0,We=null,$s(e,n,m,7));break;case 5:var v=null;switch(_t.tag){case 26:v=_t.memoizedState;case 5:case 27:var E=_t;if(v?Bg(v):E.stateNode.complete){Pt=0,We=null;var M=E.sibling;if(M!==null)_t=M;else{var I=E.return;I!==null?(_t=I,No(I)):_t=null}break e}}Pt=0,We=null,$s(e,n,m,5);break;case 6:Pt=0,We=null,$s(e,n,m,6);break;case 8:mu(),te=6;break t;default:throw Error(s(462))}}vv();break}catch(V){Vp(e,V)}while(!0);return Hi=Kn=null,k.H=l,k.A=p,Nt=a,_t!==null?0:(Gt=null,Et=0,Qr(),te)}function vv(){for(;_t!==null&&!jy();)Kp(_t)}function Kp(e){var n=vp(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?No(e):_t=n}function Wp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=fp(a,n,n.pendingProps,n.type,void 0,Et);break;case 11:n=fp(a,n,n.pendingProps,n.type.render,n.ref,Et);break;case 5:Oc(n);default:Sp(a,n),n=_t=Yd(n,Qi),n=vp(a,n,Qi)}e.memoizedProps=e.pendingProps,n===null?No(e):_t=n}function $s(e,n,a,l){Hi=Kn=null,Oc(n),zs=null,Na=0;var p=n.return;try{if(ov(e,p,n,a,Et)){te=1,Ao(e,ai(a,e.current)),_t=null;return}}catch(m){if(p!==null)throw _t=p,m;te=1,Ao(e,ai(a,e.current)),_t=null;return}n.flags&32768?(Tt||l===1?e=!0:qs||(Et&536870912)!==0?e=!1:(_n=e=!0,(l===2||l===9||l===3||l===6)&&(l=$e.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qp(n,e)):No(n)}function No(e){var n=e;do{if((n.flags&32768)!==0){Qp(n,_n);return}e=n.return;var a=uv(n.alternate,n,Qi);if(a!==null){_t=a;return}if(n=n.sibling,n!==null){_t=n;return}_t=n=e}while(n!==null);te===0&&(te=5)}function Qp(e,n){do{var a=hv(e.alternate,e);if(a!==null){a.flags&=32767,_t=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){_t=e;return}_t=e=a}while(e!==null);te=6,_t=null}function Zp(e,n,a,l,p,m,v,E,M){e.cancelPendingCommit=null;do ko();while(de!==0);if((Nt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=ac,Zy(e,a,m,v,E,M),e===Gt&&(_t=Gt=null,Et=0),Xs=n,Cn=e,Zi=a,fu=m,pu=p,Hp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wv(Br,function(){return ng(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,p=q.p,q.p=2,v=Nt,Nt|=4;try{dv(e,n,a)}finally{Nt=v,q.p=p,k.T=l}}de=1,Jp(),tg(),eg()}}function Jp(){if(de===1){de=0;var e=Cn,n=Xs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var l=q.p;q.p=2;var p=Nt;Nt|=4;try{Np(n,e);var m=Ru,v=Fd(e.containerInfo),E=m.focusedElem,M=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&zd(E.ownerDocument.documentElement,E)){if(M!==null&&tc(E)){var I=M.start,V=M.end;if(V===void 0&&(V=I),"selectionStart"in E)E.selectionStart=I,E.selectionEnd=Math.min(V,E.value.length);else{var Y=E.ownerDocument||document,U=Y&&Y.defaultView||window;if(U.getSelection){var H=U.getSelection(),nt=E.textContent.length,ct=Math.min(M.start,nt),Ut=M.end===void 0?ct:Math.min(M.end,nt);!H.extend&&ct>Ut&&(v=Ut,Ut=ct,ct=v);var B=Pd(E,ct),D=Pd(E,Ut);if(B&&D&&(H.rangeCount!==1||H.anchorNode!==B.node||H.anchorOffset!==B.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var F=Y.createRange();F.setStart(B.node,B.offset),H.removeAllRanges(),ct>Ut?(H.addRange(F),H.extend(D.node,D.offset)):(F.setEnd(D.node,D.offset),H.addRange(F))}}}}for(Y=[],H=E;H=H.parentNode;)H.nodeType===1&&Y.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var X=Y[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Xo=!!Mu,Ru=Mu=null}finally{Nt=p,q.p=l,k.T=a}}e.current=n,de=2}}function tg(){if(de===2){de=0;var e=Cn,n=Xs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var l=q.p;q.p=2;var p=Nt;Nt|=4;try{Mp(e,n.alternate,n)}finally{Nt=p,q.p=l,k.T=a}}de=3}}function eg(){if(de===4||de===3){de=0,Gy();var e=Cn,n=Xs,a=Zi,l=Hp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?de=5:(de=0,Xs=Cn=null,ig(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(En=null),Bl(a),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(ga,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=k.T,p=q.p,q.p=2,k.T=null;try{for(var m=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];m(E.value,{componentStack:E.stack})}}finally{k.T=n,q.p=p}}(Zi&3)!==0&&ko(),xi(e),p=e.pendingLanes,(a&261930)!==0&&(p&42)!==0?e===gu?Wa++:(Wa=0,gu=e):Wa=0,Qa(0)}}function ig(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,La(n)))}function ko(){return Jp(),tg(),eg(),ng()}function ng(){if(de!==5)return!1;var e=Cn,n=fu;fu=0;var a=Bl(Zi),l=k.T,p=q.p;try{q.p=32>a?32:a,k.T=null,a=pu,pu=null;var m=Cn,v=Zi;if(de=0,Xs=Cn=null,Zi=0,(Nt&6)!==0)throw Error(s(331));var E=Nt;if(Nt|=4,Fp(m.current),Bp(m,m.current,v,a),Nt=E,Qa(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(ga,m)}catch{}return!0}finally{q.p=p,k.T=l,ig(e,n)}}function sg(e,n,a){n=ai(a,n),n=Yc(e.stateNode,n,2),e=bn(e,n,2),e!==null&&(ya(e,2),xi(e))}function zt(e,n,a){if(e.tag===3)sg(e,e,a);else for(;n!==null;){if(n.tag===3){sg(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(En===null||!En.has(l))){e=ai(a,e),a=ap(2),l=bn(n,a,2),l!==null&&(rp(a,l,n,e),ya(l,2),xi(l));break}}n=n.return}}function bu(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new gv;var p=new Set;l.set(n,p)}else p=l.get(n),p===void 0&&(p=new Set,l.set(n,p));p.has(a)||(uu=!0,p.add(a),e=Av.bind(null,e,n,a),n.then(e,e))}function Av(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Gt===e&&(Et&a)===a&&(te===4||te===3&&(Et&62914560)===Et&&300>Ge()-Mo?(Nt&2)===0&&Ys(e,0):hu|=a,Vs===Et&&(Vs=0)),xi(e)}function ag(e,n){n===0&&(n=Zh()),e=Xn(e,n),e!==null&&(ya(e,n),xi(e))}function Sv(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),ag(e,a)}function _v(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),ag(e,a)}function wv(e,n){return Ll(e,n)}var Bo=null,Ks=null,vu=!1,Po=!1,Au=!1,xn=0;function xi(e){e!==Ks&&e.next===null&&(Ks===null?Bo=Ks=e:Ks=Ks.next=e),Po=!0,vu||(vu=!0,Cv())}function Qa(e,n){if(!Au&&Po){Au=!0;do for(var a=!1,l=Bo;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var v=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Ve(42|e)+1)-1,m&=p&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,cg(l,m))}else m=Et,m=Ir(l,l===Gt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ma(l,m)||(a=!0,cg(l,m));l=l.next}while(a);Au=!1}}function Ev(){rg()}function rg(){Po=vu=!1;var e=0;xn!==0&&Bv()&&(e=xn);for(var n=Ge(),a=null,l=Bo;l!==null;){var p=l.next,m=og(l,n);m===0?(l.next=null,a===null?Bo=p:a.next=p,p===null&&(Ks=a)):(a=l,(e!==0||(m&3)!==0)&&(Po=!0)),l=p}de!==0&&de!==5||Qa(e),xn!==0&&(xn=0)}function og(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ve(m),E=1<<v,M=p[v];M===-1?((E&a)===0||(E&l)!==0)&&(p[v]=Qy(E,n)):M<=n&&(e.expiredLanes|=E),m&=~E}if(n=Gt,a=Et,a=Ir(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ol(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ma(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Ol(l),Bl(a)){case 2:case 8:a=Wh;break;case 32:a=Br;break;case 268435456:a=Qh;break;default:a=Br}return l=lg.bind(null,e),a=Ll(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Ol(l),e.callbackPriority=2,e.callbackNode=null,2}function lg(e,n){if(de!==0&&de!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ko()&&e.callbackNode!==a)return null;var l=Et;return l=Ir(e,e===Gt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Gp(e,l,n),og(e,Ge()),e.callbackNode!=null&&e.callbackNode===a?lg.bind(null,e):null)}function cg(e,n){if(ko())return null;Gp(e,n,!0)}function Cv(){zv(function(){(Nt&6)!==0?Ll(Kh,Ev):rg()})}function Su(){if(xn===0){var e=ks;e===0&&(e=Pr,Pr<<=1,(Pr&261888)===0&&(Pr=256)),xn=e}return xn}function ug(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Gr(""+e)}function hg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Tv(e,n,a,l,p){if(n==="submit"&&a&&a.stateNode===p){var m=ug((p[Ne]||null).action),v=l.submitter;v&&(n=(n=v[Ne]||null)?ug(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var E=new Yr("action","action",null,l,p);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xn!==0){var M=v?hg(p,v):new FormData(p);Hc(a,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=v?hg(p,v):new FormData(p),Hc(a,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var _u=0;_u<sc.length;_u++){var wu=sc[_u],xv=wu.toLowerCase(),Mv=wu[0].toUpperCase()+wu.slice(1);Ai(xv,"on"+Mv)}Ai(Hd,"onAnimationEnd"),Ai(jd,"onAnimationIteration"),Ai(Gd,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(qb,"onTransitionRun"),Ai(Vb,"onTransitionStart"),Ai(Xb,"onTransitionCancel"),Ai(qd,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Za));function dg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],p=l.event;l=l.listeners;t:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],M=E.instance,I=E.currentTarget;if(E=E.listener,M!==m&&p.isPropagationStopped())break t;m=E,p.currentTarget=I;try{m(p)}catch(V){Wr(V)}p.currentTarget=null,m=M}else for(v=0;v<l.length;v++){if(E=l[v],M=E.instance,I=E.currentTarget,E=E.listener,M!==m&&p.isPropagationStopped())break t;m=E,p.currentTarget=I;try{m(p)}catch(V){Wr(V)}p.currentTarget=null,m=M}}}}function wt(e,n){var a=n[Pl];a===void 0&&(a=n[Pl]=new Set);var l=e+"__bubble";a.has(l)||(fg(n,e,2,!1),a.add(l))}function Eu(e,n,a){var l=0;n&&(l|=4),fg(a,e,l,n)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Cu(e){if(!e[zo]){e[zo]=!0,ad.forEach(function(a){a!=="selectionchange"&&(Rv.has(a)||Eu(a,!1,e),Eu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[zo]||(n[zo]=!0,Eu("selectionchange",!1,n))}}function fg(e,n,a,l){switch(jg(n)){case 2:var p=n0;break;case 8:p=s0;break;default:p=Uu}a=p.bind(null,n,a,e),p=void 0,!Vl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(n,a,{capture:!0,passive:p}):e.addEventListener(n,a,!0):p!==void 0?e.addEventListener(n,a,{passive:p}):e.addEventListener(n,a,!1)}function Tu(e,n,a,l,p){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===p)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;E!==null;){if(v=ys(E),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=m=v;continue t}E=E.parentNode}}l=l.return}yd(function(){var I=m,V=Gl(a),Y=[];t:{var U=Vd.get(e);if(U!==void 0){var H=Yr,nt=e;switch(e){case"keypress":if(Vr(a)===0)break t;case"keydown":case"keyup":H=_b;break;case"focusin":nt="focus",H=Kl;break;case"focusout":nt="blur",H=Kl;break;case"beforeblur":case"afterblur":H=Kl;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Cb;break;case Hd:case jd:case Gd:H=fb;break;case qd:H=xb;break;case"scroll":case"scrollend":H=lb;break;case"wheel":H=Rb;break;case"copy":case"cut":case"paste":H=gb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=_d;break;case"toggle":case"beforetoggle":H=Lb}var ct=(n&4)!==0,Ut=!ct&&(e==="scroll"||e==="scrollend"),B=ct?U!==null?U+"Capture":null:U;ct=[];for(var D=I,F;D!==null;){var X=D;if(F=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||F===null||B===null||(X=Aa(D,B),X!=null&&ct.push(Ja(D,X,F))),Ut)break;D=D.return}0<ct.length&&(U=new H(U,nt,null,a,V),Y.push({event:U,listeners:ct}))}}if((n&7)===0){t:{if(U=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",U&&a!==jl&&(nt=a.relatedTarget||a.fromElement)&&(ys(nt)||nt[ms]))break t;if((H||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,H?(nt=a.relatedTarget||a.toElement,H=I,nt=nt?ys(nt):null,nt!==null&&(Ut=o(nt),ct=nt.tag,nt!==Ut||ct!==5&&ct!==27&&ct!==6)&&(nt=null)):(H=null,nt=I),H!==nt)){if(ct=Ad,X="onMouseLeave",B="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ct=_d,X="onPointerLeave",B="onPointerEnter",D="pointer"),Ut=H==null?U:va(H),F=nt==null?U:va(nt),U=new ct(X,D+"leave",H,a,V),U.target=Ut,U.relatedTarget=F,X=null,ys(V)===I&&(ct=new ct(B,D+"enter",nt,a,V),ct.target=F,ct.relatedTarget=Ut,X=ct),Ut=X,H&&nt)e:{for(ct=Dv,B=H,D=nt,F=0,X=B;X;X=ct(X))F++;X=0;for(var at=D;at;at=ct(at))X++;for(;0<F-X;)B=ct(B),F--;for(;0<X-F;)D=ct(D),X--;for(;F--;){if(B===D||D!==null&&B===D.alternate){ct=B;break e}B=ct(B),D=ct(D)}ct=null}else ct=null;H!==null&&pg(Y,U,H,ct,!1),nt!==null&&Ut!==null&&pg(Y,Ut,nt,ct,!0)}}t:{if(U=I?va(I):window,H=U.nodeName&&U.nodeName.toLowerCase(),H==="select"||H==="input"&&U.type==="file")var Lt=Dd;else if(Md(U))if(Ld)Lt=Hb;else{Lt=Ib;var st=Fb}else H=U.nodeName,!H||H.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?I&&Hl(I.elementType)&&(Lt=Dd):Lt=Ub;if(Lt&&(Lt=Lt(e,I))){Rd(Y,Lt,a,V);break t}st&&st(e,U,I),e==="focusout"&&I&&U.type==="number"&&I.memoizedProps.value!=null&&Ul(U,"number",U.value)}switch(st=I?va(I):window,e){case"focusin":(Md(st)||st.contentEditable==="true")&&(Ts=st,ec=I,Ma=null);break;case"focusout":Ma=ec=Ts=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Id(Y,a,V);break;case"selectionchange":if(Gb)break;case"keydown":case"keyup":Id(Y,a,V)}var vt;if(Ql)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Cs?Td(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(wd&&a.locale!=="ko"&&(Cs||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Cs&&(vt=bd()):(hn=V,Xl="value"in hn?hn.value:hn.textContent,Cs=!0)),st=Fo(I,Ct),0<st.length&&(Ct=new Sd(Ct,e,null,a,V),Y.push({event:Ct,listeners:st}),vt?Ct.data=vt:(vt=xd(a),vt!==null&&(Ct.data=vt)))),(vt=Nb?kb(e,a):Bb(e,a))&&(Ct=Fo(I,"onBeforeInput"),0<Ct.length&&(st=new Sd("onBeforeInput","beforeinput",null,a,V),Y.push({event:st,listeners:Ct}),st.data=vt)),Tv(Y,e,I,a,V)}dg(Y,n)})}function Ja(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Fo(e,n){for(var a=n+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Aa(e,a),p!=null&&l.unshift(Ja(e,p,m)),p=Aa(e,n),p!=null&&l.push(Ja(e,p,m))),e.tag===3)return l;e=e.return}return[]}function Dv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pg(e,n,a,l,p){for(var m=n._reactName,v=[];a!==null&&a!==l;){var E=a,M=E.alternate,I=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||I===null||(M=I,p?(I=Aa(a,m),I!=null&&v.unshift(Ja(a,I,M))):p||(I=Aa(a,m),I!=null&&v.push(Ja(a,I,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var Lv=/\r\n?/g,Ov=/\u0000|\uFFFD/g;function gg(e){return(typeof e=="string"?e:""+e).replace(Lv,`
`).replace(Ov,"")}function mg(e,n){return n=gg(n),gg(e)===n}function It(e,n,a,l,p,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||_s(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&_s(e,""+l);break;case"className":Hr(e,"class",l);break;case"tabIndex":Hr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Hr(e,a,l);break;case"style":gd(e,l,m);break;case"data":if(n!=="object"){Hr(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Gr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&It(e,n,"name",p.name,p,null),It(e,n,"formEncType",p.formEncType,p,null),It(e,n,"formMethod",p.formMethod,p,null),It(e,n,"formTarget",p.formTarget,p,null)):(It(e,n,"encType",p.encType,p,null),It(e,n,"method",p.method,p,null),It(e,n,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Gr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=zi);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Gr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":wt("beforetoggle",e),wt("toggle",e),Ur(e,"popover",l);break;case"xlinkActuate":Pi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ur(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rb.get(a)||a,Ur(e,a,l))}}function xu(e,n,a,l,p,m){switch(a){case"style":gd(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?_s(e,l):(typeof l=="number"||typeof l=="bigint")&&_s(e,""+l);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rd.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),n=a.slice(2,p?a.length-7:void 0),m=e[Ne]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,p);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ur(e,a,l)}}}function we(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var l=!1,p=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,m,v,a,null)}}p&&It(e,n,"srcSet",a.srcSet,a,null),l&&It(e,n,"src",a.src,a,null);return;case"input":wt("invalid",e);var E=m=v=p=null,M=null,I=null;for(l in a)if(a.hasOwnProperty(l)){var V=a[l];if(V!=null)switch(l){case"name":p=V;break;case"type":v=V;break;case"checked":M=V;break;case"defaultChecked":I=V;break;case"value":m=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:It(e,n,l,V,a,null)}}hd(e,m,E,M,I,v,p,!1);return;case"select":wt("invalid",e),l=v=m=null;for(p in a)if(a.hasOwnProperty(p)&&(E=a[p],E!=null))switch(p){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:It(e,n,p,E,a,null)}n=m,a=v,e.multiple=!!l,n!=null?Ss(e,!!l,n,!1):a!=null&&Ss(e,!!l,a,!0);return;case"textarea":wt("invalid",e),m=p=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":p=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:It(e,n,v,E,a,null)}fd(e,l,p,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:It(e,n,M,l,a,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(l=0;l<Za.length;l++)wt(Za[l],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,I,l,a,null)}return;default:if(Hl(n)){for(V in a)a.hasOwnProperty(V)&&(l=a[V],l!==void 0&&xu(e,n,V,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&It(e,n,E,l,a,null))}function Nv(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,E=null,M=null,I=null,V=null;for(H in a){var Y=a[H];if(a.hasOwnProperty(H)&&Y!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":M=Y;default:l.hasOwnProperty(H)||It(e,n,H,null,l,Y)}}for(var U in l){var H=l[U];if(Y=a[U],l.hasOwnProperty(U)&&(H!=null||Y!=null))switch(U){case"type":m=H;break;case"name":p=H;break;case"checked":I=H;break;case"defaultChecked":V=H;break;case"value":v=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:H!==Y&&It(e,n,U,H,l,Y)}}Il(e,v,E,M,I,V,m,p);return;case"select":H=v=E=U=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":H=M;default:l.hasOwnProperty(m)||It(e,n,m,null,l,M)}for(p in l)if(m=l[p],M=a[p],l.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":U=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==M&&It(e,n,p,m,l,M)}n=E,a=v,l=H,U!=null?Ss(e,!!a,U,!1):!!l!=!!a&&(n!=null?Ss(e,!!a,n,!0):Ss(e,!!a,a?[]:"",!1));return;case"textarea":H=U=null;for(E in a)if(p=a[E],a.hasOwnProperty(E)&&p!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:It(e,n,E,null,l,p)}for(v in l)if(p=l[v],m=a[v],l.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":U=p;break;case"defaultValue":H=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&It(e,n,v,p,l,m)}dd(e,U,H);return;case"option":for(var nt in a)if(U=a[nt],a.hasOwnProperty(nt)&&U!=null&&!l.hasOwnProperty(nt))switch(nt){case"selected":e.selected=!1;break;default:It(e,n,nt,null,l,U)}for(M in l)if(U=l[M],H=a[M],l.hasOwnProperty(M)&&U!==H&&(U!=null||H!=null))switch(M){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:It(e,n,M,U,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in a)U=a[ct],a.hasOwnProperty(ct)&&U!=null&&!l.hasOwnProperty(ct)&&It(e,n,ct,null,l,U);for(I in l)if(U=l[I],H=a[I],l.hasOwnProperty(I)&&U!==H&&(U!=null||H!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,n));break;default:It(e,n,I,U,l,H)}return;default:if(Hl(n)){for(var Ut in a)U=a[Ut],a.hasOwnProperty(Ut)&&U!==void 0&&!l.hasOwnProperty(Ut)&&xu(e,n,Ut,void 0,l,U);for(V in l)U=l[V],H=a[V],!l.hasOwnProperty(V)||U===H||U===void 0&&H===void 0||xu(e,n,V,U,l,H);return}}for(var B in a)U=a[B],a.hasOwnProperty(B)&&U!=null&&!l.hasOwnProperty(B)&&It(e,n,B,null,l,U);for(Y in l)U=l[Y],H=a[Y],!l.hasOwnProperty(Y)||U===H||U==null&&H==null||It(e,n,Y,U,l,H)}function yg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var p=a[l],m=p.transferSize,v=p.initiatorType,E=p.duration;if(m&&E&&yg(v)){for(v=0,E=p.responseEnd,l+=1;l<a.length;l++){var M=a[l],I=M.startTime;if(I>E)break;var V=M.transferSize,Y=M.initiatorType;V&&yg(Y)&&(M=M.responseEnd,v+=V*(M<E?1:(E-I)/(M-I)))}if(--l,n+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mu=null,Ru=null;function Io(e){return e.nodeType===9?e:e.ownerDocument}function bg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Du(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Lu=null;function Bv(){var e=window.event;return e&&e.type==="popstate"?e===Lu?!1:(Lu=e,!0):(Lu=null,!1)}var Ag=typeof setTimeout=="function"?setTimeout:void 0,Pv=typeof clearTimeout=="function"?clearTimeout:void 0,Sg=typeof Promise=="function"?Promise:void 0,zv=typeof queueMicrotask=="function"?queueMicrotask:typeof Sg<"u"?function(e){return Sg.resolve(null).then(e).catch(Fv)}:Ag;function Fv(e){setTimeout(function(){throw e})}function Mn(e){return e==="head"}function _g(e,n){var a=n,l=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(p),Js(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,tr(a);for(var m=a.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[ba]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&tr(e.ownerDocument.body);a=p}while(a);Js(n)}function wg(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Ou(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ou(a),zl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Iv(e,n,a,l){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ba])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=ui(e.nextSibling),e===null)break}return null}function Uv(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ui(e.nextSibling),e===null))return null;return e}function Eg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ui(e.nextSibling),e===null))return null;return e}function Nu(e){return e.data==="$?"||e.data==="$~"}function ku(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Hv(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ui(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bu=null;function Cg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ui(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Tg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function xg(e,n,a){switch(n=Io(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function tr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);zl(e)}var hi=new Map,Mg=new Set;function Uo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=q.d;q.d={f:jv,r:Gv,D:qv,C:Vv,L:Xv,m:Yv,X:Kv,S:$v,M:Wv};function jv(){var e=Ji.f(),n=Lo();return e||n}function Gv(e){var n=bs(e);n!==null&&n.tag===5&&n.type==="form"?Vf(n):Ji.r(e)}var Ws=typeof document>"u"?null:document;function Rg(e,n,a){var l=Ws;if(l&&typeof n=="string"&&n){var p=ni(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Mg.has(p)||(Mg.add(p),e={rel:e,crossOrigin:a,href:n},l.querySelector(p)===null&&(n=l.createElement("link"),we(n,"link",e),ge(n),l.head.appendChild(n)))}}function qv(e){Ji.D(e),Rg("dns-prefetch",e,null)}function Vv(e,n){Ji.C(e,n),Rg("preconnect",e,n)}function Xv(e,n,a){Ji.L(e,n,a);var l=Ws;if(l&&e&&n){var p='link[rel="preload"][as="'+ni(n)+'"]';n==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+ni(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+ni(a.imageSizes)+'"]')):p+='[href="'+ni(e)+'"]';var m=p;switch(n){case"style":m=Qs(e);break;case"script":m=Zs(e)}hi.has(m)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),hi.set(m,e),l.querySelector(p)!==null||n==="style"&&l.querySelector(er(m))||n==="script"&&l.querySelector(ir(m))||(n=l.createElement("link"),we(n,"link",e),ge(n),l.head.appendChild(n)))}}function Yv(e,n){Ji.m(e,n);var a=Ws;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ni(l)+'"][href="'+ni(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zs(e)}if(!hi.has(m)&&(e=y({rel:"modulepreload",href:e},n),hi.set(m,e),a.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ir(m)))return}l=a.createElement("link"),we(l,"link",e),ge(l),a.head.appendChild(l)}}}function $v(e,n,a){Ji.S(e,n,a);var l=Ws;if(l&&e){var p=vs(l).hoistableStyles,m=Qs(e);n=n||"default";var v=p.get(m);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(er(m)))E.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=hi.get(m))&&Pu(e,a);var M=v=l.createElement("link");ge(M),we(M,"link",e),M._p=new Promise(function(I,V){M.onload=I,M.onerror=V}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ho(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},p.set(m,v)}}}function Kv(e,n){Ji.X(e,n);var a=Ws;if(a&&e){var l=vs(a).hoistableScripts,p=Zs(e),m=l.get(p);m||(m=a.querySelector(ir(p)),m||(e=y({src:e,async:!0},n),(n=hi.get(p))&&zu(e,n),m=a.createElement("script"),ge(m),we(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function Wv(e,n){Ji.M(e,n);var a=Ws;if(a&&e){var l=vs(a).hoistableScripts,p=Zs(e),m=l.get(p);m||(m=a.querySelector(ir(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=hi.get(p))&&zu(e,n),m=a.createElement("script"),ge(m),we(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function Dg(e,n,a,l){var p=(p=ut.current)?Uo(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Qs(a.href),a=vs(p).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Qs(a.href);var m=vs(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector(er(e)))&&!m._p&&(v.instance=m,v.state.loading=5),hi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hi.set(e,a),m||Qv(p,e,a,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Zs(a),a=vs(p).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Qs(e){return'href="'+ni(e)+'"'}function er(e){return'link[rel="stylesheet"]['+e+"]"}function Lg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Qv(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),we(n,"link",a),ge(n),e.head.appendChild(n))}function Zs(e){return'[src="'+ni(e)+'"]'}function ir(e){return"script[async]"+e}function Og(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+ni(a.href)+'"]');if(l)return n.instance=l,ge(l),l;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ge(l),we(l,"style",p),Ho(l,a.precedence,e),n.instance=l;case"stylesheet":p=Qs(a.href);var m=e.querySelector(er(p));if(m)return n.state.loading|=4,n.instance=m,ge(m),m;l=Lg(a),(p=hi.get(p))&&Pu(l,p),m=(e.ownerDocument||e).createElement("link"),ge(m);var v=m;return v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),we(m,"link",l),n.state.loading|=4,Ho(m,a.precedence,e),n.instance=m;case"script":return m=Zs(a.src),(p=e.querySelector(ir(m)))?(n.instance=p,ge(p),p):(l=a,(p=hi.get(m))&&(l=y({},a),zu(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),ge(p),we(p,"link",l),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ho(l,a.precedence,e));return n.instance}function Ho(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)m=E;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Pu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var jo=null;function Ng(e,n,a){if(jo===null){var l=new Map,p=jo=new Map;p.set(a,l)}else p=jo,l=p.get(a),l||(l=new Map,p.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var m=a[p];if(!(m[ba]||m[ve]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var E=l.get(v);E?E.push(m):l.set(v,[m])}}return l}function kg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Zv(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Bg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Jv(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Qs(l.href),m=n.querySelector(er(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Go.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,ge(m);return}m=n.ownerDocument||n,l=Lg(l),(p=hi.get(p))&&Pu(l,p),m=m.createElement("link"),ge(m);var v=m;v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),we(m,"link",l),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Go.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Fu=0;function t0(e,n){return e.stylesheets&&e.count===0&&Vo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Vo(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Fu===0&&(Fu=62500*kv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Vo(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Fu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function Go(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qo=null;function Vo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qo=new Map,n.forEach(e0,e),qo=null,Go.call(e))}function e0(e,n){if(!(n.state.loading&4)){var a=qo.get(e);if(a)var l=a.get(null);else{a=new Map,qo.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}p=n.instance,v=p.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,p),a.set(v,p),this.count++,l=Go.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var nr={$$typeof:x,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function i0(e,n,a,l,p,m,v,E,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.hiddenUpdates=Nl(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Pg(e,n,a,l,p,m,v,E,M,I,V,Y){return e=new i0(e,n,a,v,M,I,V,Y,E),n=1,m===!0&&(n|=24),m=Ye(3,null,null,n),e.current=m,m.stateNode=e,n=yc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Sc(m),e}function zg(e){return e?(e=Rs,e):Rs}function Fg(e,n,a,l,p,m){p=zg(p),l.context===null?l.context=p:l.pendingContext=p,l=yn(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=bn(e,l,n),a!==null&&(Ie(a,e,n),Ba(a,e,n))}function Ig(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Iu(e,n){Ig(e,n),(e=e.alternate)&&Ig(e,n)}function Ug(e){if(e.tag===13||e.tag===31){var n=Xn(e,67108864);n!==null&&Ie(n,e,67108864),Iu(e,67108864)}}function Hg(e){if(e.tag===13||e.tag===31){var n=Ze();n=kl(n);var a=Xn(e,n);a!==null&&Ie(a,e,n),Iu(e,n)}}var Xo=!0;function n0(e,n,a,l){var p=k.T;k.T=null;var m=q.p;try{q.p=2,Uu(e,n,a,l)}finally{q.p=m,k.T=p}}function s0(e,n,a,l){var p=k.T;k.T=null;var m=q.p;try{q.p=8,Uu(e,n,a,l)}finally{q.p=m,k.T=p}}function Uu(e,n,a,l){if(Xo){var p=Hu(l);if(p===null)Tu(e,n,l,Yo,a),Gg(e,l);else if(r0(p,e,n,a,l))l.stopPropagation();else if(Gg(e,l),n&4&&-1<a0.indexOf(e)){for(;p!==null;){var m=bs(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Hn(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var M=1<<31-Ve(v);E.entanglements[1]|=M,v&=~M}xi(m),(Nt&6)===0&&(Ro=Ge()+500,Qa(0))}}break;case 31:case 13:E=Xn(m,2),E!==null&&Ie(E,m,2),Lo(),Iu(m,2)}if(m=Hu(l),m===null&&Tu(e,n,l,Yo,a),m===p)break;p=m}p!==null&&l.stopPropagation()}else Tu(e,n,l,null,a)}}function Hu(e){return e=Gl(e),ju(e)}var Yo=null;function ju(e){if(Yo=null,e=ys(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Yo=e,null}function jg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qy()){case Kh:return 2;case Wh:return 8;case Br:case Vy:return 32;case Qh:return 268435456;default:return 32}default:return 32}}var Gu=!1,Rn=null,Dn=null,Ln=null,sr=new Map,ar=new Map,On=[],a0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gg(e,n){switch(e){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":sr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ar.delete(n.pointerId)}}function rr(e,n,a,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},n!==null&&(n=bs(n),n!==null&&Ug(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function r0(e,n,a,l,p){switch(n){case"focusin":return Rn=rr(Rn,e,n,a,l,p),!0;case"dragenter":return Dn=rr(Dn,e,n,a,l,p),!0;case"mouseover":return Ln=rr(Ln,e,n,a,l,p),!0;case"pointerover":var m=p.pointerId;return sr.set(m,rr(sr.get(m)||null,e,n,a,l,p)),!0;case"gotpointercapture":return m=p.pointerId,ar.set(m,rr(ar.get(m)||null,e,n,a,l,p)),!0}return!1}function qg(e){var n=ys(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,nd(e.priority,function(){Hg(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,nd(e.priority,function(){Hg(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $o(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Hu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);jl=l,a.target.dispatchEvent(l),jl=null}else return n=bs(a),n!==null&&Ug(n),e.blockedOn=a,!1;n.shift()}return!0}function Vg(e,n,a){$o(e)&&a.delete(n)}function o0(){Gu=!1,Rn!==null&&$o(Rn)&&(Rn=null),Dn!==null&&$o(Dn)&&(Dn=null),Ln!==null&&$o(Ln)&&(Ln=null),sr.forEach(Vg),ar.forEach(Vg)}function Ko(e,n){e.blockedOn===n&&(e.blockedOn=null,Gu||(Gu=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,o0)))}var Wo=null;function Xg(e){Wo!==e&&(Wo=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Wo===e&&(Wo=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],p=e[n+2];if(typeof l!="function"){if(ju(l||a)===null)continue;break}var m=bs(a);m!==null&&(e.splice(n,3),n-=3,Hc(m,{pending:!0,data:p,method:a.method,action:l},l,p))}}))}function Js(e){function n(M){return Ko(M,e)}Rn!==null&&Ko(Rn,e),Dn!==null&&Ko(Dn,e),Ln!==null&&Ko(Ln,e),sr.forEach(n),ar.forEach(n);for(var a=0;a<On.length;a++){var l=On[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<On.length&&(a=On[0],a.blockedOn===null);)qg(a),a.blockedOn===null&&On.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var p=a[l],m=a[l+1],v=p[Ne]||null;if(typeof m=="function")v||Xg(a);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[Ne]||null)E=v.formAction;else if(ju(p)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Xg(a)}}}function Yg(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function qu(e){this._internalRoot=e}Qo.prototype.render=qu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=Ze();Fg(a,l,e,n,null,null)},Qo.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Fg(e.current,2,null,e,null,null),Lo(),n[ms]=null}};function Qo(e){this._internalRoot=e}Qo.prototype.unstable_scheduleHydration=function(e){if(e){var n=id();e={blockedOn:null,target:e,priority:n};for(var a=0;a<On.length&&n!==0&&n<On[a].priority;a++);On.splice(a,0,e),a===0&&qg(e)}};var $g=t.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var l0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{ga=Zo.inject(l0),qe=Zo}catch{}}return lr.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,l="",p=ep,m=ip,v=np;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Pg(e,1,!1,null,null,a,l,null,p,m,v,Yg),e[ms]=n.current,Cu(e),new qu(n)},lr.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var l=!1,p="",m=ep,v=ip,E=np,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=Pg(e,1,!0,n,a??null,l,p,M,m,v,E,Yg),n.context=zg(null),a=n.current,l=Ze(),l=kl(l),p=yn(l),p.callback=null,bn(a,p,l),a=l,n.current.lanes=a,ya(n,a),xi(n),e[ms]=n.current,Cu(e),new Qo(n)},lr.version="19.2.0",lr}var rm;function b0(){if(rm)return $u.exports;rm=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),$u.exports=y0(),$u.exports}var v0=b0();var om="popstate";function A0(d={}){function t(r,o){let{pathname:c="/",search:u="",hash:h=""}=ds(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),hh("",{pathname:c,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(r,o){let c=r.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:vr(o))}function s(r,o){yi(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return _0(t,i,s,d)}function Qt(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function yi(d,t){if(!d){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function S0(){return Math.random().toString(36).substring(2,10)}function lm(d,t){return{usr:d.state,key:d.key,idx:t}}function hh(d,t,i=null,s){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof t=="string"?ds(t):t,state:i,key:t&&t.key||s||S0()}}function vr({pathname:d="/",search:t="",hash:i=""}){return t&&t!=="?"&&(d+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(d+=i.charAt(0)==="#"?i:"#"+i),d}function ds(d){let t={};if(d){let i=d.indexOf("#");i>=0&&(t.hash=d.substring(i),d=d.substring(0,i));let s=d.indexOf("?");s>=0&&(t.search=d.substring(s),d=d.substring(0,s)),d&&(t.pathname=d)}return t}function _0(d,t,i,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,c=r.history,u="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let C=g(),w=C==null?null:C-f;f=C,h&&h({action:u,location:S.location,delta:w})}function b(C,w){u="PUSH";let T=hh(S.location,C,w);i&&i(T,C),f=g()+1;let x=lm(T,f),O=S.createHref(T);try{c.pushState(x,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(O)}o&&h&&h({action:u,location:S.location,delta:1})}function A(C,w){u="REPLACE";let T=hh(S.location,C,w);i&&i(T,C),f=g();let x=lm(T,f),O=S.createHref(T);c.replaceState(x,"",O),o&&h&&h({action:u,location:S.location,delta:0})}function _(C){return w0(C)}let S={get action(){return u},get location(){return d(r,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(om,y),h=C,()=>{r.removeEventListener(om,y),h=null}},createHref(C){return t(r,C)},createURL:_,encodeLocation(C){let w=_(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:A,go(C){return c.go(C)}};return S}function w0(d,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(i,"No window.location.(origin|href) available to create URL");let s=typeof d=="string"?d:vr(d);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Im(d,t,i="/"){return E0(d,t,i,!1)}function E0(d,t,i,s){let r=typeof t=="string"?ds(t):t,o=rn(r.pathname||"/",i);if(o==null)return null;let c=Um(d);C0(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=P0(o);u=k0(c[h],f,s)}return u}function Um(d,t=[],i=[],s="",r=!1){let o=(c,u,h=r,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&h)return;Qt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=an([s,g.relativePath]),b=i.concat(g);c.children&&c.children.length>0&&(Qt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Um(c.children,t,b,y,h)),!(c.path==null&&!c.index)&&t.push({path:y,score:O0(y,c.index),routesMeta:b})};return d.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of Hm(c.path))o(c,u,!0,h)}),t}function Hm(d){let t=d.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let c=Hm(s.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...c),u.map(h=>d.startsWith("/")&&h===""?"/":h)}function C0(d){d.sort((t,i)=>t.score!==i.score?i.score-t.score:N0(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var T0=/^:[\w-]+$/,x0=3,M0=2,R0=1,D0=10,L0=-2,cm=d=>d==="*";function O0(d,t){let i=d.split("/"),s=i.length;return i.some(cm)&&(s+=L0),t&&(s+=M0),i.filter(r=>!cm(r)).reduce((r,o)=>r+(T0.test(o)?x0:o===""?R0:D0),s)}function N0(d,t){return d.length===t.length&&d.slice(0,-1).every((s,r)=>s===t[r])?d[d.length-1]-t[t.length-1]:0}function k0(d,t,i=!1){let{routesMeta:s}=d,r={},o="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=pl({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),b=h.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=pl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),c.push({params:r,pathname:an([o,y.pathname]),pathnameBase:U0(an([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=an([o,y.pathnameBase]))}return c}function pl(d,t){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[i,s]=B0(d.path,d.caseSensitive,d.end),r=t.match(i);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let _=u[b]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:d}}function B0(d,t=!1,i=!0){yi(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let s=[],r="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return d.endsWith("*")?(s.push({paramName:"*"}),r+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":d!==""&&d!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function P0(d){try{return d.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yi(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),d}}function rn(d,t){if(t==="/")return d;if(!d.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=d.charAt(i);return s&&s!=="/"?null:d.slice(i)||"/"}var jm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z0=d=>jm.test(d);function F0(d,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof d=="string"?ds(d):d,o;if(i)if(z0(i))o=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),yi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?o=um(i.substring(1),"/"):o=um(i,t)}else o=t;return{pathname:o,search:H0(s),hash:j0(r)}}function um(d,t){let i=t.replace(/\/+$/,"").split("/");return d.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function Zu(d,t,i,s){return`Cannot include a '${d}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I0(d){return d.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Gm(d){let t=I0(d);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function qm(d,t,i,s=!1){let r;typeof d=="string"?r=ds(d):(r={...d},Qt(!r.pathname||!r.pathname.includes("?"),Zu("?","pathname","search",r)),Qt(!r.pathname||!r.pathname.includes("#"),Zu("#","pathname","hash",r)),Qt(!r.search||!r.search.includes("#"),Zu("#","search","hash",r)));let o=d===""||r.pathname==="",c=o?"/":r.pathname,u;if(c==null)u=i;else{let y=t.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}u=y>=0?t[y]:"/"}let h=F0(r,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var an=d=>d.join("/").replace(/\/\/+/g,"/"),U0=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),H0=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,j0=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d,G0=class{constructor(d,t,i,s=!1){this.status=d,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function q0(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}function V0(d){return d.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Vm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xm(d,t){let i=d;if(typeof i!="string"||!jm.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,r=!1;if(Vm)try{let o=new URL(window.location.href),c=i.startsWith("//")?new URL(o.protocol+i):new URL(i),u=rn(c.pathname,t);c.origin===o.origin&&u!=null?i=u+c.search+c.hash:r=!0}catch{yi(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ym=["POST","PUT","PATCH","DELETE"];new Set(Ym);var X0=["GET",...Ym];new Set(X0);var fa=G.createContext(null);fa.displayName="DataRouter";var vl=G.createContext(null);vl.displayName="DataRouterState";var Y0=G.createContext(!1),$m=G.createContext({isTransitioning:!1});$m.displayName="ViewTransition";var $0=G.createContext(new Map);$0.displayName="Fetchers";var K0=G.createContext(null);K0.displayName="Await";var vi=G.createContext(null);vi.displayName="Navigation";var Cr=G.createContext(null);Cr.displayName="Location";var on=G.createContext({outlet:null,matches:[],isDataRoute:!1});on.displayName="Route";var Mh=G.createContext(null);Mh.displayName="RouteError";var Km="REACT_ROUTER_ERROR",W0="REDIRECT",Q0="ROUTE_ERROR_RESPONSE";function Z0(d){if(d.startsWith(`${Km}:${W0}:{`))try{let t=JSON.parse(d.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function J0(d){if(d.startsWith(`${Km}:${Q0}:{`))try{let t=JSON.parse(d.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new G0(t.status,t.statusText,t.data)}catch{}}function tA(d,{relative:t}={}){Qt(Tr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=G.useContext(vi),{hash:r,pathname:o,search:c}=xr(d,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:an([i,o])),s.createHref({pathname:u,search:c,hash:r})}function Tr(){return G.useContext(Cr)!=null}function fs(){return Qt(Tr(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Cr).location}var Wm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qm(d){G.useContext(vi).static||G.useLayoutEffect(d)}function eA(){let{isDataRoute:d}=G.useContext(on);return d?pA():iA()}function iA(){Qt(Tr(),"useNavigate() may be used only in the context of a <Router> component.");let d=G.useContext(fa),{basename:t,navigator:i}=G.useContext(vi),{matches:s}=G.useContext(on),{pathname:r}=fs(),o=JSON.stringify(Gm(s)),c=G.useRef(!1);return Qm(()=>{c.current=!0}),G.useCallback((h,f={})=>{if(yi(c.current,Wm),!c.current)return;if(typeof h=="number"){i.go(h);return}let g=qm(h,JSON.parse(o),r,f.relative==="path");d==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:an([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,o,r,d])}G.createContext(null);function xr(d,{relative:t}={}){let{matches:i}=G.useContext(on),{pathname:s}=fs(),r=JSON.stringify(Gm(i));return G.useMemo(()=>qm(d,JSON.parse(r),s,t==="path"),[d,r,s,t])}function nA(d,t){return Zm(d,t)}function Zm(d,t,i,s,r){Qt(Tr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=G.useContext(vi),{matches:c}=G.useContext(on),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";ty(f,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=fs(),A;if(t){let T=typeof t=="string"?ds(t):t;Qt(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=b;let _=A.pathname||"/",S=_;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=Im(d,{pathname:S});yi(y||C!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),yi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=lA(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:an([g,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:an([g,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),c,i,s,r);return t&&w?G.createElement(Cr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},w):w}function sA(){let d=fA(),t=q0(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),i=d instanceof Error?d.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",d),c=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:o},"ErrorBoundary")," or"," ",G.createElement("code",{style:o},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},t),i?G.createElement("pre",{style:r},i):null,c)}var aA=G.createElement(sA,null),Jm=class extends G.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,t){return t.location!==d.location||t.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:t.error,location:t.location,revalidation:d.revalidation||t.revalidation}}componentDidCatch(d,t){this.props.onError?this.props.onError(d,t):console.error("React Router caught the following error during render",d)}render(){let d=this.state.error;if(this.context&&typeof d=="object"&&d&&"digest"in d&&typeof d.digest=="string"){const i=J0(d.digest);i&&(d=i)}let t=d!==void 0?G.createElement(on.Provider,{value:this.props.routeContext},G.createElement(Mh.Provider,{value:d,children:this.props.component})):this.props.children;return this.context?G.createElement(rA,{error:d},t):t}};Jm.contextType=Y0;var Ju=new WeakMap;function rA({children:d,error:t}){let{basename:i}=G.useContext(vi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=Z0(t.digest);if(s){let r=Ju.get(t);if(r)throw r;let o=Xm(s.location,i);if(Vm&&!Ju.get(t))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw Ju.set(t,c),c}return G.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return d}function oA({routeContext:d,match:t,children:i}){let s=G.useContext(fa);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(on.Provider,{value:d},i)}function lA(d,t=[],i=null,s=null,r=null){if(d==null){if(!i)return null;if(i.errors)d=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)d=i.matches;else return null}let o=d,c=i?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Qt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,h=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:b,errors:A}=i,_=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||_){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:V0(i.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let A,_=!1,S=null,C=null;i&&(A=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||aA,u&&(h<0&&b===0?(ty("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,C=null):h===b&&(_=!0,C=y.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,b+1)),T=()=>{let x;return A?x=S:_?x=C:y.route.Component?x=G.createElement(y.route.Component,null):y.route.element?x=y.route.element:x=g,G.createElement(oA,{match:y,routeContext:{outlet:g,matches:w,isDataRoute:i!=null},children:x})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?G.createElement(Jm,{location:i.location,revalidation:i.revalidation,component:S,error:A,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:f}):T()},null)}function Rh(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cA(d){let t=G.useContext(fa);return Qt(t,Rh(d)),t}function uA(d){let t=G.useContext(vl);return Qt(t,Rh(d)),t}function hA(d){let t=G.useContext(on);return Qt(t,Rh(d)),t}function Dh(d){let t=hA(d),i=t.matches[t.matches.length-1];return Qt(i.route.id,`${d} can only be used on routes that contain a unique "id"`),i.route.id}function dA(){return Dh("useRouteId")}function fA(){let d=G.useContext(Mh),t=uA("useRouteError"),i=Dh("useRouteError");return d!==void 0?d:t.errors?.[i]}function pA(){let{router:d}=cA("useNavigate"),t=Dh("useNavigate"),i=G.useRef(!1);return Qm(()=>{i.current=!0}),G.useCallback(async(r,o={})=>{yi(i.current,Wm),i.current&&(typeof r=="number"?await d.navigate(r):await d.navigate(r,{fromRouteId:t,...o}))},[d,t])}var hm={};function ty(d,t,i){!t&&!hm[d]&&(hm[d]=!0,yi(!1,i))}G.memo(gA);function gA({routes:d,future:t,state:i,onError:s}){return Zm(d,void 0,i,s,t)}function as(d){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mA({basename:d="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:o=!1,unstable_useTransitions:c}){Qt(!Tr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=d.replace(/^\/*/,"/"),h=G.useMemo(()=>({basename:u,navigator:r,static:o,unstable_useTransitions:c,future:{}}),[u,r,o,c]);typeof i=="string"&&(i=ds(i));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:A="default"}=i,_=G.useMemo(()=>{let S=rn(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:A},navigationType:s}},[u,f,g,y,b,A,s]);return yi(_!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:G.createElement(vi.Provider,{value:h},G.createElement(Cr.Provider,{children:t,value:_}))}function yA({children:d,location:t}){return nA(dh(d),t)}function dh(d,t=[]){let i=[];return G.Children.forEach(d,(s,r)=>{if(!G.isValidElement(s))return;let o=[...t,r];if(s.type===G.Fragment){i.push.apply(i,dh(s.props.children,o));return}Qt(s.type===as,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=dh(s.props.children,o)),i.push(c)}),i}var cl="get",ul="application/x-www-form-urlencoded";function Al(d){return typeof HTMLElement<"u"&&d instanceof HTMLElement}function bA(d){return Al(d)&&d.tagName.toLowerCase()==="button"}function vA(d){return Al(d)&&d.tagName.toLowerCase()==="form"}function AA(d){return Al(d)&&d.tagName.toLowerCase()==="input"}function SA(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function _A(d,t){return d.button===0&&(!t||t==="_self")&&!SA(d)}var Jo=null;function wA(){if(Jo===null)try{new FormData(document.createElement("form"),0),Jo=!1}catch{Jo=!0}return Jo}var EA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function th(d){return d!=null&&!EA.has(d)?(yi(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ul}"`),null):d}function CA(d,t){let i,s,r,o,c;if(vA(d)){let u=d.getAttribute("action");s=u?rn(u,t):null,i=d.getAttribute("method")||cl,r=th(d.getAttribute("enctype"))||ul,o=new FormData(d)}else if(bA(d)||AA(d)&&(d.type==="submit"||d.type==="image")){let u=d.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=d.getAttribute("formaction")||u.getAttribute("action");if(s=h?rn(h,t):null,i=d.getAttribute("formmethod")||u.getAttribute("method")||cl,r=th(d.getAttribute("formenctype"))||th(u.getAttribute("enctype"))||ul,o=new FormData(u,d),!wA()){let{name:f,type:g,value:y}=d;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(Al(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=cl,s=null,r=ul,c=d}return o&&r==="text/plain"&&(c=o,o=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lh(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function TA(d,t,i,s){let r=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return i?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&rn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function xA(d,t){if(d.id in t)return t[d.id];try{let i=await import(d.module);return t[d.id]=i,i}catch(i){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MA(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function RA(d,t,i){let s=await Promise.all(d.map(async r=>{let o=t.routes[r.route.id];if(o){let c=await xA(o,i);return c.links?c.links():[]}return[]}));return NA(s.flat(1).filter(MA).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function dm(d,t,i,s,r,o){let c=(h,f)=>i[f]?h.route.id!==i[f].route.id:!0,u=(h,f)=>i[f].pathname!==h.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,f)=>c(h,f)||u(h,f)):o==="data"?t.filter((h,f)=>{let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(d,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function DA(d,t,{includeHydrateFallback:i}={}){return LA(d.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function LA(d){return[...new Set(d)]}function OA(d){let t={},i=Object.keys(d).sort();for(let s of i)t[s]=d[s];return t}function NA(d,t){let i=new Set;return new Set(t),d.reduce((s,r)=>{let o=JSON.stringify(OA(r));return i.has(o)||(i.add(o),s.push({key:o,link:r})),s},[])}function ey(){let d=G.useContext(fa);return Lh(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function kA(){let d=G.useContext(vl);return Lh(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var Oh=G.createContext(void 0);Oh.displayName="FrameworkContext";function iy(){let d=G.useContext(Oh);return Lh(d,"You must render this element inside a <HydratedRouter> element"),d}function BA(d,t){let i=G.useContext(Oh),[s,r]=G.useState(!1),[o,c]=G.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=G.useRef(null);G.useEffect(()=>{if(d==="render"&&c(!0),d==="viewport"){let S=w=>{w.forEach(T=>{c(T.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[d]),G.useEffect(()=>{if(s){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{r(!0)},_=()=>{r(!1),c(!1)};return i?d!=="intent"?[o,b,{}]:[o,b,{onFocus:cr(u,A),onBlur:cr(h,_),onMouseEnter:cr(f,A),onMouseLeave:cr(g,_),onTouchStart:cr(y,A)}]:[!1,b,{}]}function cr(d,t){return i=>{d&&d(i),i.defaultPrevented||t(i)}}function PA({page:d,...t}){let{router:i}=ey(),s=G.useMemo(()=>Im(i.routes,d,i.basename),[i.routes,d,i.basename]);return s?G.createElement(FA,{page:d,matches:s,...t}):null}function zA(d){let{manifest:t,routeModules:i}=iy(),[s,r]=G.useState([]);return G.useEffect(()=>{let o=!1;return RA(d,t,i).then(c=>{o||r(c)}),()=>{o=!0}},[d,t,i]),s}function FA({page:d,matches:t,...i}){let s=fs(),{future:r,manifest:o,routeModules:c}=iy(),{basename:u}=ey(),{loaderData:h,matches:f}=kA(),g=G.useMemo(()=>dm(d,t,f,o,s,"data"),[d,t,f,o,s]),y=G.useMemo(()=>dm(d,t,f,o,s,"assets"),[d,t,f,o,s]),b=G.useMemo(()=>{if(d===s.pathname+s.search+s.hash)return[];let S=new Set,C=!1;if(t.forEach(T=>{let x=o.routes[T.route.id];!x||!x.hasLoader||(!g.some(O=>O.route.id===T.route.id)&&T.route.id in h&&c[T.route.id]?.shouldRevalidate||x.hasClientLoader?C=!0:S.add(T.route.id))}),S.size===0)return[];let w=TA(d,u,r.unstable_trailingSlashAwareDataRequests,"data");return C&&S.size>0&&w.searchParams.set("_routes",t.filter(T=>S.has(T.route.id)).map(T=>T.route.id).join(",")),[w.pathname+w.search]},[u,r.unstable_trailingSlashAwareDataRequests,h,s,o,g,t,d,c]),A=G.useMemo(()=>DA(y,o),[y,o]),_=zA(y);return G.createElement(G.Fragment,null,b.map(S=>G.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...i})),A.map(S=>G.createElement("link",{key:S,rel:"modulepreload",href:S,...i})),_.map(({key:S,link:C})=>G.createElement("link",{key:S,nonce:i.nonce,...C})))}function IA(...d){return t=>{d.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UA&&(window.__reactRouterVersion="7.12.0")}catch{}function HA({basename:d,children:t,unstable_useTransitions:i,window:s}){let r=G.useRef();r.current==null&&(r.current=A0({window:s,v5Compat:!0}));let o=r.current,[c,u]=G.useState({action:o.action,location:o.location}),h=G.useCallback(f=>{i===!1?u(f):G.startTransition(()=>u(f))},[i]);return G.useLayoutEffect(()=>o.listen(h),[o,h]),G.createElement(mA,{basename:d,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:i})}var ny=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sy=G.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},_){let{basename:S,unstable_useTransitions:C}=G.useContext(vi),w=typeof f=="string"&&ny.test(f),T=Xm(f,S);f=T.to;let x=tA(f,{relative:r}),[O,L,N]=BA(s,A),P=qA(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:C});function $(J){t&&t(J),J.defaultPrevented||P(J)}let K=G.createElement("a",{...A,...N,href:T.absoluteURL||x,onClick:T.isExternal||o?t:$,ref:IA(_,L),target:h,"data-discover":!w&&i==="render"?"true":void 0});return O&&!w?G.createElement(G.Fragment,null,K,G.createElement(PA,{page:x})):K});sy.displayName="Link";var gi=G.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:o,to:c,viewTransition:u,children:h,...f},g){let y=xr(c,{relative:f.relative}),b=fs(),A=G.useContext(vl),{navigator:_,basename:S}=G.useContext(vi),C=A!=null&&KA(y)&&u===!0,w=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,T=b.pathname,x=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(T=T.toLowerCase(),x=x?x.toLowerCase():null,w=w.toLowerCase()),x&&S&&(x=rn(x,S)||x);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let L=T===w||!r&&T.startsWith(w)&&T.charAt(O)==="/",N=x!=null&&(x===w||!r&&x.startsWith(w)&&x.charAt(w.length)==="/"),P={isActive:L,isPending:N,isTransitioning:C},$=L?t:void 0,K;typeof s=="function"?K=s(P):K=[s,L?"active":null,N?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o(P):o;return G.createElement(sy,{...f,"aria-current":$,className:K,ref:g,style:J,to:c,viewTransition:u},typeof h=="function"?h(P):h)});gi.displayName="NavLink";var jA=G.forwardRef(({discover:d="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:o,method:c=cl,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},_)=>{let{unstable_useTransitions:S}=G.useContext(vi),C=YA(),w=$A(u,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",x=typeof u=="string"&&ny.test(u),O=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let N=L.nativeEvent.submitter,P=N?.getAttribute("formmethod")||c,$=()=>C(N||L.currentTarget,{fetcherKey:t,method:P,navigate:i,replace:r,state:o,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&i!==!1?G.startTransition(()=>$()):$()};return G.createElement("form",{ref:_,method:T,action:w,onSubmit:s?h:O,...A,"data-discover":!x&&d==="render"?"true":void 0})});jA.displayName="Form";function GA(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ay(d){let t=G.useContext(fa);return Qt(t,GA(d)),t}function qA(d,{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=eA(),g=fs(),y=xr(d,{relative:o});return G.useCallback(b=>{if(_A(b,t)){b.preventDefault();let A=i!==void 0?i:vr(g)===vr(y),_=()=>f(d,{replace:A,state:s,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u});h?G.startTransition(()=>_()):_()}},[g,f,y,i,s,t,d,r,o,c,u,h])}var VA=0,XA=()=>`__${String(++VA)}__`;function YA(){let{router:d}=ay("useSubmit"),{basename:t}=G.useContext(vi),i=dA(),s=d.fetch,r=d.navigate;return G.useCallback(async(o,c={})=>{let{action:u,method:h,encType:f,formData:g,body:y}=CA(o,t);if(c.navigate===!1){let b=c.fetcherKey||XA();await s(b,i,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await r(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,r,t,i])}function $A(d,{relative:t}={}){let{basename:i}=G.useContext(vi),s=G.useContext(on);Qt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...xr(d||".",{relative:t})},c=fs();if(d==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!d||d===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:an([i,o.pathname])),vr(o)}function KA(d,{relative:t}={}){let i=G.useContext($m);Qt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ay("useViewTransitionState"),r=xr(d,{relative:t});if(!i.isTransitioning)return!1;let o=rn(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=rn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return pl(r.pathname,c)!=null||pl(r.pathname,o)!=null}const WA="_App_1ddil_3",QA={App:WA},ZA="_navbar_1un4s_2",JA="_title_1un4s_17",tS="_menu_1un4s_29",eS="_menuItems_1un4s_33",iS="_hamburger_1un4s_54",nS="_backdrop_1un4s_73",sS="_mobileMenu_1un4s_84",aS="_open_1un4s_102",rS="_active_1un4s_122",tn={navbar:ZA,title:JA,menu:tS,menuItems:eS,hamburger:iS,backdrop:nS,mobileMenu:sS,open:aS,active:rS},oS=()=>{const[d,t]=G.useState(!1),i=()=>t(!d),s=()=>t(!1);return z.jsxs("nav",{className:tn.navbar,children:[z.jsx(gi,{to:"/",className:tn.title,children:"Cesar Estevez Peralta"}),z.jsx("div",{className:tn.menu,children:z.jsxs("ul",{className:tn.menuItems,children:[z.jsx("li",{children:z.jsx(gi,{to:"/about",children:"About"})}),z.jsx("li",{children:z.jsx(gi,{to:"/projects",children:"Projects"})}),z.jsx("li",{children:z.jsx(gi,{to:"/stockapi",children:"Stock Market"})}),z.jsx("li",{children:z.jsx(gi,{to:"/resume",children:"Resume"})}),z.jsx("li",{children:z.jsx(gi,{to:"/contact",children:"Contact"})})]})}),z.jsxs("div",{className:`${tn.hamburger} ${d?tn.active:""}`,onClick:i,children:[z.jsx("span",{}),z.jsx("span",{}),z.jsx("span",{})]}),d&&z.jsx("div",{className:tn.backdrop,onClick:s}),z.jsxs("div",{className:`${tn.mobileMenu} ${d?tn.open:""}`,children:[z.jsx(gi,{onClick:s,to:"/about",children:"About"}),z.jsx(gi,{onClick:s,to:"/projects",children:"Projects"}),z.jsx(gi,{onClick:s,to:"/stockapi",children:"Stock Market"}),z.jsx(gi,{onClick:s,to:"/resume",children:"Resume"}),z.jsx(gi,{onClick:s,to:"/contact",children:"Contact"})]})]})},lS="_hero_f98qq_1",cS="_heroContent_f98qq_42",uS="_title_f98qq_47",hS="_subtitle_f98qq_66",dS="_cta_f98qq_76",fS="_socialLinks_f98qq_83",pS="_socialLink_f98qq_83",gS="_primaryBtn_f98qq_106",mS="_secondaryBtn_f98qq_107",yS="_aboutImageWrapper_f98qq_144",bS="_aboutProfileImg_f98qq_152",di={hero:lS,heroContent:cS,title:uS,subtitle:hS,cta:dS,socialLinks:fS,socialLink:pS,primaryBtn:gS,secondaryBtn:mS,aboutImageWrapper:yS,aboutProfileImg:bS},vS="/personal-portfolio/assets/profile-pic-DSNQ0CF8.jpeg",AS={networkGitHub:{url:"https://github.com/CesarJoel04"},networkLinkedIn:{url:"https://www.linkedin.com/in/cesar-estevez-03b599179/"}},SS={programmingLanguages:["Java","JavaScript"],frameworksAndLibraries:["React","Node.js","Express","Spring Boot"],platformsAndTools:["Git","GitHub","NPM","VS Code","IntelliJ"],databases:["MySQL","SQL Server"]},ry={profiles:AS,technicalSkills:SS};function _S(){const[d,t]=G.useState(""),i=ry.profiles;return G.useEffect(()=>{fetch(new URL("data:application/json;base64,ewogICJwb3J0Zm9saW8iOiB7CiAgICAidGl0bGUiOiAiVGhlIFwiQ3JlYXRpdmUgVGVjaG5vbG9naXN0XCIgKEJlc3QgZm9yIERlc2lnbiArIENvZGUpIiwKICAgICJvd25lciI6IHsKICAgICAgIm5hbWUiOiAiQ2VzYXIgRXN0ZXZlei1QZXJhbHRhIiwKICAgICAgInN1bW1hcnkiOiAicG9ydGZvbGlvIHN1bW1hcnkuLi4iLAogICAgICAiaW1hZ2UiOiAiL3NyYy9hc3NldHMvcHJvZmlsZS1waWMuanBlZyIKICAgIH0KICB9LAoKICAiZWR1Y2F0aW9uIjogewogICAgImluc3RpdHV0aW9uIjogIkJlbGxldnVlIFVuaXZlcnNpdHkiLAogICAgImFyZWEiOiAiU29mdHdhcmUgRGV2ZWxvcG1lbnQiLAogICAgInN0dWR5VHlwZSI6ICJCYWNoZWxvciBvZiBTY2llbmNlIiwKICAgICJzdGFydERhdGUiOiAiMjAyMC0wMS0wMSIsCiAgICAiZW5kRGF0ZSI6ICIyMDI0LTA2LTAxIiwKICAgICJsb2NhdGlvbiI6ICJCZWxsZXZ1ZSwgTkUiCiAgfSwKCiAgInByb2ZpbGVzIjogewogICAgIm5ldHdvcmtHaXRIdWIiOiB7CiAgICAgICJuZXR3b3JrIjogIkdpdEh1YiIsCiAgICAgICJ1cmwiOiAiaHR0cHM6Ly9naXRodWIuY29tL0Nlc2FySm9lbDA0IgogICAgfSwKICAgICJuZXR3b3JrTGlua2VkSW4iOiB7CiAgICAgICJuZXR3b3JrIjogIkxpbmtlZEluIiwKICAgICAgInVybCI6ICJodHRwczovL3d3dy5saW5rZWRpbi5jb20vaW4vY2VzYXItZXN0ZXZlei0wM2I1OTkxNzkvIgogICAgfQogIH0sCgogICJ0ZWNobmljYWxTa2lsbHMiOiB7CiAgICAicHJvZ3JhbW1pbmdMYW5ndWFnZXMiOiBbIkphdmEiLCAiSmF2YVNjcmlwdCJdLAogICAgImZyYW1ld29ya3NBbmRMaWJyYXJpZXMiOiBbIlJlYWN0IiwgIk5vZGUuanMiLCAiRXhwcmVzcyIsICJTcHJpbmcgQm9vdCJdLAogICAgInBsYXRmb3Jtc0FuZFRvb2xzIjogWyJHaXQiLCAiR2l0SHViIiwgIk5QTSIsICJWUyBDb2RlIiwgIkludGVsbGlKIl0sCiAgICAiZGF0YWJhc2VzIjogWyJNeVNRTCIsICJTUUwgU2VydmVyIl0KICB9Cn0K",import.meta.url)).then(s=>s.json()).then(s=>{console.log(s),t(s.portfolio.title)})},[]),z.jsxs("section",{className:di.hero,children:[z.jsxs("div",{className:di.heroContent,children:[z.jsx("h1",{className:di.title,children:d}),z.jsx("p",{className:di.subtitle,children:"Software Engineer focused on enterprise systems, cloud integration, automation, and scalable web applications."}),z.jsxs("div",{className:di.cta,children:[z.jsx("a",{href:"#projects",className:di.primaryBtn,children:"View Projects"}),z.jsx("a",{href:"#contact",className:di.secondaryBtn,children:"Contact Me"})]}),z.jsxs("div",{className:di.socialLinks,children:[z.jsx("a",{href:i.networkLinkedIn.url,target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn Profile",className:di.socialLink,children:"LinkedIn"}),z.jsx("a",{href:i.networkGitHub.url,target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",className:di.socialLink,children:"GitHub"})]})]}),z.jsx("figure",{className:di.aboutImageWrapper,children:z.jsx("img",{src:vS,alt:"Portrait of Cesar Estevez",className:di.aboutProfileImg})})]})}const wS="_aboutSection_1ypcl_2",ES="_aboutContainer_1ypcl_20",CS="_aboutImageWrapper_1ypcl_30",TS="_aboutProfileImg_1ypcl_38",xS="_aboutContent_1ypcl_60",MS="_aboutTitle_1ypcl_65",RS="_aboutSubtitle_1ypcl_81",DS="_aboutDescription_1ypcl_89",LS="_aboutSectionBlock_1ypcl_98",OS="_sectionTitle_1ypcl_105",NS="_aboutSkills_1ypcl_120",kS="_skillList_1ypcl_124",BS="_skillTag_1ypcl_133",Ee={aboutSection:wS,aboutContainer:ES,aboutImageWrapper:CS,aboutProfileImg:TS,aboutContent:xS,aboutTitle:MS,aboutSubtitle:RS,aboutDescription:DS,aboutSectionBlock:LS,sectionTitle:OS,aboutSkills:NS,skillList:kS,skillTag:BS},PS="/personal-portfolio/assets/profile-pic-2-B5DabhuE.jpeg";function zS(){const d=ry.technicalSkills,t=[...d.programmingLanguages,...d.frameworksAndLibraries,...d.platformsAndTools,...d.databases];return z.jsx("section",{className:Ee.aboutSection,id:"about",children:z.jsxs("main",{className:Ee.aboutContainer,children:[z.jsx("figure",{className:Ee.aboutImageWrapper,children:z.jsx("img",{src:PS,alt:"Portrait of Cesar Estevez",className:Ee.aboutProfileImg})}),z.jsxs("article",{className:Ee.aboutContent,children:[z.jsxs("header",{children:[z.jsx("h2",{className:Ee.aboutTitle,children:"About Me"}),z.jsx("h4",{className:Ee.aboutSubtitle,children:"Enterprise-Focused Software Developer"})]}),z.jsx("p",{className:Ee.aboutDescription,children:"I am a software developer with a strong interest in building reliable, scalable solutions for enterprise environments. My work focuses on developing and supporting systems that prioritize stability, performance, and long-term maintainability while aligning with business and operational needs."}),z.jsxs("section",{className:Ee.aboutSectionBlock,children:[z.jsx("header",{children:z.jsx("h3",{className:Ee.sectionTitle,children:"Personal Life"})}),z.jsx("p",{children:"Outside of work, I enjoy continuous learning and staying curious about how technology supports everyday systems. I value structure, problem-solving, and personal growth, and I bring that mindset into everything I build."})]}),z.jsxs("section",{className:Ee.aboutSectionBlock,children:[z.jsx("header",{children:z.jsx("h3",{className:Ee.sectionTitle,children:"College Career"})}),z.jsx("p",{children:"I earned a Bachelor of Science in Software Development, where I developed a strong foundation in programming, databases, software architecture, and system design. My academic projects emphasized full-stack development, APIs, and data-driven applications."})]}),z.jsxs("section",{className:Ee.aboutSectionBlock,children:[z.jsx("header",{children:z.jsx("h3",{className:Ee.sectionTitle,children:"Work Career"})}),z.jsx("p",{children:"I have professional experience in enterprise IT and software environments, supporting and developing applications used in production systems. My work includes collaboration with cross-functional teams, system integrations, automation, and maintaining solutions that support business-critical operations."})]}),z.jsx("section",{className:Ee.aboutSkills,"aria-label":"Technical skills",children:z.jsx("ul",{className:Ee.skillList,children:t.map((i,s)=>z.jsx("li",{className:Ee.skillTag,children:i},s))})})]})]})})}const FS="_projects_1tdpq_2",IS="_projectsContainer_1tdpq_46",US="_projectsTitle_1tdpq_52",HS="_projectsGrid_1tdpq_61",jS="_projectCard_1tdpq_68",GS="_projectTitle_1tdpq_92",qS="_projectDescription_1tdpq_100",VS="_projectLink_1tdpq_109",kn={projects:FS,projectsContainer:IS,projectsTitle:US,projectsGrid:HS,projectCard:jS,projectTitle:GS,projectDescription:qS,projectLink:VS};function XS(){const d=[{id:1,title:"Landing Page",description:"A responsive landing page showcasing Colorado's outdoor adventures with mountain landscapes, hiking trails, and wildlife photography. Features embedded YouTube videos and smooth navigation for both laptop and mobile devices.",link:"https://github.com/CesarJoel04/Landing-Page"},{id:2,title:"Inventory Management",description:"Full-stack CRUD application built with Spring Boot, Spring MVC, MySQL, and Thymeleaf. Implements complete product inventory management with create, read, update, and delete operations.",link:"https://github.com/CesarJoel04/Inventory-Management"},{id:3,title:"Moffat Bay Lodge",description:"Full-stack web application for a lodge booking system. Built with React frontend and Node.js backend, featuring MySQL database integration. Collaborative team project implementing user reservations and lodge management.",link:"https://github.com/CesarJoel04/Moffat-Bay"},{id:4,title:"Authentication System",description:"Secure user registration, authentication, and authorization system using Spring Security, Spring Boot, and MySQL. Implements role-based access control, password encryption, and protected routes with Thymeleaf templates.",link:"https://github.com/CesarJoel04/Login_Page"}];return z.jsxs("section",{className:kn.projects,children:[z.jsx("h1",{children:"Projects"}),z.jsx("p",{children:"Explore my portfolio of web development projects showcasing full-stack capabilities"}),z.jsxs("section",{className:kn.projectsContainer,children:[z.jsx("h2",{className:kn.projectsTitle,children:"Featured Projects"}),z.jsx("div",{className:kn.projectsGrid,children:d.map(t=>z.jsxs("article",{className:kn.projectCard,children:[z.jsx("h3",{className:kn.projectTitle,children:t.title}),z.jsx("p",{className:kn.projectDescription,children:t.description}),z.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:kn.projectLink,children:"View on GitHub "})]},t.id))})]})]})}const YS="_header_wsh2n_24",$S="_positive_wsh2n_216",KS="_negative_wsh2n_221",WS="_timestamp_wsh2n_227",QS="_footer_wsh2n_237",At={"stock-search-container":"_stock-search-container_wsh2n_2","stock-search-wrapper":"_stock-search-wrapper_wsh2n_18",header:YS,"api-key-section":"_api-key-section_wsh2n_50","api-key-input-group":"_api-key-input-group_wsh2n_66","api-key-input":"_api-key-input_wsh2n_66","api-key-save-btn":"_api-key-save-btn_wsh2n_80","change-api-key-btn":"_change-api-key-btn_wsh2n_81","api-key-help":"_api-key-help_wsh2n_103","search-section":"_search-section_wsh2n_115","search-input-group":"_search-input-group_wsh2n_119","symbol-input":"_symbol-input_wsh2n_125","search-btn":"_search-btn_wsh2n_134","error-message":"_error-message_wsh2n_155","stock-data":"_stock-data_wsh2n_164","stock-header":"_stock-header_wsh2n_175","stock-grid":"_stock-grid_wsh2n_186","stock-card":"_stock-card_wsh2n_193","card-label":"_card-label_wsh2n_201","card-value":"_card-value_wsh2n_210",positive:$S,negative:KS,timestamp:WS,footer:QS};function ZS(){const[d,t]=G.useState(""),[i,s]=G.useState(null),[r,o]=G.useState(!1),[c,u]=G.useState(""),[h,f]=G.useState(""),[g,y]=G.useState(!0),b=async()=>{if(!d.trim()){u("Please enter a stock symbol");return}if(!h.trim()){u("Please enter your Finnhub API key");return}o(!0),u(""),s(null);try{const w=await fetch(`https://finnhub.io/api/v1/quote?symbol=${d.toUpperCase()}&token=${h}`);if(!w.ok)throw new Error("Failed to fetch stock data");const T=await w.json();if(T.c===0&&T.h===0&&T.l===0){u("Stock symbol not found. Please check the symbol and try again.");return}const x=await fetch(`https://finnhub.io/api/v1/stock/profile2?symbol=${d.toUpperCase()}&token=${h}`);let O={};x.ok&&(O=await x.json()),s({...T,symbol:d.toUpperCase(),name:O.name||d.toUpperCase(),exchange:O.exchange||"N/A"})}catch(w){u("Error fetching stock data. Please check your API key and try again."),console.error(w)}finally{o(!1)}},A=w=>{w.key==="Enter"&&b()},_=i?i.c-i.pc:0,S=i?_/i.pc*100:0,C=_>=0;return z.jsx("div",{className:At["stock-search-container"],children:z.jsxs("div",{className:At["stock-search-wrapper"],children:[z.jsxs("div",{className:At.header,children:[z.jsx("h1",{children:"Stock Market Search"}),z.jsx("p",{children:"Live stock data powered by Finnhub"})]}),g&&z.jsxs("div",{className:At["api-key-section"],children:[z.jsx("label",{children:"Finnhub API Key"}),z.jsxs("div",{className:At["api-key-input-group"],children:[z.jsx("input",{type:"password",value:h,onChange:w=>f(w.target.value),placeholder:"Enter your API key",className:At["api-key-input"]}),z.jsx("button",{onClick:()=>y(!1),className:At["api-key-save-btn"],children:"Save"})]}),z.jsxs("p",{className:At["api-key-help"],children:["Get your free API key at"," ",z.jsx("a",{href:"https://finnhub.io",target:"_blank",rel:"noopener noreferrer",children:"finnhub.io"})]})]}),!g&&z.jsx("button",{onClick:()=>y(!0),className:At["change-api-key-btn"],children:"Change API Key"}),z.jsxs("div",{className:At["search-section"],children:[z.jsxs("div",{className:At["search-input-group"],children:[z.jsx("input",{type:"text",value:d,onChange:w=>t(w.target.value),onKeyPress:A,placeholder:"Enter stock symbol (e.g., AAPL, TSLA, MSFT)",className:At["symbol-input"]}),z.jsxs("button",{onClick:b,disabled:r,className:At["search-btn"],children:[" ",r?"Searching...":"Search"]})]}),c&&z.jsx("div",{className:At["error-message"],children:c}),i&&z.jsxs("div",{className:At["stock-data"],children:[z.jsxs("div",{className:At["stock-header"],children:[z.jsx("h2",{children:i.name}),z.jsxs("p",{children:[i.symbol,"  ",i.exchange]})]}),z.jsxs("div",{className:At["stock-grid"],children:[z.jsxs("div",{className:`${At["stock-card"]} ${At["current-price"]}`,children:[z.jsxs("div",{className:At["card-label"],children:["",z.jsx("span",{children:"Current Price"})]}),z.jsxs("p",{className:At["card-value"],children:["$",i.c.toFixed(2)]})]}),z.jsxs("div",{className:`${At["stock-card"]} ${C?At.positive:At.negative}`,children:[z.jsxs("div",{className:At["card-label"],children:[C?"":"",z.jsx("span",{children:"Change"})]}),z.jsxs("p",{className:At["card-value"],children:[C?"+":"",_.toFixed(2)," (",S.toFixed(2),"%)"]})]}),z.jsxs("div",{className:At["stock-card"],children:[z.jsx("p",{className:At["card-label"],children:"High"}),z.jsxs("p",{className:At["card-value"],children:["$",i.h.toFixed(2)]})]}),z.jsxs("div",{className:At["stock-card"],children:[z.jsx("p",{className:At["card-label"],children:"Low"}),z.jsxs("p",{className:At["card-value"],children:["$",i.l.toFixed(2)]})]}),z.jsxs("div",{className:At["stock-card"],children:[z.jsx("p",{className:At["card-label"],children:"Open"}),z.jsxs("p",{className:At["card-value"],children:["$",i.o.toFixed(2)]})]}),z.jsxs("div",{className:At["stock-card"],children:[z.jsx("p",{className:At["card-label"],children:"Previous Close"}),z.jsxs("p",{className:At["card-value"],children:["$",i.pc.toFixed(2)]})]})]}),z.jsxs("div",{className:At.timestamp,children:["",z.jsxs("span",{children:["Last updated: ",new Date(i.t*1e3).toLocaleString()]})]})]})]}),z.jsx("div",{className:At.footer,children:z.jsx("p",{children:"Popular symbols: AAPL, TSLA, MSFT, GOOGL, AMZN, META, NVDA"})})]})})}const JS="_resume_1kq3t_2",t_="_resumeSection_1kq3t_43",e_="_canvas_1kq3t_80",eh={resume:JS,resumeSection:t_,canvas:e_},De=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fh=[.001,0,0,.001,0,0],ih=1.35,Je={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Bn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ar="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},i_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ph={TRIANGLES:1,LATTICE:2},fe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},he={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ea={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Sl={ERRORS:0,WARNINGS:1,INFOS:5},Sr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ur={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},n_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _l=Sl.WARNINGS;function s_(d){Number.isInteger(d)&&(_l=d)}function a_(){return _l}function wl(d){_l>=Sl.INFOS&&console.info(`Info: ${d}`)}function pt(d){_l>=Sl.WARNINGS&&console.warn(`Warning: ${d}`)}function qt(d){throw new Error(d)}function Mt(d,t){d||qt(t)}function r_(d){switch(d?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function oy(d,t=null,i=null){if(!d)return null;if(i&&typeof d=="string"&&(i.addDefaultProtocol&&d.startsWith("www.")&&d.match(/\./g)?.length>=2&&(d=`http://${d}`),i.tryConvertEncoding))try{d=h_(d)}catch{}const s=t?URL.parse(d,t):URL.parse(d);return r_(s)?s:null}function ly(d,t,i=!1){const s=URL.parse(d);return s?(s.hash=t,s.href):i&&oy(d,"http://example.com")?d.split("#",1)[0]+`${t?`#${t}`:""}`:""}function gt(d,t,i,s=!1){return Object.defineProperty(d,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const ps=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class fm extends ps{constructor(t,i){super(t,"PasswordException"),this.code=i}}class nh extends ps{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class gh extends ps{constructor(t){super(t,"InvalidPDFException")}}class gl extends ps{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class o_ extends ps{constructor(t){super(t,"FormatError")}}class zn extends ps{constructor(t){super(t,"AbortException")}}function cy(d){(typeof d!="object"||d?.length===void 0)&&qt("Invalid argument for bytesToString");const t=d.length,i=8192;if(t<i)return String.fromCharCode.apply(null,d);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),c=d.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Mr(d){typeof d!="string"&&qt("Invalid argument for stringToBytes");const t=d.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=d.charCodeAt(s)&255;return i}function l_(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function c_(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function u_(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return gt(this,"isLittleEndian",c_())}static get isEvalSupported(){return gt(this,"isEvalSupported",u_())}static get isOffscreenCanvasSupported(){return gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return gt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return gt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return gt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return gt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return gt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const sh=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));class et{static makeHexColor(t,i,s){return`#${sh[t]}${sh[i]}${sh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],c=i[2],u=i[3],h=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*c+h,t[s+g+1]=y*o+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],c=i[2],u=i[3],h=i[4],f=i[5],g=t[0],y=t[1],b=t[2],A=t[3];let _=r*g+h,S=_,C=r*b+h,w=C,T=u*y+f,x=T,O=u*A+f,L=O;if(o!==0||c!==0){const N=o*g,P=o*b,$=c*y,K=c*A;_+=$,w+=$,C+=K,S+=K,T+=N,L+=N,O+=P,x+=P}s[0]=Math.min(s[0],_,C,S,w),s[1]=Math.min(s[1],T,O,x,L),s[2]=Math.max(s[2],_,C,S,w),s[3]=Math.max(s[3],T,O,x,L)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],c=t[3],u=s**2+r**2,h=s*o+r*c,f=o**2+c**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-h**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[s,o,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,c,u,h,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,_=y*(y*(y*t+3*f*i)+3*b*s)+A*r,S=y*(y*(y*o+3*f*c)+3*b*u)+A*h;g[0]=Math.min(g[0],_),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],_),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,o,c,u,h,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,c,u,h,-y/g,b);return}const A=g**2-4*y*f;if(A<0)return;const _=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,o,c,u,h,(-g+_)/S,b),this.#t(t,i,s,r,o,c,u,h,(-g-_)/S,b)}static bezierBoundingBox(t,i,s,r,o,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,h),this.#e(t,s,o,u,i,r,c,h,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,r,c,h,3*(-i+3*(r-c)+h),6*(i-2*r+c),3*(r-i),f)}}function h_(d){return decodeURIComponent(escape(d))}let ah=null,pm=null;function d_(d){return ah||(ah=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pm=new Map([["","t"]])),d.replaceAll(ah,(t,i,s)=>i?i.normalize("NFKC"):pm.get(s))}function uy(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),cy(d)}const sa="pdfjs_internal_id_";function f_(d,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!d(s)&&!Number.isInteger(s)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Le(d,t,i){return Math.min(Math.max(d,t),i)}function hy(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(cy(d))}function p_(d){return Uint8Array.fromBase64?Uint8Array.fromBase64(d):Mr(atob(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(i=>{i(d(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(d){return d.reduce((t,i)=>t+i,0)});class _r{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(_r.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const h of o.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class dy{static setupStorage(t,i,s,r,o){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const u=o!=="richText",h=t.div;if(h.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&_r.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const g=[[r,-1,c]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const _=y.children[++g.at(-1)[1]];if(_===null)continue;const{name:S}=_;if(S==="#text"){const w=document.createTextNode(_.value);f.push(w),A.append(w);continue}const C=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,S):document.createElement(S);if(A.append(C),_.attributes&&this.setAttributes({html:C,element:_,storage:i,intent:o,linkService:s}),_.children?.length>0)g.push([_,-1,C]);else if(_.value){const w=document.createTextNode(_.value);u&&_r.shouldBuildText(S)&&f.push(w),C.append(w)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const en="http://www.w3.org/2000/svg";class da{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Rr(d,t="text"){if(gr(d,document.baseURI)){const i=await fetch(d);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Dr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=c,s*=i;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let _,S,C,w;g===0?(_=Math.abs(f-t[1])*s+o,S=Math.abs(h-t[0])*s+c,C=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(_=Math.abs(h-t[0])*s+o,S=Math.abs(f-t[1])*s+c,C=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,_-g*s*h-b*s*f,S-y*s*h-A*s*f],this.width=C,this.height=w}get rawDims(){const t=this.viewBox;return gt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Dr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return et.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];et.applyTransform(i,this.transform);const s=[t[2],t[3]];return et.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return et.applyInverseTransform(s,this.transform),s}}class Nh extends ps{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function El(d){const t=d.length;let i=0;for(;i<t&&d[i].trim()==="";)i++;return d.substring(i,i+5).toLowerCase()==="data:"}function kh(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function g_(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function m_(d,t="document.pdf"){if(typeof d!="string")return t;if(El(d))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(d);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class gm{started=Object.create(null);times=[];time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function gr(d,t){const i=t?URL.parse(d,t):URL.parse(d);return i?.protocol==="http:"||i?.protocol==="https:"}function bi(d){d.preventDefault()}function ee(d){d.preventDefault(),d.stopPropagation()}function y_(d){console.log("Deprecated API usage: "+d)}class mh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(s,r,o,c,u,h))}}function b_(d,{scale:t=1,rotation:i=0}){const{width:s,height:r}=d.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Dr({viewBox:o,userUnit:1,scale:t,rotation:i})}function Lr(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${d}"`),[0,0,0])}function v_(d){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of d.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;d.set(i,Lr(s))}t.remove()}function Wt(d){const{a:t,b:i,c:s,d:r,e:o,f:c}=d.getTransform();return[t,i,s,r,o,c]}function Di(d){const{a:t,b:i,c:s,d:r,e:o,f:c}=d.getTransform().invertSelf();return[t,i,s,r,o,c]}function us(d,t,i=!1,s=!0){if(t instanceof Dr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=d,u=pe.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}s&&d.setAttribute("data-main-rotation",t.rotation)}class ki{constructor(){const{pixelRatio:t}=ki;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let c=1/0,u=1/0,h=1/0;s=ki.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const yh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class A_{static get isDarkMode(){return gt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class S_{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),gt(this,"commentForegroundColor",Lr(s))}}function __(d,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return d=Math.round(d*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[d,t,i]}function mm(d,t){const i=d[0]/255,s=d[1]/255,r=d[2]/255,o=Math.max(i,s,r),c=Math.min(i,s,r),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const h=o-c;switch(t[1]=u<.5?h/(o+c):h/(2-o-c),o){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function bh(d,t){const i=d[0],s=d[1],r=d[2],o=(1-Math.abs(2*r-1))*s,c=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function ym(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function bm(d,t,i){bh(d,i),i.map(ym);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];bh(t,i),i.map(ym);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const vm=new Map;function w_(d,t){const i=d[0]+d[1]*256+d[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=vm.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),c=r.subarray(3,6);mm(d,c);const u=r.subarray(6,9);mm(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),bm(c,u,o)<f){let g,y;h?(g=c[2],y=1):(g=0,y=c[2]);const b=.005;for(;y-g>b;){const A=c[2]=(g+y)/2;h===bm(c,u,o)<f?g=A:y=A}c[2]=h?y:g}return bh(c,o),s=et.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),vm.set(i,s),s}function fy({html:d,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof d=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=d.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else dy.render({xfaHtml:d,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function py(d){const t=new Path2D;if(!d)return t;for(let i=0,s=d.length;i<s;)switch(d[i++]){case ur.moveTo:t.moveTo(d[i++],d[i++]);break;case ur.lineTo:t.lineTo(d[i++],d[i++]);break;case ur.curveTo:t.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);break;case ur.quadraticCurveTo:t.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);break;case ur.closePath:t.closePath();break;default:pt(`Unrecognized drawing path operator: ${d[i-1]}`);break}return t}class br{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,br.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",bi,{signal:i}),t.addEventListener("pointerdown",br.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ee(t)}#h(t){this.#n._focusEventsAllowed=!0,ee(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",bi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",br.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class E_{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",bi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(i?o.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",bi,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function gy(d,t,i){for(const s of i)t.addEventListener(s,d[s].bind(d))}class Bt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Bt.#e||=new Set).add(t)}static setPointer(t,i){Bt.#t||=i,Bt.#i??=t}static setTimeStamp(t){Bt.#n=t}static isSamePointerId(t){return Bt.#t===t}static isSamePointerIdOrRemove(t){return Bt.#t===t?!0:(Bt.#e?.delete(t),!1)}static isSamePointerType(t){return Bt.#i===t}static isInitializedAndDifferentPointerType(t){return Bt.#i!==null&&!Bt.isSamePointerType(t)}static isSameTimeStamp(t){return Bt.#n===t}static isUsingMultiplePointers(){return Bt.#e?.size>=1}static clearPointerType(){Bt.#i=null}static clearPointerIds(){Bt.#t=NaN,Bt.#e=null}static clearTimeStamp(){Bt.#n=NaN}}class C_{#t=0;get id(){return`${Ar}${this.#t++}`}}class Bh{#t=uy();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return gt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Rr(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Bh._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){pt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class T_{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(c&&this.#t[this.#i].type===o){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Or{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=pe.platform;for(const[s,r,o={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),o||ee(i))}}class Ph{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return v_(t),gt(this,"_colors",t)}convert(t){const i=Lr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,c)=>o===i[c]))return Ph._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?et.makeHexColor(...i):t}}class Fn{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new T_;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#C=null;#w=null;#S=null;#x=null;#A=!1;#E=null;#D=new C_;#M=!1;#R=!1;#z=!1;#O=null;#k=null;#F=null;#B=null;#q=null;#T=mt.NONE;#_=new Set;#N=null;#I=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#V=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Fn.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Or([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,c,u,h,f,g,y,b,A,_,S,C){const w=this._signal=this.#t.signal;this.#V=t,this.#Z=i,this.#J=s,this.#a=r,this.#l=o,this.#I=c,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:w}),this.#rt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#C=h.filterFactory,this.#H=f,this.#x=g||null,this.#y=y,this.#v=b,this.#b=A,this.#q=_||null,this.viewParameters={realScale:da.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return gt(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return gt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return gt(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return gt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[r,o]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),o);continue}!s&&!c&&i.set(r,o)}return gt(this,"highlightColors",i)}get highlightColorNames(){return gt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*da.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u}=s,h=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#T===mt.NONE,_=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(mt.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#E||=new E_(this),this.#E.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${Ar}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#E?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#N)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#N&&(this.#E?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#N=i,this.#L({hasSelectedText:!0}),!(this.#T!==mt.HIGHLIGHT&&this.#T!==mt.NONE)&&(this.#T===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===mt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#R){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===mt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#_)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#_){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){pt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;o.push(f)}const c=()=>{for(const h of o)this.#it(h);this.#nt(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){pt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==mt.NONE&&!this.isEditorHandlingKeyboard&&Fn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[xt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#L({isEditing:this.#T!==mt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1,c=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===mt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===mt.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===mt.SIGNATURE&&await this.#I?.loadSignatures(),s&&Bt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===mt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#i.values()){const{annotationElementId:g,hasComment:y,deleted:b}=f;g&&u.add(g),y&&!b&&h.push(f.getData())}for(const f of this.#n){const{id:g,popupRef:y,contentsObj:b}=f;y&&b?.str&&!u.has(g)&&!this.#m.has(g)&&h.push(f)}this.#l?.showSidebar(h)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case xt.CREATE:this.currentLayer.addNewEditor(i);return;case xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#_)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#Y?.get(xt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[xt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#_)i!==t&&i.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#_],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#_)i.unselect();this.#_.clear();for(const i of t)i.isEmpty()||(this.#_.add(i),i.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==mt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[r,o]=this.#j,c=[...this.#_],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#_)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,i||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,o,c,u)=>{if(this.#i.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)s(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==mt.NONE}get imageManager(){return gt(this,"imageManager",new Bh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-r)/c,y:1-(f+y-s)/o,width:b/c,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/o,y:1-(g+b-r)/c,width:y/o,height:b/c});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-r)/c,y:(f-s)/o,width:b/c,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-s)/o,y:(g-r)/c,width:y/o,height:b/c});break}const h=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:_,height:S}of y.getClientRects())_===0||S===0||h.push(u(b,A,_,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#T===mt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Ni{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ni.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ni._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ni.#f.missing),i.setAttribute("data-l10n-id",Ni.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",bi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ni._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ni.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ni.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class tl{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",bi,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#i;s=b+s*g,r=A+r*y}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=o;this.#i._uiManager.editComment(this.#i,c+s*h,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#o=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class Cl{#t;#e=!1;#n=null;#i;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#a=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ki.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ee(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",ee,c),o.addEventListener("pointermove",ee,c),o.addEventListener("pointercancel",ee,c),o.addEventListener("pointerup",ee,c),this.#r?.()}if(ee(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=h,A=y-f,_=b-g,S=c-r,C=u-o,w=Math.hypot(S,C)||1,T=Math.hypot(A,_)||1;if(!this.#e&&Math.abs(T-w)<=Cl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!this.#e){this.#e=!0;return}const x=[(r+c)/2,(o+u)/2];this.#a?.(x,T,w)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class rt{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#C=0;#w=0;#S=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ph;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=rt.prototype._resizeWithKeyboard,i=Fn.TRANSLATE_SMALL,s=Fn.TRANSLATE_BIG;return gt(this,"_resizerKeyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return gt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new x_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(rt._l10n??=t,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#D([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=rt,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=s,h*=r,o*=s,c*=r,this._mustFixPosition)switch(t){case 0:o=Le(o,0,s-u),c=Le(c,0,r-h);break;case 90:o=Le(o,0,s-h),c=Le(c,u,r);break;case 180:o=Le(o,u,s),c=Le(c,h,r);break;case 270:o=Le(o,h,s),c=Le(c,0,r-u);break}this.x=o/=s,this.y=c/=r;const[f,g]=this.getBaseTranslation();o+=f,c+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return rt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return rt.#M(t,i,360-this.parentRotation)}#R(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",bi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=pe.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ee,{passive:!1,signal:c}),window.addEventListener("contextmenu",bi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,h=this.height;o===t&&c===i&&u===s&&h===r||this.addCommands({cmd:this.#k.bind(this,o,c,u,h),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,f=rt.MIN_SIZE/s,g=rt.MIN_SIZE/r,y=this.#R(this.rotation),b=(k,q)=>[y[0]*k+y[2]*q,y[1]*k+y[3]*q],A=this.#R(360-this.rotation),_=(k,q)=>[A[0]*k+A[2]*q,A[1]*k+A[3]*q];let S,C,w=!1,T=!1;switch(t){case"topLeft":w=!0,S=(k,q)=>[0,0],C=(k,q)=>[k,q];break;case"topMiddle":S=(k,q)=>[k/2,0],C=(k,q)=>[k/2,q];break;case"topRight":w=!0,S=(k,q)=>[k,0],C=(k,q)=>[0,q];break;case"middleRight":T=!0,S=(k,q)=>[k,q/2],C=(k,q)=>[0,q/2];break;case"bottomRight":w=!0,S=(k,q)=>[k,q],C=(k,q)=>[0,0];break;case"bottomMiddle":S=(k,q)=>[k/2,q],C=(k,q)=>[k/2,0];break;case"bottomLeft":w=!0,S=(k,q)=>[0,q],C=(k,q)=>[k,0];break;case"middleLeft":T=!0,S=(k,q)=>[0,q/2],C=(k,q)=>[k,q/2];break}const x=S(u,h),O=C(u,h);let L=b(...O);const N=rt._round(o+L[0]),P=rt._round(c+L[1]);let $=1,K=1,J,Q;if(i.fromKeyboard)({deltaX:J,deltaY:Q}=i);else{const{screenX:k,screenY:q}=i,[Z,yt]=this.#l;[J,Q]=this.screenToPageTranslation(k-Z,q-yt),this.#l[0]=k,this.#l[1]=q}if([J,Q]=_(J/s,Q/r),w){const k=Math.hypot(u,h);$=K=Math.max(Math.min(Math.hypot(O[0]-x[0]-J,O[1]-x[1]-Q)/k,1/u,1/h),f/u,g/h)}else T?$=Le(Math.abs(O[0]-x[0]-J),f,1)/u:K=Le(Math.abs(O[1]-x[1]-Q),g,1)/h;const ht=rt._round(u*$),Rt=rt._round(h*K);L=b(...C(ht,Rt));const dt=N-L[0],Dt=P-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=Rt,this.x=dt,this.y=Dt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new br(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Ni.initialize(rt._l10n),this.#n=new Ni(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new tl(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new tl(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new tl(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new tl(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),gy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new Cl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const c=this.#R(this.rotation),u=(N,P)=>[c[0]*N+c[2]*P,c[1]*N+c[3]*P],[h,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,_=rt.MIN_SIZE/h,S=rt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/A),_/b,S/A);const C=rt._round(b*o),w=rt._round(A*o);if(C===b&&w===A)return;this.#u||=[g,y,b,A];const T=u(b/2,A/2),x=rt._round(g+T[0]),O=rt._round(y+T[1]),L=u(C/2,w/2);this.x=x-L[0],this.y=O-L[1],this.width=C,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#I(t);return}this.#N(t)}#N(t){const{isMac:i}=pe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#N(f),s&&this._onStopDragging()};i&&(this.#C=t.clientX,this.#w=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){ee(f);return}const[A,_]=this.screenToPageTranslation(g-this.#C,y-this.#w);this.#C=g,this.#w=y,this._uiManager.dragSelectedEditors(A,_)},c),window.addEventListener("touchmove",ee,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&u(f),ee(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ee(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,g=i/r,y=this.x*o,b=this.y*c,A=this.width*o,_=this.height*c;switch(s){case 0:return[y+f+u,c-b-g-_+h,y+f+A+u,c-b-g+h];case 90:return[y+g+u,c-b+f+h,y+g+_+u,c-b+f+A+h];case 180:return[y-f-A+u,c-b+g+h,y-f+u,c-b+g+_+h];case 270:return[y-g-_+u,c-b-f-A+h,y-g+u,c-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,c]=t,u=o-s,h=c-r;switch(this.rotation){case 0:return[s,i-c,u,h];case 90:return[s,i-r,h,u];case 180:return[o,i-r,u,h];case 270:return[o,i-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&r>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,h,f,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=h/c,r.width=f/o,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#x?.destroy(),this.#x=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,c]=this.getPDFRect();return[rt._round(s+(o-s)*t),rt._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#Y.bind(this),u=this.#X.bind(this),h=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,g),{signal:h}),f.setAttribute("data-l10n-id",rt._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",rt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){rt._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#P(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},rt._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class x_ extends rt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Am=3285377520,fi=4294901760,Li=65535;class my{constructor(t){this.h1=t?t&4294967295:Am,this.h2=t?t&4294967295:Am}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,C=t.length;S<C;S++){const w=t.charCodeAt(S);w<=255?i[s++]=w:(i[s++]=w>>>8,i[s++]=w&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,h=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Li,_=b&Li;for(let S=0;S<r;S++)S&1?(u=c[S],u=u*y&fi|u*A&Li,u=u<<15|u>>>17,u=u*b&fi|u*_&Li,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[S],h=h*y&fi|h*A&Li,h=h<<15|h>>>17,h=h*b&fi|h*_&Li,g^=h,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&fi|u*A&Li,u=u<<15|u>>>17,u=u*b&fi|u*_&Li,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&fi|t*36045&Li,i=i*4283543511&fi|((i<<16|t>>>16)*2950163797&fi)>>>16,t^=i>>>1,t=t*444984403&fi|t*60499&Li,i=i*3301882366&fi|((i<<16|t>>>16)*3120437893&fi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const vh=Object.freeze({map:null,hash:"",transfer:void 0});class zh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof rt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof rt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(i))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof rt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yy(this)}get serializable(){if(this.#i.size===0)return vh;const t=new Map,i=new my,s=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const h=u instanceof rt?u.serialize(!1,r):u;h&&(t.set(c,h),i.update(`${c}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:vh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof rt)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,c]of i)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class yy extends zh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){qt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return gt(this,"modifiedIds",{ids:new Set,hash:""})}}class M_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Mt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw pt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return gt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return gt(this,"isSyncFontLoadingSupported",De||pe.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Mt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return gt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(O,L){return O.charCodeAt(L)<<24|O.charCodeAt(L+1)<<16|O.charCodeAt(L+2)<<8|O.charCodeAt(L+3)&255}function r(O,L,N,P){const $=O.substring(0,L),K=O.substring(L+N);return $+P+K}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function g(O,L){if(++f>30){pt("Load test font never loaded."),L();return}if(h.font="30px "+O,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(g.bind(null,O,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const _=16,S=1482184792;let C=s(b,_);for(o=0,c=y.length-3;o<c;o+=4)C=C-S+s(y,o)|0;o<y.length&&(C=C-S+s(y+"XXX",o)|0),b=r(b,_,4,l_(C));const w=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(T);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const O of[t.loadedName,y]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=O,x.append(L)}this._document.body.append(x),g(y,()=>{x.remove(),i.complete()})}}class R_{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${hy(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){pt(`getPathGenerator - ignoring character: "${c}".`)}const o=py(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){gt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){gt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class oa{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of oa.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const o=new ArrayBuffer(r),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of oa.strings){const g=s[f],y=g.length;u.setUint32(h,y),c.set(g,h+4),h+=4+y}return Mt(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Mt(t<oa.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class la{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of la.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let o,c,u=1+r;t.style&&(o=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,r=0;for(const b of la.strings){const A=s[b],_=A.length;r+=4+_,g.setUint32(y,_),f.set(A,y+4),y+=4+_}return g.setUint32(y-r-4,r),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Mt(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Mt(t<la.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class Ht{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#o;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Mt(t<Ht.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Mt(t<Ht.numbers.length,"Invalid number index"),this.#o.getFloat64(Ht.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Ht.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Ht.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Ht.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Mt(t<Ht.strings.length,"Invalid string index");let i=Ht.#r+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ht.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=Ht.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Ht.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#a,t+4,r)),new oa(o.buffer)}get systemFontInfo(){let t=Ht.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,t+4,s)),new la(r.buffer)}static write(t){const i=t.systemFontInfo?la.write(t.systemFontInfo):null,s=t.cssFontInfo?oa.write(t.cssFontInfo):null,r=new TextEncoder,o={};let c=0;for(const S of Ht.strings)o[S]=r.encode(t[S]),c+=4+o[S].length;const u=Ht.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;const b=Ht.bools.length;let A=0,_=0;for(let S=0;S<b;S++){const C=t[Ht.bools[S]];A|=(C===void 0?0:C?2:1)<<_,_+=2,(_===8||S===b-1)&&(g.setUint8(y++,A),A=0,_=0)}Mt(y===Ht.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Ht.numbers)g.setFloat64(y,t[S]),y+=8;if(Mt(y===Ht.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Mt(y===Ht.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Mt(y===Ht.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Mt(y===Ht.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Ht.#r,0),y+=4;for(const S of Ht.strings){const C=o[S],w=C.length;g.setUint32(y,w),f.set(C,y+4),y+=4+w}if(g.setUint32(Ht.#r,y-Ht.#r-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Mt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Mt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Mt(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}}class ye{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],o=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,h=t[1],r=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),y=Math.floor(o.length/3),b=c.length,A=u.length;let _=0;for(const L of u)_+=1,_=Math.ceil(_/4)*4,_+=4+L.coords.length*4,_+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(_+=4);const S=20+g*8+y*3+b*8+(s?16:0)+(f?3:0)+_,C=new ArrayBuffer(S),w=new DataView(C),T=new Uint8Array(C);w.setUint8(ye.#t,i),w.setUint8(ye.#e,s?1:0),w.setUint8(ye.#n,f?1:0),w.setUint8(ye.#i,h),w.setUint32(ye.#r,g,!0),w.setUint32(ye.#a,y,!0),w.setUint32(ye.#s,b,!0),w.setUint32(ye.#o,A,!0);let x=20;new Float32Array(C,x,g*2).set(r),x+=g*8,T.set(o,x),x+=y*3;for(const[L,N]of c)w.setFloat32(x,L,!0),x+=4,w.setUint32(x,parseInt(N.slice(1),16),!0),x+=4;if(s)for(const L of s)w.setFloat32(x,L,!0),x+=4;f&&(T.set(f,x),x+=3);for(let L=0;L<u.length;L++){const N=u[L];w.setUint8(x,N.type),x+=1,x=Math.ceil(x/4)*4,w.setUint32(x,N.coords.length,!0),x+=4,new Int32Array(C,x,N.coords.length).set(N.coords),x+=N.coords.length*4,w.setUint32(x,N.colors.length,!0),x+=4,new Int32Array(C,x,N.colors.length).set(N.colors),x+=N.colors.length*4,N.verticesPerRow!==void 0&&(w.setUint32(x,N.verticesPerRow,!0),x+=4)}return C}getIR(){const t=this.view,i=this.data[ye.#t],s=!!this.data[ye.#e],r=!!this.data[ye.#n],o=t.getUint32(ye.#r,!0),c=t.getUint32(ye.#a,!0),u=t.getUint32(ye.#s,!0),h=t.getUint32(ye.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let C=0;C<u;++C){const w=t.getFloat32(f,!0);f+=4;const T=t.getUint32(f,!0);f+=4,b.push([w,`#${T.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let C=0;C<4;++C)A.push(t.getFloat32(f,!0)),f+=4}let _=null;r&&(_=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let C=0;C<h;++C){const w=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const T=t.getUint32(f,!0);f+=4;const x=new Int32Array(this.buffer,f,T);f+=T*4;const O=t.getUint32(f,!0);f+=4;const L=new Int32Array(this.buffer,f,O);f+=O*4;const N={type:w,coords:x,colors:L};w===ph.LATTICE&&(N.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(N)}if(i===1)return["RadialAxial","axial",A,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const C=this.data[ye.#i];let w=null;if(g.length>0){let T=g[0],x=g[0],O=g[1],L=g[1];for(let N=0;N<g.length;N+=2){const P=g[N],$=g[N+1];T=T>P?P:T,O=O>$?$:O,x=x<P?P:x,L=L<$?$:L}w=[T,O,x,L]}return["Mesh",C,g,y,S,w,A,_]}throw new Error(`Unsupported pattern kind: ${i}`)}}class D_{static write(t){let i,s;return pe.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return pe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function L_(d){if(d instanceof URL)return d.href;if(typeof d=="string"){if(De)return d;const t=URL.parse(d,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function O_(d){if(De&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Mr(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d?.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function el(d){if(typeof d!="string")return null;if(d.endsWith("/"))return d;throw new Error(`Invalid factory url: "${d}" must include trailing slash.`)}const Ah=d=>typeof d=="object"&&Number.isInteger(d?.num)&&d.num>=0&&Number.isInteger(d?.gen)&&d.gen>=0,N_=d=>typeof d=="object"&&typeof d?.name=="string",k_=f_.bind(null,Ah,N_);class B_{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const il={DATA:1,ERROR:2},ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Sm(){}function He(d){if(d instanceof zn||d instanceof gh||d instanceof fm||d instanceof gl||d instanceof nh)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new zn(d.message);case"InvalidPDFException":return new gh(d.message);case"PasswordException":return new fm(d.message,d.code);case"ResponseException":return new gl(d.message,d.status,d.missing);case"UnknownErrorException":return new nh(d.message,d.details)}return new nh(d.message,d.toString())}class mr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===il.DATA)r.resolve(t.data);else if(t.callback===il.ERROR)r.reject(He(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:il.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:il.ERROR,callbackId:t.callbackId,reason:He(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,h.postMessage({sourceName:c,targetName:u,stream:ue.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Mt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:ue.CANCEL,streamId:o,reason:He(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ue.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Mt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.ERROR,streamId:i,reason:He(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:i,reason:He(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ue.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(He(t.reason));break;case ue.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(He(t.reason));break;case ue.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Sm).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,reason:He(f)})});break;case ue.ENQUEUE:if(Mt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ue.CLOSE:if(Mt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case ue.ERROR:Mt(c,"error should have stream controller"),c.controller.error(He(t.reason)),this.#r(c,i);break;case ue.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(He(t.reason)),this.#r(c,i);break;case ue.CANCEL:if(!u)break;const h=He(t.reason);Promise.try(u.onCancel||Sm,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:i,reason:He(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class by{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){qt("Abstract method `_createCanvas` called.")}}class P_ extends by{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class vy{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class _m extends vy{async _fetch(t){const i=await Rr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Mr(i)}}class Ay{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class z_ extends Ay{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(en,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(en,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=h[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=i[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(El(i)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ly(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,o]=this.#d(t),c=t.length===1?s:`${s}${r}${o}`;if(i=this.#o.get(c),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(c,h);const f=this.#g(u);return this.#p(s,r,o,f),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const c=this.#v(t);t=et.makeHexColor(...c);const u=this.#v(i);if(i=et.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const h=new Array(256);for(let A=0;A<=255;A++){const _=A/255;h[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const f=h.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(A,_)=>{const S=c[A]/255,C=u[A]/255,w=new Array(_+1);for(let T=0;T<=_;T++)w[T]=S+T/_*(C-S);return w.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,o){const c=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const _=(w,T,x)=>{const O=new Array(256),L=(y-g)/x,N=w/255,P=(T-w)/(255*x);let $=0;for(let K=0;K<=x;K++){const J=Math.round(g+K*L),Q=N+K*P;for(let ht=$;ht<=J;ht++)O[ht]=Q;$=J+1}for(let K=$;K<256;K++)O[K]=O[$-1];return O.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,C=u.filter=this.#g(S);return this.#m(C),this.#p(_(b[0],A[0],5),_(b[1],A[1],5),_(b[2],A[2],5),C),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(en,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(en,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const o=this.#r.createElementNS(en,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(en,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Lr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Sy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class wm extends Sy{async _fetch(t){const i=await Rr(t,"arraybuffer");return new Uint8Array(i)}}class _y{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class Em extends _y{async _fetch(t){const i=await Rr(t,"arraybuffer");return new Uint8Array(i)}}De&&pt("Please use the `legacy` build in Node.js environments.");async function Fh(d){const i=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(i)}class F_ extends Ay{}class I_ extends by{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class U_ extends vy{async _fetch(t){return Fh(t)}}class H_ extends Sy{async _fetch(t){return Fh(t)}}class j_ extends _y{async _fetch(t){return Fh(t)}}const ta="__forcedDependency",{floor:Cm,ceil:Tm}=Math;function nl(d,t,i,s,r,o){d[t*4+0]=Math.min(d[t*4+0],i),d[t*4+1]=Math.min(d[t*4+1],s),d[t*4+2]=Math.max(d[t*4+2],r),d[t*4+3]=Math.max(d[t*4+3],o)}const Sh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class G_{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Sh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const sl=(d,t)=>{if(!d)return;let i=d.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},d.set(t,i)),i};class q_{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ta]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Sh,i.length)):this.#u.fill(Sh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ta]:{__proto__:this.#e[ta]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(sl(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(sl(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(sl(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(et.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(ta,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(ta,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,o,c){const u=et.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([s,o,r,c],u,h);const f=et.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,o,c){const u=this.#s;if(u[0]===1/0)return this;const h=et.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return et.axialAlignedBoundingBox([s,o,r,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([s,o,r,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,c=0,u){const h=s.bbox;let f,g;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],et.axialAlignedBoundingBox(h,s.fontMatrix,g),(r!==1||o!==0||c!==0)&&et.scaleMinMax([r,0,0,-r,o,c],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,o=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[ta]),this.#p){const s=sl(this.#p,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Cm(this.#o[0]*256/this.#f),r=Cm(this.#o[1]*256/this.#m),o=Tm(this.#o[2]*256/this.#f),c=Tm(this.#o[3]*256/this.#m);nl(this.#g,t,s,r,o,c);for(const u of this.#l)u!==t&&nl(this.#g,u,s,r,o,c);for(const u of this.#i)u!==t&&nl(this.#g,u,s,r,o,c);for(const u of this.#r)u!==t&&nl(this.#g,u,s,r,o,c);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new G_(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class ml{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof ml&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,c),this}recordBBox(t,i,s,r,o,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,c),this}recordCharacterBBox(t,i,s,r,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const pi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _h(d,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),d.clip(r)}class Ih{isModifyingCurrentTransform(){return!1}getPattern(){qt("Abstract method `getPattern` called.")}}class V_ extends Ih{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,o=this._p1;if(i&&(r=r.slice(),o=o.slice(),et.applyTransform(r,i),et.applyTransform(o,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(i){const h=new Float32Array(2);et.singularValueDecompose2dScale(i,h),c*=h[0],u*=h[0]}s=t.createRadialGradient(r[0],r[1],c,o[0],o[1],u)}for(const c of this._colorStops)s.addColorStop(c[0],c[1]);return s}getPattern(t,i,s,r){let o;if(r===Te.STROKE||r===Te.FILL){if(this.isOriginBased()){let b=et.transform(s,i.baseTransform);this.matrix&&(b=et.transform(b,this.matrix));const A=.001,_=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),C=(b[0]*b[2]+b[1]*b[3])/(_*S);if(Math.abs(C)<A)if(this.isRadial()){if(Math.abs(_-S)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=i.current.getClippedPathBoundingBox(r,Wt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,h),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=et.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),_h(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else _h(t,this._bbox),o=this._createGradient(t);return o}}function rh(d,t,i,s,r,o,c,u){const h=t.coords,f=t.colors,g=d.data,y=d.width*4;let b;h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=o,o=c,c=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=c,c=u,u=b),h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=o,o=c,c=b);const A=(h[i]+t.offsetX)*t.scaleX,_=(h[i+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,C=(h[s+1]+t.offsetY)*t.scaleY,w=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(_>=T)return;const x=f[o],O=f[o+1],L=f[o+2],N=f[c],P=f[c+1],$=f[c+2],K=f[u],J=f[u+1],Q=f[u+2],ht=Math.round(_),Rt=Math.round(T);let dt,Dt,k,q,Z,yt,St,R;for(let j=ht;j<=Rt;j++){if(j<C){const lt=j<_?0:(_-j)/(_-C);dt=A-(A-S)*lt,Dt=x-(x-N)*lt,k=O-(O-P)*lt,q=L-(L-$)*lt}else{let lt;j>T?lt=1:C===T?lt=0:lt=(C-j)/(C-T),dt=S-(S-w)*lt,Dt=N-(N-K)*lt,k=P-(P-J)*lt,q=$-($-Q)*lt}let W;j<_?W=0:j>T?W=1:W=(_-j)/(_-T),Z=A-(A-w)*W,yt=x-(x-K)*W,St=O-(O-J)*W,R=L-(L-Q)*W;const tt=Math.round(Math.min(dt,Z)),ot=Math.round(Math.max(dt,Z));let ut=y*j+tt*4;for(let lt=tt;lt<=ot;lt++)W=(dt-lt)/(dt-Z),W<0?W=0:W>1&&(W=1),g[ut++]=Dt-(Dt-yt)*W|0,g[ut++]=k-(k-St)*W|0,g[ut++]=q-(q-R)*W|0,g[ut++]=255}}function X_(d,t,i){const s=t.coords,r=t.colors;let o,c;switch(t.type){case ph.LATTICE:const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<h;o++){let g=o*u;for(let y=0;y<f;y++,g++)rh(d,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),rh(d,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case ph.TRIANGLES:for(o=0,c=s.length;o<c;o+=3)rh(d,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class Y_ extends Ih{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,_=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/_},C=y+4,w=b+4,T=s.getCanvas("mesh",C,w),x=T.context,O=x.createImageData(y,b);if(i){const N=O.data;for(let P=0,$=N.length;P<$;P+=4)N[P]=i[0],N[P+1]=i[1],N[P+2]=i[2],N[P+3]=255}for(const N of this._figures)X_(O,N,S);return x.putImageData(O,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:h-2*_,scaleX:A,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){_h(t,this._bbox);const o=new Float32Array(2);if(r===Te.SHADING)et.singularValueDecompose2dScale(Wt(t),o);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;et.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=h}else et.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,r===Te.SHADING?null:this._background,i.cachedCanvases);return r!==Te.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class $_ extends Ih{getPattern(){return"hotpink"}}function K_(d){switch(d[0]){case"RadialAxial":return new V_(d);case"Mesh":return new Y_(d);case"Dummy":return new $_}throw new Error(`Unknown IR type: ${d[0]}`)}const xm={COLORED:1,UNCOLORED:2};class Uh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),wl("TilingType: "+c);const y=s[0],b=s[1],A=s[2],_=s[3],S=A-y,C=_-b,w=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,w);const[T,x]=w;et.singularValueDecompose2dScale(this.baseTransform,w);const O=T*w[0],L=x*w[1];let N=S,P=C,$=!1,K=!1;const J=Math.ceil(f*O),Q=Math.ceil(g*L),ht=Math.ceil(S*O),Rt=Math.ceil(C*L);J>=ht?N=f:$=!0,Q>=Rt?P=g:K=!0;const dt=this.getSizeAndScale(N,this.ctx.canvas.width,O),Dt=this.getSizeAndScale(P,this.ctx.canvas.height,L),k=t.cachedCanvases.getCanvas("pattern",dt.size,Dt.size),q=k.context,Z=h.createCanvasGraphics(q,i);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,o,u),q.translate(-dt.scale*y,-Dt.scale*b),Z.transform(0,dt.scale,0,0,Dt.scale,0,0),q.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,y,b,A,_),Z.baseTransform=Wt(Z.ctx),Z.executeOperatorList(r),Z.endDrawing(),Z.dependencyTracker?.restore(),q.restore(),$||K){const yt=k.canvas;$&&(N=f),K&&(P=g);const St=this.getSizeAndScale(N,this.ctx.canvas.width,O),R=this.getSizeAndScale(P,this.ctx.canvas.height,L),j=St.size,W=R.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",j,W),ot=tt.context,ut=$?Math.floor(S/f):0,lt=K?Math.floor(C/g):0;for(let ie=0;ie<=ut;ie++)for(let jt=0;jt<=lt;jt++)ot.drawImage(yt,j*ie,W*jt,j,W,0,0,j,W);return{canvas:tt.canvas,scaleX:St.scale,scaleY:R.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:dt.scale,scaleY:Dt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(Uh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const c=r-i,u=o-s;t.ctx.rect(i,s,c,u),et.axialAlignedBoundingBox([i,s,r,o],Wt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case xm.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case xm.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new o_(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let c=s;r!==Te.SHADING&&(c=et.transform(c,i.baseTransform),this.matrix&&(c=et.transform(c,this.matrix)));const u=this.createPatternCanvas(i,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function W_({src:d,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=pe.isLittleEndian?4278190080:255,[h,f]=c?[o,u]:[u,o],g=s>>3,y=s&7,b=d.length;i=new Uint32Array(i.buffer);let A=0;for(let _=0;_<r;_++){for(const C=t+g;t<C;t++){const w=t<b?d[t]:255;i[A++]=w&128?f:h,i[A++]=w&64?f:h,i[A++]=w&32?f:h,i[A++]=w&16?f:h,i[A++]=w&8?f:h,i[A++]=w&4?f:h,i[A++]=w&2?f:h,i[A++]=w&1?f:h}if(y===0)continue;const S=t<b?d[t++]:255;for(let C=0;C<y;C++)i[A++]=S&1<<7-C?f:h}return{srcPos:t,destPos:A}}const Mm=16,Rm=100,Q_=15,Dm=10,je=16,oh=new DOMMatrix,ei=new Float32Array(2),aa=new Float32Array([1/0,1/0,-1/0,-1/0]);function Z_(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},d.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},d.transform=function(i,s,r,o,c,u){t.transform(i,s,r,o,c,u),this.__originalTransform(i,s,r,o,c,u)},d.setTransform=function(i,s,r,o,c,u){t.setTransform(i,s,r,o,c,u),this.__originalSetTransform(i,s,r,o,c,u)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},d.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},d.bezierCurveTo=function(i,s,r,o,c,u){t.bezierCurveTo(i,s,r,o,c,u),this.__originalBezierCurveTo(i,s,r,o,c,u)},d.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class J_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function al(d,t,i,s,r,o,c,u,h,f){const[g,y,b,A,_,S]=Wt(d);if(y===0&&b===0){const T=c*g+_,x=Math.round(T),O=u*A+S,L=Math.round(O),N=(c+h)*g+_,P=Math.abs(Math.round(N)-x)||1,$=(u+f)*A+S,K=Math.abs(Math.round($)-L)||1;return d.setTransform(Math.sign(g),0,0,Math.sign(A),x,L),d.drawImage(t,i,s,r,o,0,0,P,K),d.setTransform(g,y,b,A,_,S),[P,K]}if(g===0&&A===0){const T=u*b+_,x=Math.round(T),O=c*y+S,L=Math.round(O),N=(u+f)*b+_,P=Math.abs(Math.round(N)-x)||1,$=(c+h)*y+S,K=Math.abs(Math.round($)-L)||1;return d.setTransform(0,Math.sign(y),Math.sign(b),0,x,L),d.drawImage(t,i,s,r,o,0,0,K,P),d.setTransform(g,y,b,A,_,S),[K,P]}d.drawImage(t,i,s,r,o,c,u,h,f);const C=Math.hypot(g,y),w=Math.hypot(b,A);return[C*h,w*f]}class Lm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=fh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=fe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=aa.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,i=null){const s=this.minMax.slice();if(t===Te.STROKE){i||qt("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(i,ei);const r=ei[0]*this.lineWidth/2,o=ei[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(aa,0)}getClippedPathBoundingBox(t=Te.FILL,i=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Om(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%je,o=(i-r)/je,c=r===0?o:o+1,u=d.createImageData(s,je);let h=0,f;const g=t.data,y=u.data;let b,A,_,S;if(t.kind===hl.GRAYSCALE_1BPP){const C=g.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),T=w.length,x=s+7>>3,O=4294967295,L=pe.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(_=b<o?je:r,f=0,A=0;A<_;A++){const N=C-h;let P=0;const $=N>x?s:N*8-7,K=$&-8;let J=0,Q=0;for(;P<K;P+=8)Q=g[h++],w[f++]=Q&128?O:L,w[f++]=Q&64?O:L,w[f++]=Q&32?O:L,w[f++]=Q&16?O:L,w[f++]=Q&8?O:L,w[f++]=Q&4?O:L,w[f++]=Q&2?O:L,w[f++]=Q&1?O:L;for(;P<$;P++)J===0&&(Q=g[h++],J=128),w[f++]=Q&J?O:L,J>>=1}for(;f<T;)w[f++]=0;d.putImageData(u,0,b*je)}}else if(t.kind===hl.RGBA_32BPP){for(A=0,S=s*je*4,b=0;b<o;b++)y.set(g.subarray(h,h+S)),h+=S,d.putImageData(u,0,A),A+=je;b<c&&(S=s*r*4,y.set(g.subarray(h,h+S)),d.putImageData(u,0,A))}else if(t.kind===hl.RGB_24BPP)for(_=je,S=s*_,b=0;b<c;b++){for(b>=o&&(_=r,S=s*_),f=0,A=S;A--;)y[f++]=g[h++],y[f++]=g[h++],y[f++]=g[h++],y[f++]=255;d.putImageData(u,0,b*je)}else throw new Error(`bad image kind: ${t.kind}`)}function Nm(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%je,o=(i-r)/je,c=r===0?o:o+1,u=d.createImageData(s,je);let h=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<o?je:r;({srcPos:h}=W_({src:f,srcPos:h,dest:g,width:s,height:b,nonBlackColor:0})),d.putImageData(u,0,y*je)}}function hr(d,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)d[s]!==void 0&&(t[s]=d[s]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function rl(d){d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0);const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}function km(d,t){if(t)return!0;et.singularValueDecompose2dScale(d,ei);const i=Math.fround(ki.pixelRatio*da.PDF_TO_CSS_UNITS);return ei[0]<=i&&ei[1]<=i}const t1=["butt","round","square"],e1=["miter","round","bevel"],i1={},Bm={};class ca{constructor(t,i,s,r,o,{optionalContentConfig:c,markedContentStack:u=null},h,f,g){this.ctx=t,this.current=new Lm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new J_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Wt(this.compositeCtx))}this.ctx.save(),rl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Wt(this.ctx)}executeOperatorList(t,i,s,r,o){const c=t.argsArray,u=t.fnArray;let h=i||0;const f=c.length;if(f===h)return h;const g=f-h>Dm&&typeof s=="function",y=g?Date.now()+Q_:0;let b=0;const A=this.commonObjs,_=this.objs;let S,C;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!o||o(h))if(S=u[h],C=c[h]??null,S!==Sr.dependency)C===null?this[S](h):this[S](h,...C);else for(const w of C){this.dependencyTracker?.recordNamedData(w,h);const T=w.startsWith("g_")?A:_;if(!T.has(w))return T.get(w,s),h}if(h++,h===f)return h;if(g&&++b>Dm){if(Date.now()>y)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,f="prescale1",g,y;for(;o>2&&u>1||c>2&&h>1;){let b=u,A=h;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/A),g=this.cachedCanvases.getCanvas(f,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,h,0,0,b,A),t=g.canvas,u=b,h=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,c=this.current.fillColor,u=this.current.patternFill,h=Wt(s);let f,g,y,b;if((i.bitmap||i.data)&&i.count>1){const J=i.bitmap||i.data.buffer;g=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const Q=f.get(g);if(Q&&!u){const ht=Math.round(Math.min(h[0],h[2])+h[4]),Rt=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,pi.transformAndFill),{canvas:Q,offsetX:ht,offsetY:Rt}}y=Q}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),Nm(b.context,i));let A=et.transform(h,[1/r,0,0,-1/o,0,0]);A=et.transform(A,[1,0,0,1,0,-o]);const _=aa.slice();et.axialAlignedBoundingBox([0,0,r,o],A,_);const[S,C,w,T]=_,x=Math.round(w-S)||1,O=Math.round(T-C)||1,L=this.cachedCanvases.getCanvas("fillCanvas",x,O),N=L.context,P=S,$=C;N.translate(-P,-$),N.transform(...A),y||(y=this._scaleImage(b.canvas,Di(N)),y=y.img,f&&u&&f.set(g,y)),N.imageSmoothingEnabled=km(Wt(N),i.interpolate),al(N,y,0,0,y.width,y.height,0,0,r,o),N.globalCompositeOperation="source-in";const K=et.transform(Di(N),[1,0,0,1,-P,-$]);return N.fillStyle=u?c.getPattern(s,this,K,Te.FILL,t):c,N.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,L.canvas)),this.dependencyTracker?.recordDependencies(t,pi.transformAndFill),{canvas:L.canvas,offsetX:Math.round(P),offsetY:Math.round($)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=t1[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=e1[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),hr(this.suspendedCtx,c),Z_(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],c=r[1],u=r[2]-o,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,c,u,h,f,g,y){let b=t.canvas,A=h-g,_=f-y;if(c)if(A<0||_<0||A+s>b.width||_+r>b.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,r),w=C.context;w.drawImage(b,-A,-_),w.globalCompositeOperation="destination-atop",w.fillStyle=c,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",b=C.canvas,A=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,_,s,r),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,_,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,_,s,r,h,f,s,r),i.restore()}save(t){this.inSMaskMode&&hr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const c=i===Sr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=py(o)),et.axialAlignedBoundingBox(r,Wt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Di(r),Te.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,pi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Te.STROKE,Wt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Di(r),Te.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,pi.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,pi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=i1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Bm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||fh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let g=s;s<Mm?g=Mm:s>Rm&&(g=Rm),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${h} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,c){const u=this.ctx,h=this.current,f=h.font,g=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,b=g&fe.FILL_STROKE_MASK,A=!!(g&fe.ADD_TO_PATH_FLAG),_=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||A||_||S)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,i)),C&&(f.disableFontFace||_||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(b===fe.FILL||b===fe.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const T=this.#n(C,w,o);u.fill(T)}else u.fill(C);if(b===fe.STROKE||b===fe.FILL_STROKE)if(c){w||=u.getTransform(),u.setTransform(...c);const{a:T,b:x,c:O,d:L}=w,N=et.inverseTransform(c),P=et.transform([T,x,O,L,0,0],N);et.singularValueDecompose2dScale(P,ei),u.lineWidth*=Math.max(ei[0],ei[1])/y,u.stroke(this.#n(C,w,c))}else u.lineWidth/=y,u.stroke(C);u.restore()}else(b===fe.FILL||b===fe.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===fe.STROKE||b===fe.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,pi.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Wt(u),x:s,y:r,fontSize:y,path:C}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return gt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,pi.showText).resetBBox(t),this.current.textRenderingMode&fe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,A=r.vertical,_=A?1:-1,S=r.defaultVMetrics,C=o*s.fontMatrix[0],w=s.textRenderingMode===fe.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),g>0?c.scale(y,-1):c.scale(y,1);let T,x;const O=s.textRenderingMode&fe.FILL_STROKE_MASK,L=O===fe.FILL||O===fe.FILL_STROKE,N=O===fe.STROKE||O===fe.FILL_STROKE;if(L&&s.patternFill){c.save();const Q=s.fillColor.getPattern(c,this,Di(c),Te.FILL,t);T=Wt(c),c.restore(),c.fillStyle=Q}if(N&&s.patternStroke){c.save();const Q=s.strokeColor.getPattern(c,this,Di(c),Te.STROKE,t);x=Wt(c),c.restore(),c.strokeStyle=Q}let P=s.lineWidth;const $=s.textMatrixScale;if($===0||P===0?N&&(P=this.getSinglePixelWidth()):P/=$,u!==1&&(c.scale(u,u),P/=u),c.lineWidth=P,r.isInvalidPDFjsFont){const Q=[];let ht=0;for(const dt of i)Q.push(dt.unicode),ht+=dt.width;const Rt=Q.join("");if(c.fillText(Rt,0,0),this.dependencyTracker!==null){const dt=c.measureText(Rt);this.dependencyTracker.recordBBox(t,this.ctx,-dt.actualBoundingBoxLeft,dt.actualBoundingBoxRight,-dt.actualBoundingBoxAscent,dt.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ht*C*y,c.restore(),this.compose();return}let K=0,J;for(J=0;J<b;++J){const Q=i[J];if(typeof Q=="number"){K+=_*Q*o/1e3;continue}let ht=!1;const Rt=(Q.isSpace?f:0)+h,dt=Q.fontChar,Dt=Q.accent;let k,q,Z=Q.width;if(A){const R=Q.vmetric||S,j=-(Q.vmetric?R[1]:Z*.5)*C,W=R[2]*C;Z=R?-R[0]:Z,k=j/u,q=(K+W)/u}else k=K/u,q=0;let yt;if(r.remeasure&&Z>0){yt=c.measureText(dt);const R=yt.width*1e3/o*u;if(Z<R&&this.isFontSubpixelAAEnabled){const j=Z/R;ht=!0,c.save(),c.scale(j,1),k/=j}else Z!==R&&(k+=(Z-R)/2e3*o/u)}if(this.contentVisible&&(Q.isInFont||r.missingFile)){if(w&&!Dt)c.fillText(dt,k,q),this.dependencyTracker?.recordCharacterBBox(t,c,yt?{bbox:null}:r,o/u,k,q,()=>yt??c.measureText(dt));else if(this.paintChar(t,dt,k,q,T,x),Dt){const R=k+o*Dt.offset.x/u,j=q-o*Dt.offset.y/u;this.paintChar(t,Dt.fontChar,R,j,T,x)}}const St=A?Z*C-Rt*g:Z*C+Rt*g;K+=St,ht&&c.restore()}A?s.y-=K:s.x+=K*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,c=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||fh,A=i.length,_=r.textRenderingMode===fe.INVISIBLE;let S,C,w,T;if(_||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const x=this.dependencyTracker;for(this.dependencyTracker=x?new ml(x,t):null,S=0;S<A;++S){if(C=i[S],typeof C=="number"){T=h*C*c/1e3,this.ctx.translate(T,0),r.x+=T*y;continue}const O=(C.isSpace?g:0)+f,L=o.charProcOperatorList[C.operatorListId];L?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...b),this.executeOperatorList(L),this.restore()):pt(`Type3 character "${C.operatorListId}" is not available.`);const N=[C.width,0];et.applyTransform(N,b),w=N[0]*c+O,s.translate(w,0),r.x+=w*y}s.restore(),x&&(this.dependencyTracker=x)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,c,u){const h=new Path2D;h.rect(r,o,c-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,o,u).recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Wt(this.ctx),o={createCanvasGraphics:(c,u)=>new ca(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ml(this.dependencyTracker,u,!0):null)};s=new Uh(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=K_(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Di(s),Te.SHADING,t);const o=Di(s);if(o){const{width:c,height:u}=s.canvas,h=aa.slice();et.axialAlignedBoundingBox([0,0,c,u],o,h);const[f,g,y,b]=h;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,pi.transform).recordDependencies(t,pi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){qt("Should not call beginInlineImage")}beginImageData(){qt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Wt(this.ctx),s)){et.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,c,u]=s,h=new Path2D;h.rect(r,o,c-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||wl("TODO: Support non-isolated groups."),i.knockout&&pt("Knockout groups not supported.");const r=Wt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=aa.slice();et.axialAlignedBoundingBox(i.bbox,Wt(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=et.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),A=b.context;A.translate(-u,-h),A.transform(...r);let _=new Path2D;const[S,C,w,T]=i.bbox;if(_.rect(S,C,w-S,T-C),i.matrix){const x=new Path2D;x.addPath(_,new DOMMatrix(i.matrix)),_=x}A.clip(_),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),hr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Wt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=aa.slice();et.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,o,c){if(this.#t(),rl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,et.singularValueDecompose2dScale(Wt(this.ctx),ei);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(ei[0],0,0,-ei[1],0,h*ei[1]),rl(this.ctx)}else{rl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new Lm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),c=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const f=Wt(h);h.transform(s,r,o,c,0,0);const g=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=et.transform(f,[s,r,o,c,u[y],u[y+1]]);h.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,pi.transformAndFill);for(const c of i){const{data:u,width:h,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=y.context;b.save();const A=this.getObject(t,u,c);Nm(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,Di(s),Te.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),al(s,y.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){pt("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Om(g,i),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,Di(o));o.imageSmoothingEnabled=km(Wt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,pi.imageXObject).recordOperation(t),al(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;Om(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),al(r,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,pi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===Bm?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(i),f=Math.abs(o);if(h===f)if(t===0)c=u=1/h;else{const g=h*t;c=u=g<1?1/g:1}else if(t===0)c=1/h,u=1/f;else{const g=h*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const h=Math.abs(i*o-s*r),f=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)c=g/h,u=f/h;else{const y=t*h;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,c),oh.a=1/o,oh.d=1/c;const h=new Path2D;if(h.addPath(t,oh),u.length>0){const f=Math.max(o,c);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const d in Sr)ca.prototype[d]!==void 0&&(ca.prototype[Sr[d]]=ca.prototype[d]);class ua{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class n1{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ia=Symbol("INTERNAL");class s1{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&Je.DISPLAY),this.#e=!!(t&Je.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==ia&&qt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class a1{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Je.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new s1(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(ia,!1);for(const s of t.on)this.#e.get(s)._setVisible(ia,!0);for(const s of t.off)this.#e.get(s)._setVisible(ia,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return pt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return wl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){pt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(ia,!1,!0);r._setVisible(ia,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new my;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class r1{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Mt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Mt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new o1(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new l1(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class o1{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=kh(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class l1{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function c1(d){let t=!0,i=s("filename\\*","i").exec(d);if(i){i=i[1];let g=u(i);return g=unescape(g),g=h(g),g=f(g),o(g)}if(i=c(d),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(d),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Mr(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,C,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[C,w]}const _=[];for(let S=0;S<y.length&&S in y;++S){let[C,w]=y[S];w=u(w),C&&(w=unescape(w),S===0&&(w=h(w))),_.push(w)}return _.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function h(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),_=g.slice(y+1).replace(/^[^']*'/,"");return r(b,_)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,_){if(A==="q"||A==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),r(b,_);try{_=atob(_)}catch{}return r(b,_)})}return""}function wy(d,t){const i=new Headers;if(!d||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Tl(d){return URL.parse(d)?.origin??null}function Ey({responseHeaders:d,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Cy(d){const t=d.get("Content-Disposition");if(t){let i=c1(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(kh(i))return i}return null}function Nr(d,t){return new gl(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d,d===404||d===0&&t.startsWith("file:"))}function Ty(d){return d===200||d===206}function xy(d,t,i){return{method:"GET",headers:d,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function My(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(pt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class u1{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=wy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h1(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new d1(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class h1{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,xy(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Tl(o.url),!Ty(o.status))throw Nr(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:h}=Ey({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Cy(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:My(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class d1{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,xy(o,this._withCredentials,this._abortController)).then(u=>{const h=Tl(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Ty(u.status))throw Nr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:My(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const lh=200,ch=206;function f1(d){const t=d.response;return typeof t!="string"?t:Mr(t).buffer}class p1{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=wy(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ch):r.expectedStatus=lh,i.responseType="arraybuffer",Mt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||lh;if(!(o===lh&&s.expectedStatus===ch)&&o!==s.expectedStatus){s.onError(r.status);return}const u=f1(r);if(o===ch){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class g1{constructor(t){this._source=t,this._manager=new p1(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m1(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new y1(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class m1{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Tl(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=Ey({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Cy(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Nr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class y1{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Tl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Nr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const b1=/^[a-z][a-z0-9\-+.]+:/i;function v1(d){if(b1.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class A1{constructor(t){this.source=t,this.url=v1(t.url),Mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new S1(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new _1(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class S1{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Nr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _1{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const dr=Symbol("INITIAL_DATA");class Ry{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:dr}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===dr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==dr}delete(t){const i=this.#t[t];return!i||i.data===dr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==dr&&(yield[t,i])}}}const w1=1e5,Pm=30;class ti{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#C=new WeakMap;static#w=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*ki.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=r,this.#s=o,ti.#R(),i.style.setProperty("--min-font-size",ti.#w),us(i,s),this.#t.promise.finally(()=>{ti.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=pe.platform;return gt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#x(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),ti.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*ki.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,us(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:ti.#D(this.#r)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#E(o)}}cancel(){const t=new zn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#n)return;this.#a.ctx??=ti.#D(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>w1){pt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=et.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=ti.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*ti.#z(u,c,this.#r);let g,y;o===0?(g=r[4],y=r[5]-f):(g=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const b=i.style;b.left=`${(100*g/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${h.toFixed(2)}px`),b.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);_!==S&&Math.max(_,S)/Math.min(_,S)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,s),this.#a.div=i,this.#a.properties=s,this.#E(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#E(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:h}=s;ti.#M(r,h*this.#h,c);const{width:f}=r.measureText(i.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#C.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#C.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#R(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#D(s);o.canvas.width=o.canvas.height=Pm,this.#M(o,Pm,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(pe.platform.isFirefox&&pt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const E1=100;function Dy(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new Hh,{docId:i}=t,s=d.url?L_(d.url):null,r=d.data?O_(d.data):null,o=d.httpHeaders||null,c=d.withCredentials===!0,u=d.password??null,h=d.range instanceof Ly?d.range:null,f=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:2**16;let g=d.worker instanceof wr?d.worker:null;const y=d.verbosity,b=typeof d.docBaseUrl=="string"&&!El(d.docBaseUrl)?d.docBaseUrl:null,A=el(d.cMapUrl),_=d.cMapPacked!==!1,S=d.CMapReaderFactory||(De?U_:_m),C=el(d.iccUrl),w=el(d.standardFontDataUrl),T=d.StandardFontDataFactory||(De?H_:wm),x=el(d.wasmUrl),O=d.WasmFactory||(De?j_:Em),L=d.stopAtErrors!==!0,N=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,P=d.isEvalSupported!==!1,$=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!De,K=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!De&&(pe.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Q=typeof d.disableFontFace=="boolean"?d.disableFontFace:De,ht=d.fontExtraProperties===!0,Rt=d.enableXfa===!0,dt=d.ownerDocument||globalThis.document,Dt=d.disableRange===!0,k=d.disableStream===!0,q=d.disableAutoFetch===!0,Z=d.pdfBug===!0,yt=d.CanvasFactory||(De?I_:P_),St=d.FilterFactory||(De?F_:z_),R=d.enableHWA===!0,j=d.useWasm!==!1,W=h?h.length:d.length??NaN,tt=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!De&&!Q,ot=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:!!(S===_m&&T===wm&&O===Em&&A&&w&&x&&gr(A,document.baseURI)&&gr(w,document.baseURI)&&gr(x,document.baseURI)),ut=null;s_(y);const lt={canvasFactory:new yt({ownerDocument:dt,enableHWA:R}),filterFactory:new St({docId:i,ownerDocument:dt}),cMapReaderFactory:ot?null:new S({baseUrl:A,isCompressed:_}),standardFontDataFactory:ot?null:new T({baseUrl:w}),wasmFactory:ot?null:new O({baseUrl:x})};g||(g=wr.create({verbosity:y,port:ua.workerPort}),t._worker=g);const ie={docId:i,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:q,rangeChunkSize:f,length:W,docBaseUrl:b,enableXfa:Rt,evaluatorOptions:{maxImageSize:N,disableFontFace:Q,ignoreErrors:L,isEvalSupported:P,isOffscreenCanvasSupported:$,isImageDecoderSupported:K,canvasMaxAreaInBytes:J,fontExtraProperties:ht,useSystemFonts:tt,useWasm:j,useWorkerFetch:ot,cMapUrl:A,iccUrl:C,standardFontDataUrl:w,wasmUrl:x}},jt={ownerDocument:dt,pdfBug:Z,styleElement:ut,loadingParams:{disableAutoFetch:q,enableXfa:Rt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const In=g.messageHandler.sendWithPromise("GetDocRequest",ie,r?[r.buffer]:null);let ln;if(h)ln=new r1(h,{disableRange:Dt,disableStream:k});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Un=gr(s)?u1:De?A1:g1;ln=new Un({url:s,length:W,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:Dt,disableStream:k})}return In.then(Un=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const pa=new mr(i,Un,g.port),Bi=new x1(pa,t,ln,jt,lt,R);t._transport=Bi,pa.send("Ready",null)})}).catch(t._capability.reject),t}class Hh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Hh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Ly{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class C1{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class T1{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new gm:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new Ry,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Dr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=Bn.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:_=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:C,cacheKey:w}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(C);let T=this._intentStates.get(w);T||(T=Object.create(null),this._intentStates.set(w,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const x=!!(C&Je.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(A||O),N=K=>{if(T.renderTasks.delete(P),L){const J=P.gfx?.dependencyTracker.take();J&&(P.stepper&&P.stepper.setOperatorBBoxes(J,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=J))}x&&(this.#t=!0),this.#e(),K?(P.capability.reject(K),this._abortOperatorList({intentState:T,reason:K instanceof Error?K:new Error(K)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ra({callback:N,params:{canvas:i,canvasContext:t,dependencyTracker:L?new q_(i,T.operatorList.length,O):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:_});(T.renderTasks||=new Set).add(P);const $=P.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([K,J])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(J.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:K,optionalContentConfig:J}),P.operatorListChanged()}).catch(N),$}getOperatorList({intent:t="display",annotationMode:i=Bn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_r.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new gm),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=h;const g=()=>{h.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Nh){let r=E1;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new zn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Pn,wi,sn,os,bl,ls,cs,Oe,dl,Oy,Ny,yr,ha,fl;const Kt=class Kt{constructor({name:t=null,port:i=null,verbosity:s=a_()}={}){Mi(this,Oe);Mi(this,Pn,Promise.withResolvers());Mi(this,wi,null);Mi(this,sn,null);Mi(this,os,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if($t(Kt,cs).has(i))throw new Error("Cannot use more than one PDFWorker per port.");$t(Kt,cs).set(i,this),Ri(this,Oe,Oy).call(this,i)}else Ri(this,Oe,Ny).call(this)}get promise(){return $t(this,Pn).promise}get port(){return $t(this,sn)}get messageHandler(){return $t(this,wi)}destroy(){this.destroyed=!0,$t(this,os)?.terminate(),Ue(this,os,null),$t(Kt,cs).delete($t(this,sn)),Ue(this,sn,null),$t(this,wi)?.destroy(),Ue(this,wi,null)}static create(t){const i=$t(this,cs).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Kt(t)}static get workerSrc(){if(ua.workerSrc)return ua.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return gt(this,"_setupFakeWorkerGlobal",(async()=>$t(this,ha,fl)?$t(this,ha,fl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Pn=new WeakMap,wi=new WeakMap,sn=new WeakMap,os=new WeakMap,bl=new WeakMap,ls=new WeakMap,cs=new WeakMap,Oe=new WeakSet,dl=function(){$t(this,Pn).resolve(),$t(this,wi).send("configure",{verbosity:this.verbosity})},Oy=function(t){Ue(this,sn,t),Ue(this,wi,new mr("main","worker",t)),$t(this,wi).on("ready",()=>{}),Ri(this,Oe,dl).call(this)},Ny=function(){if($t(Kt,ls)||$t(Kt,ha,fl)){Ri(this,Oe,yr).call(this);return}let{workerSrc:t}=Kt;try{Kt._isSameOrigin(window.location,t)||(t=Kt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new mr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?$t(this,Pn).reject(new Error("Worker was destroyed")):Ri(this,Oe,yr).call(this)},o=new AbortController;i.addEventListener("error",()=>{$t(this,os)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Ue(this,wi,s),Ue(this,sn,i),Ue(this,os,i),Ri(this,Oe,dl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Ri(this,Oe,yr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{wl("The worker has been disabled.")}Ri(this,Oe,yr).call(this)},yr=function(){$t(Kt,ls)||(pt("Setting up fake worker."),Ue(Kt,ls,!0)),Kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Pn).reject(new Error("Worker was destroyed"));return}const i=new B_;Ue(this,sn,i);const s=`fake${Wg(Kt,bl)._++}`,r=new mr(s+"_worker",s,i);t.setup(r,i),Ue(this,wi,new mr(s,s+"_worker",i)),Ri(this,Oe,dl).call(this)}).catch(t=>{$t(this,Pn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ha=new WeakSet,fl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Mi(Kt,ha),Mi(Kt,bl,0),Mi(Kt,ls,!1),Mi(Kt,cs,new WeakMap),De&&(Ue(Kt,ls,!0),ua.workerSrc||="./pdf.worker.mjs"),Kt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Kt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Kt.fromPort=t=>{if(y_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Kt.create(t)};let wr=Kt;class x1{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,o,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new Ry,this.fontLoader=new M_({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return gt(this,"annotationStorage",new zh)}getRenderingIntent(t,i=Bn.ENABLE,s=null,r=!1,o=!1){let c=Je.DISPLAY,u=vh;switch(t){case"any":c=Je.ANY;break;case"display":break;case"print":c=Je.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const h=c&Je.PRINT&&s instanceof yy?s:this.annotationStorage;switch(i){case Bn.DISABLE:c+=Je.ANNOTATIONS_DISABLE;break;case Bn.ENABLE:break;case Bn.ENABLE_FORMS:c+=Je.ANNOTATIONS_FORMS;break;case Bn.ENABLE_STORAGE:c+=Je.ANNOTATIONS_STORAGE,u=h.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=Je.IS_EDITING),o&&(c+=Je.OPLIST);const{ids:f,hash:g}=h.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ti.cleanup(),this._networkStream?.cancelAllRequests(new zn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}Mt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}Mt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new C1(s,this))}),t.on("DocException",s=>{i._capability.reject(He(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw He(s);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const y=o.error;pt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new Ht(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,h=new R_(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=o;Mt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new D_(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new ye(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new T1(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,r),r}getPageIndex(t){return Ah(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new a1(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new n1(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ti.cleanup()}}cachedPageNumber(t){if(!Ah(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class M1{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ra{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:_=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new M1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ra.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ra.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ca(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ra.#e.delete(this._canvas),t||=new Nh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ra.#e.delete(this._canvas),this.callback())))}}const R1="5.4.530",D1="50cc4adac";class mi{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return gt(this,"_keyboardManager",new Or([[["Escape","mac+Escape"],mi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],mi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],mi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],mi.prototype._moveToPrevious],[["Home","mac+Home"],mi.prototype._moveToBeginning],[["End","mac+End"],mi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",mi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",bi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",mi.#d[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:xt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){mi._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Er{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Er.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Er.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function zm(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function fr(d){return Math.max(0,Math.min(255,255*d))}class Fm{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fr(t),[t,t,t]}static G_HTML([t]){const i=zm(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(fr)}static RGB_HTML(t){return`#${t.map(zm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[fr(1-Math.min(1,t+r)),fr(1-Math.min(1,s+r)),fr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,c=1-s,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class L1{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){qt("Abstract method `_createSVG` called.")}}class yl extends L1{_createSVG(t){return document.createElementNS(en,t)}}const O1=9,hs=new WeakSet,N1=new Date().getTimezoneOffset()*60*1e3;class uh{static create(t){switch(t.data.annotationType){case he.LINK:return new jh(t);case he.TEXT:return new B1(t);case he.WIDGET:switch(t.data.fieldType){case"Tx":return new P1(t);case"Btn":return t.data.radioButton?new ky(t):t.data.checkBox?new F1(t):new I1(t);case"Ch":return new U1(t);case"Sig":return new z1(t)}return new gs(t);case he.POPUP:return new wh(t);case he.FREETEXT:return new By(t);case he.LINE:return new j1(t);case he.SQUARE:return new G1(t);case he.CIRCLE:return new q1(t);case he.POLYLINE:return new Py(t);case he.CARET:return new X1(t);case he.INK:return new Gh(t);case he.POLYGON:return new V1(t);case he.HIGHLIGHT:return new zy(t);case he.UNDERLINE:return new Y1(t);case he.SQUIGGLY:return new $1(t);case he.STRIKEOUT:return new K1(t);case he.STAMP:return new Fy(t);case he.FILEATTACHMENT:return new W1(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],o=i[u+2]):i[u+1]===c&&(o=Math.max(o,i[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Ar}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${Ar}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+h)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof gs)&&!(this instanceof jh)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof wh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,C=i.borderStyle.verticalCornerRadius;if(S>0||C>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;c.borderRadius=T}else if(this instanceof ky){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=T}switch(i.borderStyle.style){case ea.SOLID:c.borderStyle="solid";break;case ea.DASHED:c.borderStyle="dashed";break;case ea.BEVELED:pt("Unimplemented border style: beveled");break;case ea.INSET:pt("Unimplemented border style: inset");break;case ea.UNDERLINE:c.borderBottomStyle="solid";break}const w=i.borderColor||null;w?(this.#e=!0,c.borderColor=et.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):c.borderWidth=0}const f=et.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:_}=i;return i.hasOwnCanvas||_===0?(c.width=`${100*u/g}%`,c.height=`${100*h/y}%`):this.setRotation(_,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],c=o[0],u=o.slice(1);r.target.style[s]=Fm[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Fm[`${c}_rgb`](u)})};return gt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,w,T]=t.subarray(2,6);if(r===S&&o===C&&i===w&&s===T)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const h=r-i,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),_=`clippath_${this.data.id}`;A.setAttribute("id",_),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,C=t.length;S<C;S+=8){const w=t[S],T=t[S+1],x=t[S+2],O=t[S+3],L=g.createElement("rect"),N=(x-i)/h,P=(o-T)/f,$=(w-x)/h,K=(T-O)/f;L.setAttribute("x",N),L.setAttribute("y",P),L.setAttribute("width",$),L.setAttribute("height",K),A.append(L),u?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${P}" width="${$}" height="${K}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new wh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===i)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!hs.has(f)){pt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==i&&hs.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class k1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class jh extends Zt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const h=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;h.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!hs.has(b)){pt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class B1 extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class gs extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,i,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":et.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||O1,o=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(ih*r))||1,y=f/g;c=Math.min(r,h(y/ih))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(f/ih))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=et.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class P1 extends gs{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),hs.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",_=>{t.setValue(i,{value:_.target.value}),this.setPropertyOnSiblings(s,"value",_.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",_=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let A=_=>{const{formattedValue:S}=h;S!=null&&(_.target.value=S),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:C}=S;if(b&&(C.type=g,y&&(C.step=y)),h.userValue){const w=h.userValue;if(b)if(g==="time"){const T=new Date(w),x=[T.getHours(),T.getMinutes(),T.getSeconds()];C.value=x.map(O=>O.toString().padStart(2,"0")).join(":")}else C.value=new Date(w-N1).toISOString().split(g==="date"?"T":".",1)[0];else C.value=w}h.lastCommittedValue=C.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(w){h.userValue=w.detail.value??"",b||t.setValue(i,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:T}=w.detail;h.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T);const x={formattedValue:T};b&&(x.value=T),t.setValue(i,x)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:T}=w.detail,{target:x}=w;if(T===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",T);let O=h.userValue;!O||O.length<=T||(O=O.slice(0,T),x.value=h.userValue=O,t.setValue(i,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(h.commitKey=3),C===-1)return;const{value:w}=S.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const _=A;A=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:C}=S;let{value:w}=C;if(b){if(w&&g==="time"){const T=w.split(":").map(x=>parseInt(x,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),C.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();C.type="text"}h.userValue=w,h.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),_(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:C,target:w}=S,{value:T,selectionStart:x,selectionEnd:O}=w;let L=x,N=O;switch(S.inputType){case"deleteWordBackward":{const P=T.substring(0,x).match(/\w*[^\w]*$/);P&&(L-=P[0].length);break}case"deleteWordForward":{const P=T.substring(x).match(/^[^\w]*\w*/);P&&(N+=P[0].length);break}case"deleteContentBackward":x===O&&(L-=1);break;case"deleteContentForward":x===O&&(N+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:T,change:C||"",willCommit:!1,selStart:L,selEnd:N}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class z1 extends gs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class F1 extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return hs.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s)){const g=h&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ky extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(hs.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class I1 extends jh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class U1 extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");hs.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,_=>_.selected).map(_=>_[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const A=b.detail.value,_=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=_.has(S.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,_=b.detail.remove;A[_].selected=!1,r.remove(_),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(b){const{index:A,displayValue:_,exportValue:S}=b.detail.insert,C=r.children[A],w=document.createElement("option");w.textContent=_,w.value=S,C?C.before(w):r.append(w),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const _ of A){const{displayValue:S,exportValue:C}=_,w=document.createElement("option");w.textContent=S,w.value=C,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const _ of b.target.options)_.selected=A.has(_.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wh extends Zt{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&Zt._hasPopupData(i)}),this.elements=s,o&&Zt._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new H1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${sa}${r}`).join(",")),this.container}}class H1{#t=null;#e=this.#q.bind(this);#n=this.#I.bind(this);#i=this.#N.bind(this);#r=this.#_.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#C=null;#w=null;#S=null;#x=!1;#A=null;#E=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#w=r,this.#o=c,this.#C=u,this.#d=h,this.#a=i,this.#b=f,this.#h=g,this.#l=s,this.#t=b,this.#A=s[0],this.#c=mh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,y&&this.#_())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#R(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#R(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(t){t!==this.comment&&(this.#A.commentText=this.#E=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=r;this.#t.showDialog(null,this,o+i*u,c+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=et.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}fy({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#C,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#C.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):i&&(i.deleted?this.remove():(this.#z(),this.#E=i.text)),t&&(this.#y=null,this.#M(),this.#R());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#S||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),i&&i.text&&(this.#C=this.#B(i.text),this.#c=mh.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#C}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const _ of this.#l)if(!u||et.intersect(_.data.rect,u)!==null){u=_.data.rect,c=!0;break}const h=et.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=h[0]+g,b=h[1];this.#u=[100*(y-r)/i,100*(b-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#x&&(this.#m||this.#N(),this.#x=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class By extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class j1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class G1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class q1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Py extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let h=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],A=t[3]-i[g+1];h.push(`${b},${A}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class V1 extends Py{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Gh extends Zt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:h}=this.#n(i,t),f=this.svgFactory.create(u,h,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class zy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Y1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class $1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class K1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Fy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class W1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=pe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class qh{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=g||new zh,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;us(s,this.viewport);const r=new Map,o=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new yl,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const h=u.annotationType===he.POPUP;if(h){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){o.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=uh.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const h=c.elements=r.get(u.id);c.data=u;const f=uh.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${sa}${u.id}`,u.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const o=s.id=`${sa}${r}`;t.push(this.#r?.getAriaAttributes(o).then(c=>{if(c)for(const[u,h]of c)s.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[s,r,o,c]}},{data:{rect:[u,h,f,g]}})=>{if(s===o&&r===c)return 1;if(u===f&&h===g)return-1;const y=c,b=r,A=(r+c)/2,_=g,S=h,C=(h+g)/2;if(A>=_&&C<=b)return-1;if(C>=y&&A<=S)return 1;const w=(s+o)/2,T=(u+f)/2;return w-T});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new yl,parent:this};for(const s of t){s.borderStyle||=qh._defaultBorderStyle,i.data=s;const r=uh.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${sa}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,us(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new k1({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${sa}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return gt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ea.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const ol=/\r\n?|\n/g;class be extends rt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,i=o=>o.isEmpty(),s=Fn.TRANSLATE_SMALL,r=Fn.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Or([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||be._defaultColor||rt._defaultLineColor,this.#i=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){rt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case xt.FREETEXT_SIZE:be._defaultFontSize=i;break;case xt.FREETEXT_COLOR:be._defaultColor=i;break}}updateParams(t,i){switch(t){case xt.FREETEXT_SIZE:this.#r(i);break;case xt.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[xt.FREETEXT_SIZE,be._defaultFontSize],[xt.FREETEXT_COLOR,be._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[xt.FREETEXT_SIZE,this.#i],[xt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Er(this),[["colorPicker",this._colorPicker]]}get colorType(){return xt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(be.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,_;switch(this.rotation){case 0:A=t+(c[0]-y)/f,_=i+this.height-(c[1]-b)/g;break;case 90:A=t+(c[0]-y)/f,_=i-(c[1]-b)/g,[u,h]=[h,-u];break;case 180:A=t-this.width+(c[0]-y)/f,_=i-(c[1]-b)/g,[u,h]=[-u,-h];break;case 270:A=t+(c[0]-y-this.height*g)/f,_=i+(c[1]-b-this.width*f)/g,[u,h]=[-h,u];break}this.setAt(A*r,_*o,u,h)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ol,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=be.#h(i.getData("text")||"").replaceAll(ol,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(h).replaceAll(ol,"")),A!==this.editorDiv){let _=f;for(const S of this.editorDiv.childNodes){if(S===A){_=g;continue}_.push(be.#c(S))}}f.push(u.nodeValue.slice(0,h).replaceAll(ol,""))}else if(u===this.editorDiv){let A=f,_=0;for(const S of this.editorDiv.childNodes)_++===h&&(A=g),A.push(be.#c(S))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const _=A.nodeValue.length;if(b<=_){y.setStart(A,b),y.setEnd(A,b);break}b-=_}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=be._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof By){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:_,modificationDate:S},textContent:C,textPosition:w,parent:{page:{pageNumber:T}}}=t;if(!C||C.length===0)return null;r=t={annotationType:mt.FREETEXT,color:Array.from(u),fontSize:c,value:C.join(`
`),position:w,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:_,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=et.makeHexColor(...t.color),o.#t=be.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){qt("Abstract method `toSVGPath` must be implemented.")}get box(){qt("Abstract getter `box` must be implemented.")}serialize(t,i){qt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*o;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+c)/6,(s+o)/2,(r+c)/2]}}class rs{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=rs.#m+rs.#g;constructor({x:t,y:i},s,r,o,c,u=0){this.#t=s,this.#h=o*r,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=rs.#m*r,this.#c=rs.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,o,c]=this.#t;let[u,h,f,g]=this.#a.subarray(8,12);const y=t-f,b=i-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const _=A-this.#l,S=_/A,C=S*y,w=S*b;let T=u,x=h;u=f,h=g,f+=C,g+=w,this.#f?.push(t,i);const O=-w/_,L=C/_,N=O*this.#h,P=L*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+N,g+P],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-N,g-P],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+N,h+P],2),this.#r.push(NaN,NaN,NaN,NaN,(u+N-s)/o,(h+P-r)/c),this.#a.set([u-N,h-P],14),this.#e.push(NaN,NaN,NaN,NaN,(u-N-s)/o,(h-P-r)/c)),this.#a.set([T,x,u,h,f,g],6),!this.isEmpty()):(this.#a.set([T,x,u,h,f,g],6),Math.abs(Math.atan2(x-h,T-u)-Math.atan2(w,C))<Math.PI/2?([u,h,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((h+g)/2-r)/c),[u,h,T,x]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((x+h)/2-r)/c),!0):([T,x,u,h,f,g]=this.#a.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((x+5*h)/6-r)/c,((5*u+f)/6-s)/o,((5*h+g)/6-r)/c,((u+f)/2-s)/o,((h+g)/2-r)/c),[f,g,u,h,T,x]=this.#a.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((x+5*h)/6-r)/c,((5*u+f)/6-s)/o,((5*h+g)/6-r)/c,((u+f)/2-s)/o,((h+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[o,c,u,h]=this.#p();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/r} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/r} L${o} ${c} L${u} ${h} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/r} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,o]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,f,g,y]=this.#p();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/o} L${h} ${f} L${g} ${y} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,c){return new Iy(t,i,s,r,o,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[r,o,c,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=h.length-2;y<b;y+=2)h[y]=(this.#f[y]-r)/c,h[y+1]=(this.#f[y+1]-o)/u;if(h[h.length-2]=(this.#s-r)/c,h[h.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#C(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+b],f[g+1]=i[y+b+1],g+=2}return this.#w(f,g),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#C(t){const i=this.#a,[s,r,o,c]=this.#t,[u,h,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[o,c,u,h]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/h],i),i+=24}}class Iy extends it{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,r,o,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=r,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-h)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-h)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const c=s-t,u=r-i;let h,f;switch(o){case 0:h=it._rescale(this.#s,t,r,c,-u),f=it._rescale(this.#r,t,r,c,-u);break;case 90:h=it._rescaleAndSwap(this.#s,t,i,c,u),f=it._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:h=it._rescale(this.#s,s,i,-c,u),f=it._rescale(this.#r,s,i,-c,u);break;case 270:h=it._rescaleAndSwap(this.#s,s,r,-c,-u),f=it._rescaleAndSwap(this.#r,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const o=[s,r,s,r];let c=s,u=r,h=s,f=r;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,_=i.length;A<_;A+=6){const S=i[A+4],C=i[A+5];isNaN(i[A])?(et.pointBoundingBox(S,C,o),u>C?(c=S,u=C):u===C&&(c=g(c,S)),f<C?(h=S,f=C):f===C&&(h=g(h,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,et.bezierBoundingBox(s,r,...i.slice(A,A+6),y),et.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=g(c,y[0])),f<y[3]?(h=y[2],f=y[3]):f===y[3]&&(h=g(h,y[2]))),s=S,r=C}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,i,s,r,o,c=0){return new rs(t,i,s,r,o,c)}getNewOutline(t,i){const[s,r,o,c]=this.#e,[u,h,f,g]=this.#t,y=o*f,b=c*g,A=s*f+u,_=r*g+h,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+_},this.#t,this.#a,t,this.#i,i??this.#n);for(let C=2;C<this.#r.length;C+=2)S.add({x:this.#r[C]*y+A,y:this.#r[C+1]*b+_});return S.getOutlines()}}class Eh{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:C,width:w,height:T}of t){const x=Math.floor((S-i)/c)*c,O=Math.ceil((S+w+i)/c)*c,L=Math.floor((C-i)/c)*c,N=Math.ceil((C+T+i)/c)*c,P=[x,L,N,!0],$=[O,L,N,!1];this.#i.push(P,$),et.rectBoundingBox(x,L,O,N,o)}const u=o[2]-o[0]+2*s,h=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),_=[A[0],A[2]];for(const S of this.#i){const[C,w,T,x]=S;!x&&r?w<b?(b=w,y=C):w===b&&(y=Math.max(y,C)):x&&!r&&(w<b?(b=w,y=C):w===b&&(y=Math.min(y,C))),S[0]=(C-f)/u,S[1]=(w-g)/h,S[2]=(T-g)/h}this.#t=new Float32Array([f,g,u,h]),this.#e=[y,b],this.#n=_}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,h,f]=c;i.push([u,h,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const h=i[c][2],f=i[c+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,h,f,g,y]=c;s.delete(c);let b=u,A=h;for(o=[u,f],r.push(o);;){let _;if(s.has(g))_=g;else if(s.has(y))_=y;else break;s.delete(_),[u,h,f,g,y]=_,b!==u&&(o.push(b,A,u,A===h?h:f),b=u),A=A===h?f:h}o.push(b,A)}return new Q1(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,c=i[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#r.length;r++){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}}#l(t){const[i,s,r]=t,o=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[h,f]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(f<=b||A<=h)){if(b>=h){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=h,A>f&&o.push([i,f,A])}}}return o}}class Q1 extends it{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const c=[],u=s-t,h=r-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=r-f[y+1]*h;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ch extends rs{newFreeDrawOutline(t,i,s,r,o,c){return new Z1(t,i,s,r,o,c)}}class Z1 extends Iy{newOutliner(t,i,s,r,o,c=0){return new Ch(t,i,s,r,o,c)}}class ae extends rt{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ae.prototype;return gt(this,"_keyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ae._defaultColor,this.#p=t.thickness||ae._defaultThickness,this.opacity=t.opacity||ae._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Eh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Eh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#a=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ae.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ae.#E(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[o,c,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=h;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*b/y,this.height=h*y/b;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*b/y,this.height=h*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/h];const{lastPoint:g}=this.#a;this.#m=[(g[0]-o)/u,(g[1]-c)/h]}static initialize(t,i){rt.initialize(t,i),ae._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case xt.HIGHLIGHT_COLOR:ae._defaultColor=i;break;case xt.HIGHLIGHT_THICKNESS:ae._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case xt.HIGHLIGHT_COLOR:this.#C(i);break;case xt.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[xt.HIGHLIGHT_COLOR,ae._defaultColor],[xt.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[xt.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[xt.HIGHLIGHT_THICKNESS,this.#p||ae._defaultThickness],[xt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const i=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,ae._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const i=this.#p,s=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new mi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#x():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ae.#E(this.#l.box,t)):s=ae.#E([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:ae.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),gy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){ae._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:g,height:y}of o){const b=h*t+s,A=(1-f)*i+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=b+g*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#O(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:c,y:u,width:h,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",bi,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Ch({x:r,y:o},[c,u,h,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof zy){const{data:{quadPoints:_,rect:S,rotation:C,id:w,color:T,opacity:x,popupRef:O,richText:L,contentsObj:N,creationDate:P,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(T),opacity:x,quadPoints:_,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:C,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:L,comment:N?.str||null,creationDate:P,modificationDate:$}}else if(t instanceof Gh){const{data:{inkLists:_,rect:S,rotation:C,id:w,color:T,borderStyle:{rawWidth:x},popupRef:O,richText:L,contentsObj:N,creationDate:P,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(T),thickness:x,inkLists:_,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:C,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:L,comment:N?.str||null,creationDate:P,modificationDate:$}}const{color:o,quadPoints:c,inkLists:u,opacity:h}=t,f=await super.deserialize(t,i,s);f.color=et.makeHexColor(...o),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const _=f.#n=[];for(let S=0;S<c.length;S+=8)_.push({x:(c[S]-b)/g,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const _=u[0],S={x:_[0]-b,y:y-(_[1]-A)},C=new Ch(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let x=0,O=_.length;x<O;x+=2)S.x=_[x]-b,S.y=y-(_[x+1]-A),C.add(S);const{id:w,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);f.#b({highlightOutlines:C.getOutlines(),highlightId:w,clipPathId:T}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Uy{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){qt("Not implemented")}}class kt extends rt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(kt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){qt("Not implemented")}static get typesMap(){qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(kt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],c=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,kt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,kt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,kt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/o),r*(o/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/o),r*(o/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/c),r*(c/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/c),r*(c/o)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:c,parentDimensions:[u,h]}=this;switch((o*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,kt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){qt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=r;if(Bt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=kt.#i=new AbortController,_=t.combinedSignal(A);if(Bt.setPointer(f,h),window.addEventListener("pointerup",S=>{Bt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:_}),window.addEventListener("pointercancel",S=>{Bt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:_}),window.addEventListener("pointerdown",S=>{Bt.isSamePointerType(S.pointerType)&&(Bt.initializeAndAddPointerId(S.pointerId),kt.#n.isCancellable()&&(kt.#n.removeLastElement(),kt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",bi,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",S=>{Bt.isSameTimeStamp(S.timeStamp)&&ee(S)},{signal:_}),t.toggleDrawing(),i._editorUndoBar?.hide(),kt.#n){t.drawLayer.updateProperties(this._currentDrawId,kt.#n.startNew(c,u,y,b,g));return}i.updateUIForDefaultProperties(this),kt.#n=this.createDrawerInstance(c,u,y,b,g),kt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(kt.#r.toSVGProperties(),kt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Bt.isSameTimeStamp(t.timeStamp),!kt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(Bt.isSamePointerId(r)){if(Bt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,kt.#n.add(i,s)),Bt.setTimeStamp(t.timeStamp),ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,kt.#n=null,kt.#r=null,Bt.clearTimeStamp()),kt.#i&&(kt.#i.abort(),kt.#i=null,Bt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,kt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=kt.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(xt.DRAW_STEP),!kt.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:kt.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:kt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,c){qt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=i.viewport,h=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class J1{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#o=0;#c=new kr;#l;#d;constructor(t,i,s,r,o,c){this.#l=s,this.#d=r,this.#i=o,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return it._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,c]=this.#t.subarray(2,6),u=t-o,h=i-c;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,c,t,i],0),this.#e.push(...it.createBezierPoints(s,r,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#a=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=it.svgRound(this.#e[4]),i=it.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#a.length===4){const r=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[c,u,h,f,g,y]=this.#e.slice(r,r+6).map(it.svgRound);s.push(`C${c} ${u} ${h} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class kr extends it{#t;#e=0;#n;#i;#r;#a;#s;#o;#c;build(t,i,s,r,o,c,u){this.#r=i,this.#a=s,this.#s=r,this.#o=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,c,u,h,f,g]=i.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${c} ${u} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const c=[],u=[],[h,f,g,y]=this.#d();let b,A,_,S,C,w,T,x,O;switch(this.#o){case 0:O=it._rescale,b=t,A=i+r,_=s,S=-r,C=t+h*s,w=i+(1-f-y)*r,T=t+(h+g)*s,x=i+(1-f)*r;break;case 90:O=it._rescaleAndSwap,b=t,A=i,_=s,S=r,C=t+f*s,w=i+h*r,T=t+(f+y)*s,x=i+(h+g)*r;break;case 180:O=it._rescale,b=t+s,A=i,_=-s,S=r,C=t+(1-h-g)*s,w=i+f*r,T=t+(1-h)*s,x=i+(f+y)*r;break;case 270:O=it._rescaleAndSwap,b=t+s,A=i+r,_=-s,S=-r,C=t+(1-f-y)*s,w=i+(1-h-g)*r,T=t+(1-f)*s,x=i+(1-h)*r;break}for(const{line:L,points:N}of this.#i)c.push(O(L,b,A,_,S,o?new Array(L.length):null)),u.push(O(N,b,A,_,S,o?new Array(N.length):null));return{lines:c,points:u,rect:[C,w,T,x]}}static deserialize(t,i,s,r,o,{paths:{lines:c,points:u},rotation:h,thickness:f}){const g=[];let y,b,A,_,S;switch(h){case 0:S=it._rescale,y=-t/s,b=i/r+1,A=1/s,_=-1/r;break;case 90:S=it._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,_=1/s;break;case 180:S=it._rescale,y=t/s+1,b=-i/r,A=-1/s,_=1/r;break;case 270:S=it._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,_=-1/s;break}if(!c){c=[];for(const w of u){const T=w.length;if(T===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(T===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const x=new Float32Array(3*(T-2));c.push(x);let[O,L,N,P]=w.subarray(0,4);x.set([NaN,NaN,NaN,NaN,O,L],0);for(let $=4;$<T;$+=2){const K=w[$],J=w[$+1];x.set(it.createBezierPoints(O,L,N,P,K,J),($-2)*3),[O,L,N,P]=[N,P,K,J]}}}for(let w=0,T=c.length;w<T;w++)g.push({line:S(c[w].map(x=>x??NaN),y,b,A,_),points:S(u[w].map(x=>x??NaN),y,b,A,_)});const C=new this.prototype.constructor;return C.build(g,s,r,1,h,f,o),C}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[o,c]=this.#l(0);return[t+o,i+c,s-2*o,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)et.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,g,y,b,A,_]=r.subarray(u,u+6);et.bezierBoundingBox(o,c,f,g,y,b,A,_,t),o=A,c=_}}const[i,s]=this.#l();t[0]=Le(t[0]-i,0,1),t[1]=Le(t[1]-s,0,1),t[2]=Le(t[2]+i,0,1),t[3]=Le(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[c,u]=[r-i,o-s],h=this.#t;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#l(),h=c-r,f=u-o,g=this.#t;return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,c=0,u=0,h=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,h=i;break;case 270:r=-i/t,o=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${o} ${c} ${it.svgRound(u)} ${it.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,c]=this.#l(),[u,h,f,g]=this.#t;if(Math.abs(f-o)<=it.PRECISION||Math.abs(g-c)<=it.PRECISION){const S=t+s/2-(u+f/2),C=i+r/2-(h+g/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${C})`}}}const y=(s-2*o)/(f-2*o),b=(r-2*c)/(g-2*c),A=f/s,_=g/r;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${_}) translate(${it.svgRound(o)} ${it.svgRound(c)}) scale(${y} ${b}) translate(${it.svgRound(-o)} ${it.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,c]=this.#l(),u=this.#t,[h,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=it.PRECISION||Math.abs(y-c)<=it.PRECISION){const C=t+s/2-(h+g/2),w=i+r/2-(f+y/2);for(const{line:T,points:x}of this.#i)it._translate(T,C,w,T),it._translate(x,C,w,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(r-2*c)/(y-2*c),_=-b*(h+o)+t+o,S=-A*(f+c)+i+c;if(b!==1||A!==1||_!==0||S!==0)for(const{line:C,points:w}of this.#i)it._rescale(C,_,S,b,A,C),it._rescale(w,_,S,b,A,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,c=this.#t,u=t-c[0],h=i-c[1];if(this.#r===r&&this.#a===o)for(const{line:f,points:g}of this.#i)it._translate(f,u,h,f),it._translate(g,u,h,g);else{const f=this.#r/r,g=this.#a/o;this.#r=r,this.#a=o;for(const{line:y,points:b}of this.#i)it._rescale(y,u,h,f,g,y),it._rescale(b,u,h,f,g,b);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class xl extends Uy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new xl(this._viewParameters);return t.updateAll(this),t}}class Vh extends kt{static _type="ink";static _editorType=mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new xl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return gt(this,"typesMap",new Map([[xt.INK_THICKNESS,"stroke-width"],[xt.INK_COLOR,"stroke"],[xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new J1(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,c){return kr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){let r=null;if(t instanceof Gh){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:_,contentsObj:S,creationDate:C,modificationDate:w},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:mt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:_,comment:S?.str||null,creationDate:C,modificationDate:w}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Er(this),[["colorPicker",this._colorPicker]]}get colorType(){return xt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Vh.getDefaultDrawingOptions({stroke:et.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:rt._colorManager.convert(r),opacity:o,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Th extends kr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const ll=8,pr=3;class na{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,c,u){const h=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(-f+h-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#r(t,i,s,r,o,c,u){const h=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(f+h+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#a(t,i,s,r){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)c[g*i]=c[g*i+i-1]=0;for(let g=0;g<i;g++)c[g]=c[i*s-1-g]=0;let u=1,h;const f=[];for(let g=1;g<s-1;g++){h=1;for(let y=1;y<i-1;y++){const b=g*i+y,A=c[b];if(A===0)continue;let _=g,S=y;if(A===1&&c[b-1]===0)u+=1,S-=1;else if(A>=1&&c[b+1]===0)u+=1,S+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const C=[y,g],w=S===y+1,T={isHole:w,points:C,id:u,parent:0};f.push(T);let x;for(const Q of f)if(Q.id===h){x=Q;break}x?x.isHole?T.parent=w?x.parent:h:T.parent=w?h:x.parent:T.parent=w?h:0;const O=this.#i(c,i,g,y,_,S,0);if(O===-1){c[b]=-u,c[b]!==1&&(h=Math.abs(c[b]));continue}let L=this.#n[2*O],N=this.#n[2*O+1];const P=g+L,$=y+N;_=P,S=$;let K=g,J=y;for(;;){const Q=this.#r(c,i,K,J,_,S,1);L=this.#n[2*Q],N=this.#n[2*Q+1];const ht=K+L,Rt=J+N;C.push(Rt,ht);const dt=K*i+J;if(c[dt+1]===0?c[dt]=-u:c[dt]===1&&(c[dt]=u),ht===g&&Rt===y&&K===P&&J===$){c[b]!==1&&(h=Math.abs(c[b]));break}else _=K,S=J,K=ht,J=Rt}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let P=i;P<s-2;P+=2)r.push(t[P],t[P+1]);return}const o=t[i],c=t[i+1],u=t[s-4]-o,h=t[s-3]-c,f=Math.hypot(u,h),g=u/f,y=h/f,b=g*c-y*o,A=h/u,_=1/f,S=Math.atan(A),C=Math.cos(S),w=Math.sin(S),T=_*(Math.abs(C)+Math.abs(w)),x=_*(1-T+T**2),O=Math.max(Math.atan(Math.abs(w+C)*x),Math.atan(Math.abs(w-C)*x));let L=0,N=i;for(let P=i+2;P<s-2;P+=2){const $=Math.abs(b-g*t[P+1]+y*t[P]);$>L&&(N=P,L=$)}L>(f*O)**2?(this.#s(t,i,N+2,r),this.#s(t,N,s,r)):r.push(o,c)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,c){const u=new Float32Array(c**2),h=-2*r**2,f=c>>1;for(let S=0;S<c;S++){const C=(S-f)**2;for(let w=0;w<c;w++)u[S*c+w]=Math.exp((C+(w-f)**2)/h)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),_=new Uint32Array(256);for(let S=0;S<s;S++)for(let C=0;C<i;C++){const w=S*i+C,T=t[w];let x=0,O=0;for(let N=0;N<c;N++){const P=S+N-f;if(!(P<0||P>=s))for(let $=0;$<c;$++){const K=C+$-f;if(K<0||K>=i)continue;const J=t[P*i+K],Q=u[N*c+$]*g[Math.abs(J-T)];x+=J*Q,O+=Q}}const L=A[w]=Math.round(x/O);_[L]++}return[A,_]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const c=255/(r-o);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-o)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(h=>h!==0);let c=o,u=o;for(i=o;i<256;i++){const h=t[i];h>s&&(i-c>r&&(r=i-c,u=i-1),s=h,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let c=s,u=r;if(s>o||r>o){let b=s,A=r,_=Math.log2(Math.max(s,r)/o);const S=Math.floor(_);_=_===S?S-1:S;for(let w=0;w<_;w++){c=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(c,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,c,u),b=c,A=u,t!==i&&t.close(),t=T.transferToImageBitmap()}const C=Math.min(o/c,o/u);c=Math.round(c*C),u=Math.round(u*C)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=f.getImageData(0,0,c,u).data;return[this.#d(g),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,c,u,h){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:_,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:w,fontBoundingBoxDescent:T,width:x}=g.measureText(t),O=1.5,L=Math.ceil(Math.max(Math.abs(A)+Math.abs(_)||0,x)*O),N=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||y,Math.abs(w)+Math.abs(T)||y)*O);f=new OffscreenCanvas(L,N),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,L,N),g.fillStyle="black",g.fillText(t,L*(O-1)/2,N*(3-O)/2);const P=this.#d(g.getImageData(0,0,L,N).data),$=this.#l(P),K=this.#h($),J=this.#a(P,L,N,K);return this.processDrawnLines({lines:{curves:J,width:L,height:N},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[c,u,h]=this.#f(t),[f,g]=this.#c(c,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#a(f,u,h,y);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:f,height:g}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/g),_=A/i,S=A/s,C=[];for(const{points:T}of h){const x=c?this.#o(T):T;if(!x)continue;C.push(x);const O=x.length,L=new Float32Array(O),N=new Float32Array(3*(O===2?2:O-2));if(b.push({line:N,points:L}),O===2){L[0]=x[0]*_,L[1]=x[1]*S,N.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[P,$,K,J]=x;P*=_,$*=S,K*=_,J*=S,L.set([P,$,K,J],0),N.set([NaN,NaN,NaN,NaN,P,$],0);for(let Q=4;Q<O;Q+=2){const ht=L[Q]=x[Q]*_,Rt=L[Q+1]=x[Q+1]*S;N.set(it.createBezierPoints(P,$,K,J,ht,Rt),(Q-2)*3),[P,$,K,J]=[K,J,ht,Rt]}}if(b.length===0)return null;const w=u?new Th:new kr;return w.build(b,i,s,1,r,u?0:y,o),{outline:w,newCurves:C,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let c=1/0,u=-1/0,h=0;for(const x of t){h+=x.length;for(let O=2,L=x.length;O<L;O++){const N=x[O]-x[O-2];c=Math.min(c,N),u=Math.max(u,N)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=ll+pr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*g)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=f.BYTES_PER_ELEMENT;for(const x of t)b[A++]=x.length-2,b[A++]=x[0],b[A++]=x[1];const _=new CompressionStream("deflate-raw"),S=_.writable.getWriter();await S.ready,S.write(b);const C=f.prototype.constructor;for(const x of t){const O=new C(x.length-2);for(let L=2,N=x.length;L<N;L++)O[L-2]=x[L]-x[L-2];S.write(O)}S.close();const w=await new Response(_.readable).arrayBuffer(),T=new Uint8Array(w);return hy(T)}static async decompressSignature(t){try{const i=p_(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const x of s)c||=new Uint8Array(new Uint32Array(x.buffer,0,4)[0]),c.set(x,u),u+=x.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=h[2],y=h[3],b=h[4]===0,A=h[5],_=h[6],S=h[7],C=[],w=(ll+pr*_)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(c.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(c.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(c.buffer,w);break}u=0;for(let x=0;x<_;x++){const O=h[pr*x+ll],L=new Float32Array(O+2);C.push(L);for(let N=0;N<pr-1;N++)L[N]=h[pr*x+ll+N+1];for(let N=0;N<O;N++)L[N+2]=L[N]+T[u++]}return{areContours:b,thickness:A,outlines:C,width:g,height:y}}catch(i){return pt(`decompressSignature: ${i}`),null}}}class Xh extends Uy{constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const t=new Xh;return t.updateAll(this),t}}class Yh extends xl{constructor(t){super(t),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const t=new Yh(this._viewParameters);return t.updateAll(this),t}}class Oi extends kt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new Xh,this._defaultDrawnSignatureOptions=new Yh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return gt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=na.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Oi._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,c=Math.max(r,o),u=na.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof Th,this.description=s;let h;this.#t?h=Oi.getDefaultDrawingOptions():(h=Oi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return na.process(t,i,s,r,Oi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return na.extractContoursFromText(t,i,s,r,o,Oi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return na.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Oi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Oi.getDefaultDrawingOptions():(this._drawingOptions=Oi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,c){return c.areContours?Th.deserialize(t,i,s,r,o,c):kr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class tw extends rt{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){rt.initialize(t,i)}static isHandlingMimeForPasting(t){return yh.includes(t)}static paste(t,i){i.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=yh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>c*r||s>c*o){const h=Math.min(c*r/i,c*o/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new ki;let u=this.#t,h=r,f=o,g=null;if(i){if(r>i||o>i){const N=Math.min(i/r,i/o);h=Math.floor(r*N),f=Math.floor(o*N)}g=document.createElement("canvas");const b=g.width=Math.ceil(h*c.sx),A=g.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(b,A));const _=g.getContext("2d");_.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":A_.isDarkMode&&(S="#8f8f9d",C="#42414d");const w=15,T=w*c.sx,x=w*c.sy,O=new OffscreenCanvas(T*2,x*2),L=O.getContext("2d");L.fillStyle=S,L.fillRect(0,0,T*2,x*2),L.fillStyle=C,L.fillRect(0,0,T,x),L.fillRect(T,x,T,x),_.fillStyle=_.createPattern(O,"repeat"),_.fillRect(0,0,b,A),_.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const C=Math.min(t/r,t/o);b=Math.floor(r*C),A=Math.floor(o*C),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:h,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,c=r,u=this.#t;for(;o>2*t||c>2*i;){const h=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(o,c);g.getContext("2d").drawImage(u,0,0,h,f,0,0,o,c),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new ki,c=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#t:this.#u(c,u),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*da.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*da.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof Fy){const{data:{rect:S,rotation:C,id:w,structParent:T,popupRef:x,richText:O,contentsObj:L,creationDate:N,modificationDate:P},container:$,parent:{page:{pageNumber:K}},canvas:J}=t;let Q,ht;J?(delete t.canvas,{id:Q,bitmap:ht}=s.imageManager.getFromCanvas($.id,J),J.remove()):(o=!0,t._hasNoCanvas=!0);const Rt=(await i._structTree.getAriaAttributes(`${sa}${w}`))?.get("aria-label")||"";r=t={annotationType:mt.STAMP,bitmapId:Q,bitmap:ht,pageIndex:K-1,rect:S.slice(0),rotation:C,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:Rt},isSvg:!1,structParent:T,popupRef:x,richText:O,comment:L?.str||null,creationDate:N,modificationDate:P}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,c),c.#o=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,h&&(c.#t=h)):c.#i=f,c.#l=y;const[A,_]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/_,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class nn{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([be,Vh,tw,ae,Oi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:g}){const y=[...nn.#p.values()];if(!nn._initialized){nn._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=c,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===mt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===mt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of nn.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const _=new RegExp(`^${Ar}[0-9]+$`);for(const C of b)if(_.test(C.id)){A=C.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of nn.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=pe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ae.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),rt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return nn.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#w(),o=this.getNextId(),c=this.#C({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await nn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#C({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,g=(c+h)/2-i,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===mt.STAMP||s===mt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,us(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,us(this.div,{rotation:s}),i!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Ce{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return gt(this,"_svgFactory",new yl)}static#r(t,[i,s,r,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#a(){const t=Ce._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=Ce._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ce._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Ce.#i++,o=this.#a(),c=Ce._svgFactory.createElement("defs");o.append(c);const u=Ce._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,h):null,g=Ce._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${h}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=Ce.#i++,r=this.#a(),o=Ce._svgFactory.createElement("defs");r.append(o);const c=Ce._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const y=Ce._svgFactory.createElement("mask");o.append(y),h=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=Ce._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ce._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ce._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Ce.#r(u,r),o){const{classList:h}=u;for(const[f,g]of Object.entries(o))h.toggle(f,g)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Eh};globalThis.pdfjsLib={AbortException:zn,AnnotationEditorLayer:nn,AnnotationEditorParamsType:xt,AnnotationEditorType:mt,AnnotationEditorUIManager:Fn,AnnotationLayer:qh,AnnotationMode:Bn,AnnotationType:he,applyOpacity:__,build:D1,ColorPicker:mi,createValidAbsoluteUrl:oy,CSSConstants:S_,DOMSVGFactory:yl,DrawLayer:Ce,FeatureTest:pe,fetchData:Rr,findContrastColor:w_,getDocument:Dy,getFilenameFromUrl:g_,getPdfFilenameFromUrl:m_,getRGB:Lr,getUuid:uy,getXfaPageViewport:b_,GlobalWorkerOptions:ua,ImageKind:hl,InvalidPDFException:gh,isDataScheme:El,isPdfFile:kh,isValidExplicitDest:k_,MathClamp:Le,noContextMenu:bi,normalizeUnicode:d_,OPS:Sr,OutputScale:ki,PasswordResponses:n_,PDFDataRangeTransport:Ly,PDFDateString:mh,PDFWorker:wr,PermissionFlag:i_,PixelsPerInch:da,RenderingCancelledException:Nh,renderRichText:fy,ResponseException:gl,setLayerDimensions:us,shadow:gt,SignatureExtractor:na,stopEvent:ee,SupportedImageMimeTypes:yh,TextLayer:ti,TouchManager:Cl,updateUrlHash:ly,Util:et,VerbosityLevel:Sl,version:R1,XfaLayer:dy};const ew="/personal-portfolio/assets/pdf.worker.min-LyOxJPrg.mjs",iw="/personal-portfolio/assets/resume-BbyTpD3W.pdf";ua.workerSrc=ew;function nw(){const d=G.useRef(null),[t,i]=G.useState(null),[s,r]=G.useState(1),[o,c]=G.useState(0),[u]=G.useState(1.5);G.useEffect(()=>{(async()=>{try{const b=await Dy(iw).promise;i(b),c(b.numPages)}catch(y){console.error("Error loading PDF:",y)}})()},[]),G.useEffect(()=>{(async()=>{if(!t||!d.current)return;const y=await t.getPage(s),b=y.getViewport({scale:u}),A=d.current,_=A.getContext("2d");A.height=b.height,A.width=b.width;const S={canvasContext:_,viewport:b};await y.render(S).promise})()},[t,s,u]);const h=()=>r(g=>Math.max(g-1,1)),f=()=>r(g=>Math.min(g+1,o));return z.jsxs("div",{className:eh.resume,children:[z.jsxs("section",{children:[z.jsx("h1",{children:"Resume"}),z.jsx("hr",{})]}),z.jsxs("section",{className:eh.resumeSection,children:[z.jsxs("div",{style:{marginBottom:"10px"},children:[z.jsx("button",{onClick:h,disabled:s<=1,children:"Previous"}),z.jsxs("span",{style:{margin:"0 10px"},children:["Page ",s," of ",o]}),z.jsx("button",{onClick:f,disabled:s>=o,children:"Next"})]}),z.jsx("canvas",{ref:d,id:"canvas",className:eh.canvas})]})]})}const sw="_container_uh85y_2",aw="_card_uh85y_13",rw="_header_uh85y_29",ow="_title_uh85y_34",lw="_subtitle_uh85y_45",cw="_formGroup_uh85y_51",uw="_label_uh85y_57",hw="_input_uh85y_63",dw="_textarea_uh85y_64",fw="_button_uh85y_83",Re={container:sw,card:aw,header:rw,title:ow,subtitle:lw,formGroup:cw,label:uw,input:hw,textarea:dw,button:fw};function pw(){const[d,t]=G.useState({name:"",email:"",message:""}),[i,s]=G.useState(!1),r=c=>{const{name:u,value:h}=c.target;t(f=>({...f,[u]:h}))},o=()=>{d.name&&d.email&&d.message&&(console.log("Form submitted:",d),s(!0),setTimeout(()=>{t({name:"",email:"",message:""}),s(!1)},3e3))};return z.jsx("main",{className:Re.container,children:z.jsxs("article",{className:Re.card,children:[z.jsxs("header",{className:Re.header,children:[z.jsx("h1",{className:Re.title,children:"Get In Touch"}),z.jsx("p",{className:Re.subtitle,children:"We would love to hear from you"})]}),z.jsxs("section",{children:[z.jsxs("div",{className:Re.formGroup,children:[z.jsx("label",{htmlFor:"name",className:Re.label,children:"Name"}),z.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:r,placeholder:"Your name",className:Re.input})]}),z.jsxs("div",{className:Re.formGroup,children:[z.jsx("label",{htmlFor:"email",className:Re.label,children:"Email"}),z.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:r,placeholder:"you@example.com",className:Re.input})]}),z.jsxs("div",{className:Re.formGroup,children:[z.jsx("label",{htmlFor:"message",className:Re.label,children:"Message"}),z.jsx("textarea",{id:"message",name:"message",value:d.message,onChange:r,placeholder:"Your message...",rows:"4",className:Re.textarea})]}),z.jsx("button",{type:"button",onClick:o,className:Re.button,children:i?" Sent!":"Send Message"})]})]})})}function gw(){return z.jsxs("div",{className:QA.App,children:[z.jsx(oS,{}),z.jsxs(yA,{children:[z.jsx(as,{path:"/",element:z.jsx(_S,{})}),z.jsx(as,{path:"/about",element:z.jsx(zS,{})}),z.jsx(as,{path:"/projects",element:z.jsx(XS,{})}),z.jsx(as,{path:"/stockapi",element:z.jsx(ZS,{})}),z.jsx(as,{path:"/resume",element:z.jsx(nw,{})}),z.jsx(as,{path:"/contact",element:z.jsx(pw,{})})]})]})}v0.createRoot(document.getElementById("root")).render(z.jsx(G.StrictMode,{children:z.jsx(HA,{children:z.jsx(gw,{})})}));
